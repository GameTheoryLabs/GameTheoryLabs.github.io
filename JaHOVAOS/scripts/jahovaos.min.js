function degToRad(e){return e*(Math.PI/180)}function radToDegrees(e){return e*(180/Math.PI)}var com={};com.jahova={};com.jahova.os=function(){function t(){var t="JaHOVA OS";var n="0v5";var r="scripts/jahova/OS/jahova.os.js";var i="http://gametheorylabs.com/JaHOVAOS/";return{os:null,kernel:null,command:null,resschmgr:null,instruction:null,cores:null,network:null,threads:null,html:null,windows:null,datbase:null,audio:null,graphics:null,utilities:null,console:null,debugbar:null,timer:null,queryString:null,splash:null,video:null,GetName:function(){return t},GetVersion:function(){return n},GetPath:function(){return r},GetDomain:function(){return i},Load:function(t){this.video=document.createElement("video");if(this.video.canPlayType("video/m4v;")){this.video.src="images/splash.m4v"}else{this.video.src="images/splash.webm"}this.video.setAttribute("preload","auto");this.video.setAttribute("autoplay","autoplay");this.video.style.width="100%";this.video.style.height="100%";this.os=com.jahova.os.Instance();this.utilities=com.jahova.utilities.Instance();this.kernel=this.os.Kernel.Instance();this.kernel.Initialize();this.console=this.utilities.Console.Instance();this.console.Initialize();this.debugbar=this.utilities.DebugBar.Instance();this.debugbar.Initialize();this.resschmgr=this.kernel.ResSchMgr.Instance();this.resschmgr.Initialize();this.timer=this.utilities.Timer.Instance();this.timer.Initialize();this.instruction=this.kernel.Instruction.Instance();this.instruction.Initialize();this.command=this.kernel.Command.Instance();this.command.Initialize();this.cores=this.os.Cores.Instance();this.cores.Initialize();this.network=this.cores.Network.Instance();this.network.Initialize();this.threads=this.cores.Threads.Instance();this.threads.Initialize();this.html=this.cores.HTML.Instance();this.html.Initialize();this.windows=this.cores.Windows.Instance();this.windows.Initialize();this.database=this.cores.Database.Instance();this.database.Initialize();this.audio=this.cores.Audio.Instance();this.audio.Initialize();this.graphics=this.cores.Graphics.Instance();this.graphics.Initialize();this.physics=this.cores.Physics.Instance();this.physics.Initialize();this.console.AppendComment("\n**************************\n\nOS LOADING COMPLETE\n\n**************************\n\n");this.console.AppendComment("Loaded Modules");this.console.AppendComment("    "+this.os.GetName());this.console.AppendComment("        "+this.kernel.GetName());this.console.AppendComment("            "+this.command.GetName());this.console.AppendComment("            "+this.resschmgr.GetName());this.console.AppendComment("            "+this.instruction.GetName());this.console.AppendComment("        "+this.cores.GetName());this.console.AppendComment("            "+this.network.GetName());this.console.AppendComment("            "+this.threads.GetName());this.console.AppendComment("            "+this.html.GetName());this.console.AppendComment("            "+this.windows.GetName());this.console.AppendComment("            "+this.database.GetName());this.console.AppendComment("            "+this.audio.GetName());this.console.AppendComment("            "+this.graphics.GetName());this.console.AppendComment("            "+this.physics.GetName());this.console.AppendComment("    "+this.utilities.GetName());this.console.AppendComment("        "+this.console.GetName());this.console.AppendComment("        "+this.timer.GetName());this.console.AppendComment("        "+this.debugbar.GetName());this.console.AppendComment("");this.console.AppendComment("\n\nLoading Terminal Commands, type help to see a list of available commands\n");this.console.LoadCommands();this.console.AppendComment("\nInitializing Query Variables\n");e.os.queryString=e.os.resschmgr.Create.Map();e.os.GetQueryString();this.console.Comment("");e.os.ExecuteQuery()},GetQueryString:function(){var t=/[?&]([^=]+)(?:=([^&]*))?/g;var n;n=t.exec(location.search);while(n){e.os.queryString.put(n[1].toUpperCase(),unescape(n[2]));n=t.exec(location.search)}for(var r=0;r<e.os.queryString.size;r++){e.os.console.AppendComment("Key: "+e.os.queryString.key()+", Value: "+e.os.queryString.value());e.os.queryString.next()}e.os.console.Comment("")},ExecuteQuery:function(){var t=e.os.queryString.get("CONSOLE");var n=e.os.queryString.get("APP");if(t){e.console.cmdWindow.value+=t;e.console.ProcessInputString()}else if(n){(PlaySplash=function(){e.splash=e.os.windows.WindowsManager.Create.Window("","PC");e.splash.Hide.menubar();e.splash.Hide.statusbar();e.splash.Hide.titlebar();e.splash.Hide.toolbar();e.splash.Set.width(480);e.splash.Set.height(270);e.splash.elements.content.AppendChild(e.os.video);e.splash.elements.content.html().style.overflow="hidden";e.splash.Set.position(window.innerHeight/2-135,window.innerWidth/2-240);e.splash.Display.window();setTimeout(e.splash.Hide.window,4e3)})();window[n]()}},Kernel:null,Cores:null,Elements:{JaHOVA:null,Console:null,OS:null,Documentation:null,Demos:null,Application:null,IDE:null}}}var e;return{Instance:function(){if(!e){e=t();os=com.jahova.os.Instance()}return e}}}();com.jahova.utilities=function(){function t(){var e="JaHOVA Utilities";var t="0v3";var n="scripts/jahova/Utilities/jahova.utilities.js";var r=null;var i=null;var s=null;Function.prototype.inherits=function(e){if(e.constructor==Function){this.prototype=new e;this.prototype.constructor=this;this.prototype.parent=e.prototype}else{this.prototype=e;this.prototype.constructor=this;this.prototype.parent=e}return this};Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}};return{GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},Console:null}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.utilities.Instance().Console=function(){function t(){var e="JaHOVA Utilities : Console Module";var t="0v4";var n="scripts/jahova/Utilities/Console/jahova.utilities.console.js";var r=true;var i=com.jahova.os.Instance();var s="~JaHOVA OS >>";var o=this;return{cmdWindow:null,length:0,Pinned:false,ConsoleHover:false,APIPinned:false,APIHover:false,Commands:null,GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetStatus:function(){return r},GetPrompt:function(){return s},Enable:function(){r=true;o.cmdWindow.onkeydown=o.EvaluateInput},Disable:function(){r=false;o.cmdWindow.onkeydown=null},Initialize:function(){o=this;if(i.Elements.ConsoleTabText){i.Elements.ConsoleTabText.onclick=o.PinHover;i.Elements.ConsoleTabPageHeaderPin.onclick=o.Pin}else{}o.cmdWindow=document.createElement("textarea");o.cmdWindow.id="com.jahova.console.textarea";o.cmdWindow.className="console";o.cmdWindow.onkeydown=o.EvaluateInput;o.cmdWindow.value=s},LoadCommands:function(){this.Commands=i.resschmgr.Create.Map();var e="Clears command window\nExample >> clear";this.AddCommand("clear",function(){this.cmdWindow.value=""},this,e);e="Displays a list of all loaded commands\nExample >> help";this.AddCommand("help",this.DisplayCommands,this,e);e="Pins the console and prevents from sliding back\nExample >> pin";this.AddCommand("pin",this.Pin,this,e);e="Load Multi-threaded Physics Demo\nExample >>threads";this.AddCommand("threads",this.ThreadDemo,this,e);e="Load Isometric Mutlithreaded Physics Demo\nExample >>threads2";this.AddCommand("threads2",this.ThreadDemo2,this,e);e="Create a socket and connect to test server, ";e+="Allows the use of SocketSend and SocketClose Commands";e+="\nExample >>SocketOpen";this.AddCommand("SocketOpen",this.SocketCreate,this,e);e="Sends message to server via connected socket, ";e+="Message will be broadcast to all connected users and display in console";e+="\nExample >> SocketSend your message here";this.AddCommand("SocketSend",this.SocketSend,this,e);e="Closes connected socket\nExample >> SocketClose";this.AddCommand("SocketClose",this.SocketClose,this,e);e="Create a Window\nExample >>CreateWindow [ID Name Width Height Top Left]";this.AddCommand("CreateWindow",this.CreateWindow,this,e);e="Start Timer\nExample >>StartTimer";this.AddCommand("StartTimer",this.StartTimer,this,e);e="Stop Timer\nExample >>StopTimer";this.AddCommand("StopTimer",this.StopTimer,this,e);e="Lap Timer\nExample >>LapTimer lapName";this.AddCommand("LapTimer",this.LapTimer,this,e);e="Get Time for specific Lap\nExample >>GetLap lapName";this.AddCommand("GetLap",this.GetLap,this,e);e="Remove Lap From Timer Log\nExample >>RemoveLap lapName";this.AddCommand("RemoveLap",this.RemoveLap,this,e);e="List All Laps in Log\nExample >>ListLaps";this.AddCommand("ListLaps",this.ListLaps,this,e);e="Get Total Elapsed Time\nExample >>ElapsedTime";this.AddCommand("GetElapsedTime",this.GetElapsedTime,this,e);e="Clear Timer Log and Reset\nExample >>ResetTimer";this.AddCommand("ResetTimer",this.ResetTimer,this,e);e="Create Thread API Thread Controller\nExample >>CreateController";this.AddCommand("CreateController",this.CreateThreadController,this,e);e="Create Thread\nExample >>CreateController name type priority suspend callback input pool maxThreadCount";this.AddCommand("CreateThread",this.CreateThread,this,e);e="Execute Thread\nExample >>ExecuteThread";this.AddCommand("ExecuteThread",this.ExecuteThread,this,e);e="Suspend Thread\nExample >>SuspendThread";this.AddCommand("SuspendThread",this.SuspendThread,this,e);e="Resume Thread\nExample >>ResumeThread";this.AddCommand("ResumeThread",this.ResumeThread,this,e);e="Get Thread Suspend Count\nExample >>GetSuspendCount";this.AddCommand("GetSuspendCount",this.GetSuspendCount,this,e);e="Get Thread Function\nExample >>GetThreadFunction";this.AddCommand("GetThreadFunction",this.GetThreadFunction,this,e);e="Add Thread Task, will be queue if busy\nExample >>AddThreadTask";this.AddCommand("AddThreadTask",this.AddThreadTask,this,e);e="Get Current Task of Thread\nExample >>GetThreadCurrentTask";this.AddCommand("GetThreadCurrentTask",this.GetThreadCurrentTask,this,e);e="Get All Pending Task For Thread\nExample >>GetThreadPendingTask";this.AddCommand("GetThreadPendingTask",this.GetThreadPendingTask,this,e);e="Get Thread Status\nExample >>GetThreadStatus";this.AddCommand("GetThreadStatus",this.GetThreadStatus,this,e);e="Get Thread Priority\nExample >>GetThreadPriority";this.AddCommand("GetThreadPriority",this.GetThreadPriority,this,e);e="Set Thread Priority\nExample >>SetThreadPriority";this.AddCommand("SetThreadPriority",this.SetThreadPriority,this,e);e="Get Thread Filename\nExample >>GetThreadFilename";this.AddCommand("GetThreadFilename",this.GetThreadFilename,this,e);e="Create WebSocket in Thread Controller\nExample >>CreateThreadSocket";this.AddCommand("CreateThreadSocket",this.CreateThreadSocket,this,e);e="Close WebSocket in Thread Controller\nExample >>CloseThreadSocket";this.AddCommand("CloseThreadSocket",this.CloseThreadSocket,this,e);e="Load Unearthed Web Client\nExample >>UE";this.AddCommand("UE",this.UE,this,e);e="Get A File From WebDAV Server and Display\nExample >>GetFile filename";this.AddCommand("GetFile",this.GetFile,this,e);e="Get A Folder From WebDAV Server and Display\nExample >>GetFolder foldername/";this.AddCommand("GetFolder",this.GetFolder,this,e);e="Save contents of file to WebDAV Server\nExample >>SaveFile filename ";this.AddCommand("SaveFile",this.SaveFile,this,e);e="Delete file from WebDAV Server\nExample >>DeleteFile filename ";this.AddCommand("DeleteFile",this.DeleteFile,this,e);e="Grabs Query String and Display Key/Value Pairs\nExample >>GetQueryString ";this.AddCommand("GetQueryString",this.GetQueryString,this,e);e="Plot Distribution from File\nExample >>Graph filename ";this.AddCommand("Graph",this.Graph,this,e);e="PHP Echo Test via AJAX\nExample >>PHPEcho value [values...] ";this.AddCommand("PHPEcho",this.PHPEcho,this,e);e="Open MySQL DB via AJAX/PHP\nExample >>DBOpen url username password databaseName ";this.AddCommand("DBOpen",this.DBOpen,this,e);e="Creates a Pop Up Window to Install the Sercuirty Certificate\nCalls Server To Enable Cross Orgin Communication\nAllows HTTP to Communicated with HTTPS\nExample >>DBEnableSecureAccess ";this.AddCommand("DBEnableSecureAccess",this.DBEnableSecureAccess,this,e);e="Open MySQL DB via AJAX/PHP Secure HTTPS Connection\nExample >>DBOpenSecure url username password databaseName ";this.AddCommand("DBOpenSecure",this.DBOpenSecure,this,e);e="Selects All from test MySQL Database\nExample >>DBSelectAll  ";this.AddCommand("DBSelectAll",this.DBSelectAll,this,e);e="Inserts a record into MySQL Database\nExample >>DBInsert  ";this.AddCommand("DBInsert",this.DBInsert,this,e);e="Installs the Desktop Enviroment\nExample >>Desktop  ";this.AddCommand("Desktop",this.Desktop,this,e);e="Displays Sample Error Window\nExample >>CreateErrorWindow  ";this.AddCommand("CreateErrorWindow",this.CreateErrorWindow,this,e);e="Runs WebGL Demo\nExample >>WebGL  ";this.AddCommand("WebGL",this.WebGL,this,e);e="Runs JaHOVA OS Server Demo\nExample >>JOSS  ";this.AddCommand("JOSS",this.JOSS,this,e);e="Runs WebGL CubeMap Demo\nExample >>CubeMap  ";this.AddCommand("CubeMap",this.CubeMap,this,e);e="Runs WebGL Dynamic Shadow Demo\nExample >>DynamicShadow  ";this.AddCommand("DynamicShadow",this.DynamicShadow,this,e);e="Runs WebGL Fog Demo\nExample >>Fog  ";this.AddCommand("Fog",this.Fog,this,e);e="Add Audio\nExample >>AudioAdd  ";this.AddCommand("AudioAdd",this.AudioAdd,this,e);e="Play Audio\nExample >>AudioPlay  ";this.AddCommand("AudioPlay",this.AudioPlay,this,e);e="Pause Audio\nExample >>AudioPause  ";this.AddCommand("AudioPause",this.AudioPause,this,e);e="Runs Physics Demo\nExample >>Physics  ";this.AddCommand("Physics",this.Physics,this,e);e="Runs Collision Detection\nExample >>Collision  ";this.AddCommand("Collision",this.Collision,this,e);e="Opens Chrome Developer Tools\nExample >>Tools  ";this.AddCommand("Tools",this.Tools,this,e)},CreateThreadController:function(){i.threads.ThreadManager.CreateThreadController();i.console.AppendComment("Creating Thread Controller")},CreateThread:function(e){var t=e.split(" ");var n=function(e){var t=e.a+e.b;return"Sum: "+t};var r=i.threads.ThreadManager.GetFunctionBody(n.toString());var s=function(e){i.console.AppendComment("Message Type: "+e.msgType+"\nMessage Data: "+e.data)};var o=i.threads.ThreadManager.CreateThread("Test Thread","DYNAMIC",0,"true",s,r,"0","false",0);if(o){i.console.AppendComment("Thread Created: ");i.console.AppendComment("     Thread Name:     "+o.name);i.console.AppendComment("     Thread ID:       "+o.ID);i.console.AppendComment("     Thread Type:     "+o.type);i.console.AppendComment("     Thread Priority: "+o.priority);i.console.AppendComment("     Thread Function: \n          var sum = input.a + input.b; \n          return sum\n\n")}else{i.console.AppendComment("Returned null, Thread name already exist in map")}},ExecuteThread:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Executing Thread: Summing 2 and 3");var n={};n.a=2;n.b=3;t.Execute(n)},SuspendThread:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Suspending Thread");t.Suspend()},ResumeThread:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Resuming Thread");t.Resume()},GetSuspendCount:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Getting Resume Count For Thread");t.GetSuspendCount()},AddThreadTask:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Executing Thread: Summing 5 and 6");var n={};n.a=5;n.b=6;t.AddTask(n)},GetThreadCurrentTask:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Requesting Current Task");t.GetCurrentTask()},GetThreadPendingTask:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Requesting List Of All Pending Task");t.GetPendingTask()},GetThreadStatus:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Getting Thread Status");t.GetStatus()},GetThreadFunction:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Getting Thread Function");t.GetFunction()},SetThreadPriority:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");var n=1;i.console.AppendComment("Setting Thread Priority");t.SetPriority(n)},GetThreadPriority:function(e){var t=i.thread.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Getting Thread Priority");t.GetPriority()},GetThreadFilename:function(e){var t=i.threads.ThreadManager.GetThreadByName("Test Thread");i.console.AppendComment("Getting Thread Filename");t.GetFilename()},CreateThreadSocket:function(e){i.console.AppendComment("Requesting Socket Creation in Thread Controller");i.thread.ThreadManager.CreateSocket()},CloseThreadSocket:function(e){i.console.AppendComment("Requesting Close Socket in Thread Controller");i.thread.ThreadManager.CloseSocket()},StartTimer:function(){i.console.AppendComment("Start Time: "+i.timer.Start())},StopTimer:function(){i.console.AppendComment("Stop Time: "+i.timer.Stop())},LapTimer:function(e){i.console.AppendComment("Lap Time: "+i.timer.Lap(e))},GetLap:function(e){i.console.AppendComment(e+" Time: "+i.timer.GetLap(e).time)},RemoveLap:function(e){i.console.AppendComment("Removing Lap: "+e)},ListLaps:function(){var e=i.timer.log;var t=i.timer.log.length;if(t>0){for(var n=0;n<t;n++){i.console.AppendComment(e[n].name+": "+e[n].time)}}},GetElapsedTime:function(){i.console.AppendComment("Elapsed Time: "+i.timer.GetElapsedTime())},ResetTimer:function(){i.timer.Reset();i.console.AppendComment("Timer Reset")},ThreadDemo:function(){i.console.Comment("\nCalling Demo Initialization");demo.Initialize()},ThreadDemo2:function(){i.console.Comment("\nCalling Demo Initialization");demoII.Initialize()},CreateWindow:function(e){i.windows.Desktop.Load();macWin=i.windows.Create.Window();macWin.Display.window();macWin.Set.title("Mac Window");macWin.Set.onFocus(function(){macWin.Set.statusbarText("Got Focus")},window);macWin.Set.onBlur(function(){macWin.Set.statusbarText("Got Blur")});pcWin=i.windows.WindowsManager.Create.Window("PC Window","PC");pcWin.Set.position(300,300);pcWin.Set.statusbarText("Status Message");pcWin.Display.window();var t=i.windows.Desktop.Create.Application();t.Set.DisplayText("Create PC");t.onClickScope=window;t.onClick=function(){i.windows.WindowsManager.Create.Window("PC Window","PC").Display.window()};i.windows.Desktop.AddApplication(t);var n=i.windows.Desktop.Create.Application();n.Set.DisplayText("Create Mac");n.onClickScope=window;n.onClick=function(){i.windows.WindowsManager.Create.Window("Mac Window","Mac").Display.window()};i.windows.Desktop.AddApplication(n)},CreateErrorWindow:function(e){i.windows.Create.ErrorWindow("Tetst Error","Test Message")},socketID:null,SocketCreate:function(){var e=i.network.SocketManager.CreateSocket("demo.jahovaos.com","8080"," ");socketID=e.GetID();i.console.AppendComment("Socket Created, ID: "+socketID);var t=i.resschmgr.Create.Window("socketDemo","JaHOVA OS Web Socket Demo",500,400,200,200);i.resschmgr.WindowManager.Windows.value().Elements.Window.style.overflow="auto";t.onclose=i.console.SocketClose;t.onclosescope=i.console;e.onmessage=i.console.SocketOnMessage;e.onmessagescope=i.console;e.onclose=function(){i.console.AppendComment("Socket Closed")};e.onclosescope=i.console;e.onopen=function(){i.resschmgr.WindowManager.Windows.value().Elements.Body.innerHTML+="<br/>Local: Socket Open"};e.onopenscope=i.console;i.console.AppendComment("Callbacks Set");e.Open()},SocketOnMessage:function(e){o.AppendComment(e)},SocketSend:function(e){i.console.AppendComment("\nSending... ");i.network.SocketManager.Sockets.get(socketID).Send(e);var t=document.createElement("div");t.innerHTML="<br/>Local: "+e;i.resschmgr.WindowManager.Windows.value().Elements.Body.innerHTML+="<br/>Local: "+e},SocketClose:function(){if(i.network.SocketManager.Sockets.size>0){i.console.AppendComment("\nClosing Socket");i.network.SocketManager.Sockets.value().Close();i.network.SocketManager.Sockets.remove(socketID);i.resschmgr.WindowManager.Windows.value().Elements.Body.innerHTML+="<br/>Local: Socket Closed"}},Pin:function(){if(i.console.Pinned){i.Elements.ConsoleTabPage.className="debugPage";i.Elements.ConsoleTabPage.style.width="";i.Elements.ConsoleTabPageHeaderPin.className="pin";o.cmdWindow.className="console";i.console.Pinned=false}else{i.Elements.ConsoleTabPage.className="debugPagePin";i.Elements.ConsoleTabPage.style.width="700px";i.Elements.ConsoleTabPageHeaderPin.className="pinPin";o.cmdWindow.className="consolePin";i.console.Pinned=true}},PinHover:function(){},PinAPIDoc:function(){if(i.console.APIPinned){i.Elements.DocumentationTabPage.className="debugPage";i.Elements.DocumentationTabPage.style.width="";i.Elements.DocumentationTabPageHeaderPin.className="pin";i.Elements.DocumentationIFrame.className="jahovaIFrame";i.console.APIPinned=false}else{i.Elements.DocumentationTabPage.className="debugPagePin";i.Elements.DocumentationTabPage.style.width="700px";i.Elements.DocumentationTabPageHeaderPin.className="pinPin";i.Elements.DocumentationIFrame.className="jahovaIFramePin";i.console.APIPinned=true}},PinAPIDocHover:function(){if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("mouseover",true,false);elem.dispatchEvent(e)}else if(document.createEventObject){elem.fireEvent("onmouseover")}},Tools:function(){var e=require("nw.gui");var t=e.Window.get();t.showDevTools()},MakeActive:function(e){o.MakeAllInactive();var t=e.currentTarget.id.indexOf("console");if(t>=0){i.Elements.OutputConsoleDiv.className="outputDivCurrent outputContentBkgColor";i.Elements.ConsoleH3.className="outputH3 jahova_borRadB2 outputTabColorSelected textColorBlack";o.cmdWindow.scrollTop=o.cmdWindow.scrollHeight}else{i.Elements.OutputErrorDiv.className="outputDivCurrent outputContentBkgColor";i.Elements.ErrorH3.className="outputH3 jahova_borRadB2 outputTabColorSelected textColorBlack"}},MakeConsoleActive:function(){o.MakeAllInactive();i.Elements.OutputConsoleDiv.className="outputDivCurrent outputContentBkgColor";i.Elements.ConsoleH3.className="outputH3 jahova_borRadB2 outputTabColorSelected textColorBlack"},MakeAllInactive:function(){i.Elements.OutputConsoleDiv.className="outputDiv ";i.Elements.OutputConsole.className="outputSection";i.Elements.ConsoleH3.className="outputH3 jahova_borRadB2  textColorWhite";i.Elements.OutputErrorDiv.className="outputDiv";i.Elements.OutputError.className="outputSection";i.Elements.ErrorH3.className="outputH3 jahova_borRadB2 textColorWhite"},MakeFileActive:function(e){o.MakeAllFilesInactive();var t=e.currentTarget.id.indexOf("file1");if(t>-1){i.Elements.DocSection1.className="docSection jahova_borRadT2 tabColorSelected";i.Elements.DocH31.className="docH3 jahova_borRadT2";i.Elements.DocDiv.className="docDivCurrent jahova_borRadB2 viewContentBkgColor";i.console.file1.value="CreateThread = "+i.thread.ThreadManager.CreateThread.toString()}else{i.Elements.DocSection2.className="docSection jahova_borRadT2 tabColorSelected";i.Elements.DocH32.className="docH3 jahova_borRadT2";i.Elements.DocDivCurrent.className="docDivCurrent jahova_borRadB2 viewContentBkgColor"}},MakeAllFilesInactive:function(){i.Elements.DocSection1.className="docSection jahova_borRadT2";i.Elements.DocH31.className="docH3 jahova_borRadT2 textColorWhite";i.Elements.DocDiv.className="docDiv viewContentBkgColor";i.Elements.DocSection2.className="docSection jahova_borRadT2";i.Elements.DocH32.className="docH3 jahova_borRadT2 textColorWhite";i.Elements.DocDivCurrent.className="docDiv viewContentBkgColor"},SEHide:function(){i.Elements.FolderView.className="folderView jahova_borRadT2";i.Elements.DocView.className="docViewNFV jahova_borRadB2 appBaseColor";i.Elements.OutputView.className="outputViewNFV jahova_borRadB2 appBaseColor"},SEShow:function(){i.Elements.FolderView.className="folderViewDisplayed jahova_borRadT2";i.Elements.DocView.className="docView jahova_borRadB2 appBaseColor";i.Elements.OutputView.className="outputView jahova_borRadB2 appBaseColor"},UE:function(){window.open("http://demo.jahovaos.com/Unearthed/webClient.html")},GetFile:function(e){var t=e.split(" ");var n=i.resschmgr.Create.XHRObject();var r="http://demo.jahovaos.com/"+e;i.console.AppendComment("Requesting:\n"+r);n.open("GET",r,true);n.onreadystatechange=function(){if(n.readyState==4)i.console.file1.value=n.responseText};n.send()},GetFolder:function(e){var t=e.split(" ");var n=i.resschmgr.Create.XHRObject();var r="";var s=0;if(e.toUpperCase()=="GETFOLDER"){r="http://demo.jahovaos.com/"}else{r="http://demo.jahovaos.com/"+e;s=e.length}i.console.AppendComment("Requesting:\n"+r);n.open("PROPFIND",r,true);n.setRequestHeader("Depth","1");n.onreadystatechange=function(){if(n.readyState==4){var e=n.responseXML;var t="";var r="";var o=e.getElementsByTagName("href");if(o.length==0){o=e.getElementsByTagName("D:href")}for(var u=0;u<o.length;u++){r=o[u].textContent;r=r.substring(s+1);if(r[r.length-1]=="/"){t+="\n"+"Folder: "+r.substring(0,r.length-1)}else{t+="\n"+"File:   "+r}}i.console.file1.value=t}};n.send()},SaveFile:function(e){var t=e.split(" ");var n=i.resschmgr.Create.XHRObject();var r=i.console.file1.value;var s=t[0];i.console.AppendComment("Requesting to Save File:\n"+"http://demo.jahovaos.com/"+s);n.open("PUT","http://demo.jahovaos.com/"+s,true);n.onreadystatechange=function(){if(n.readyState==4)i.console.file1.value=n.responseText};n.send(r)},DeleteFile:function(e){var t=e.split(" ");var n=i.resschmgr.Create.XHRObject();var r=t[0];i.console.AppendComment("Requesting to Delete File:\n"+"http://demo.jahovaos.com/"+r);n.open("DELETE","http://demo.jahovaos.com/"+r,true);n.onreadystatechange=function(){if(n.readyState==4)i.console.file1.value=n.responseText};n.send()},PHPEcho:function(e){var t=i.resschmgr.Create.XHRObject();var n="http://demo.jahovaos.com/MySQL/echo.php";var r="";var s=e.split(" ");var o=JSON.stringify(s);r="JSON="+encodeURIComponent(o);t.open("POST",n,true);t.setRequestHeader("Content-type","application/x-www-form-urlencoded");t.onreadystatechange=function(){if(t.readyState==4){if(t.status==200){i.console.Comment("PHP Response: "+t.responseText)}else{i.console.Comment("PHP ERROR: "+t.responseText)}}};t.send(r)},DBOpen:function(e){var t=i.resschmgr.Create.XHRObject();var n="http://demo.jahovaos.com/MySQL/DBOpen.php";var r="";var s=e.split(" ");values={};values.url=s[0];values.un=s[1];values.pw=s[2];values.db=s[3];var o=JSON.stringify(values);r="JSON="+encodeURIComponent(o);t.open("POST",n,true);t.setRequestHeader("Content-type","application/x-www-form-urlencoded");t.onreadystatechange=function(){if(t.readyState==4){if(t.status==200){i.console.Comment("PHP Response: "+t.responseText)}else{i.console.Comment("PHP ERROR: "+t.responseText)}}};t.send(r)},DBOpenSecure:function(e){var t=i.resschmgr.Create.XHRObject();var n="https://demo.jahovaos.com/MySQL/DBOpen.php";var r="";var s=e.split(" ");values={};values.url=s[0];values.un=s[1];values.pw=s[2];values.db=s[3];var o=JSON.stringify(values);r="JSON="+encodeURIComponent(o);t.open("POST",n,true);t.setRequestHeader("Content-type","application/x-www-form-urlencoded");t.onreadystatechange=function(){if(t.readyState==4){if(t.status==200){i.console.Comment("PHP Response: "+t.responseText)}else{i.console.Error("Could not create secure connection");i.console.AppendComment("Your browser does not have the JaHOVA OS Certficate Installed\n");i.console.AppendComment("The pop up window will allow you to install the certificate");i.console.AppendComment("Or you may go to https://demo.jahovaos.com/MySQL/InstallSSL.html, to install it manually");i.console.AppendComment("\nOnce installed, try your request again");i.console.Comment();i.console.DBEnableSecureAccess()}}};t.send(r)},DBEnableSecureAccess:function(e){window.open("https://demo.jahovaos.com/MySQL/InstallSSL.html","Enable Secure Access","scrollbars=1,menubar=1,resizable=1,width=320,height=480")},DBSelectAll:function(e){var t=i.resschmgr.Create.XHRObject();var n="https://demo.jahovaos.com/MySQL/MySQL.php";var r="";var s={};s.url="demo.jahovaos.com";s.un="student";s.pw="devry";s.db="servers";s.queryType="SELECT";s.query="SELECT * FROM available";var o=JSON.stringify(s);r="JSON="+encodeURIComponent(o);t.open("POST",n,true);t.setRequestHeader("Content-type","application/x-www-form-urlencoded");t.onreadystatechange=function(){if(t.readyState==4){if(t.status==200){i.console.Comment("PHP Response: "+t.responseText)}else{i.console.Error("Could not create secure connection");i.console.AppendComment("Your browser does not have the JaHOVA OS Certficate Installed\n");i.console.AppendComment("The pop up window will allow you to install the certificate");i.console.AppendComment("Or you may go to https://demo.jahovaos.com/MySQL/InstallSSL.html, to install it manually");i.console.AppendComment("\nOnce installed, try your request again");i.console.Comment();i.console.DBEnableSecureAccess()}}};t.send(r)},DBInsert:function(e){var t=i.resschmgr.Create.XHRObject();var n="https://demo.jahovaos.com/MySQL/MySQL.php";var r="";var s={};s.url="demo.jahovaos.com";s.un="student";s.pw="devry";s.db="servers";s.queryType="INSERT";s.query="INSERT INTO available(IP, lifetime, utimestamp) VALUES('70.234.209.144', '0', '1285823299')";var o=JSON.stringify(s);r="JSON="+encodeURIComponent(o);t.open("POST",n,true);t.setRequestHeader("Content-type","application/x-www-form-urlencoded");t.onreadystatechange=function(){if(t.readyState==4){if(t.status==200){i.console.Comment("PHP Response: "+t.responseText)}else{i.console.Error("Could not create secure connection");i.console.AppendComment("Your browser does not have the JaHOVA OS Certficate Installed\n");i.console.AppendComment("The pop up window will allow you to install the certificate");i.console.AppendComment("Or you may go to https://demo.jahovaos.com/MySQL/InstallSSL.html, to install it manually");i.console.AppendComment("\nOnce installed, try your request again");i.console.Comment();i.console.DBEnableSecureAccess()}}};t.send(r)},Desktop:function(e){i.windows.Desktop.Load();var t=i.windows.Desktop.Create.Application();t.Set.DisplayText("Daily Receipts");t.onClickScope=window;t.onClick=function(){i.windows.WindowsManager.Create.Window("Daily Receipts","PC").Display.window()};i.windows.Desktop.AddApplication(t);var n=i.windows.Desktop.Create.Application();n.Set.DisplayText("Pending Receipts");n.onClickScope=window;n.onClick=function(){i.windows.WindowsManager.Create.Window("Pending Receipts","Mac").Display.window()};i.windows.Desktop.AddApplication(n);var r=i.windows.Desktop.Create.Application();r.Set.DisplayText("Report Generator");r.onClickScope=window;r.onClick=function(){i.windows.WindowsManager.Create.Window("Report Generator","Mac").Display.window()};i.windows.Desktop.AddApplication(r)},GetQueryString:function(){var e=/[?&]([^=]+)(?:=([^&]*))?/g;var t;t=e.exec(location.search);while(t){i.queryString.put(t[1],t[2]);t=e.exec(location.search)}for(var n=0;n<i.queryString.size;n++){i.console.AppendComment("Key: "+i.queryString.key()+", Value: "+i.queryString.value());i.queryString.next()}},Graph:function(e){var t=e.split(" ");var n=i.resschmgr.Create.XHRObject();var r="http://demo.jahovaos.com/"+e;i.console.AppendComment("Requesting:\n"+r);n.open("GET",r,false);n.send();var s=n.responseText;var o=function(e){this.Canvas={object:"",context:"",width:"",height:""};this.Properties={XAxis:{x:0,y:0,min:0,max:0,divisions:0,label:"",labelOffset:0},YAxis:{x:0,y:0,min:0,max:0,divixions:0,label:"",labelOffset:0},Type:"",Title:"",LegendVisible:true,TitleVisible:true,XAxisLabelVisible:true,YAxisLabelVisible:true,DataPointWidth:0,NumOfSeries:0};this.PlotArea={x:0,y:0,x1:0,y1:0,width:0,height:0,pad:0};this.Legend={x:0,y:0,width:0,height:0,tabs:[],CTab:function(){this.x=0;this.y=0;this.width=0;this.height=0;this.id=0;this.color=[];this.label="";this.Init=function(){}.bind(this)()}};this.Data={file:"",min:0,max:0,ymin:0,ymax:0,xLabel:"",yLabel:"",series:[],order:[],numOfSeries:0,numOfBins:0,dOrder:[],title:"",CSeries:function(){this.rawData=[];this.browser="";this.color=[0,0,0];this.data=[];this.bins=[];this.stats=[];this.min=0;this.max=0;this.minY=0;this.maxY=0;this.stdev=0;this.num=0;this.avg=0;var e=function(){}.bind(this)()}};this.Box={pi:"",rad:"",depth:"",theta:"",wBar:"",nSeries:"",xOffset:"",yOffset:"",BackPanel:{x:"",y:"",w:"",h:""}};this.MouseClick=function(e){var t=e.clientX-u.Window.left;var n=e.clientY-u.Window.top-20;for(var r=0;r<this.Legend.tabs.length;r++){var i=this.Legend.tabs[r].x;var s=this.Legend.tabs[r].y;var o=this.Legend.tabs[r].x+this.Legend.tabs[r].width;var a=this.Legend.tabs[r].y+this.Legend.tabs[r].height;if(t>i&&t<o&&n>s&&n<a){this.Data.dOrder[this.Data.series.length-1]=r;for(var f=0,l=0;f<this.Legend.tabs.length;f++){if(f!=r){this.Data.dOrder[l]=f;l++}}this.DrawData();this.DrawLegend()}}}.bind(this);var t=function(){this.Canvas.object=document.getElementById(e);this.Canvas.context=this.Canvas.object.getContext("2d");this.Properties.NumOfSeries=3;this.PlotArea.pad=10;this.PlotArea.x=100;this.PlotArea.y=75;this.Canvas.object.onmousedown=this.MouseClick}.bind(this)();this.LoadData=function(e){var t=e.split("*");var n=t[0].split("||");var r=[];for(var s=0;s<t.length;s++){r[s]=t[s].split("||")}this.Data.title=n[1];this.Data.xLabel=n[2];this.Data.yLabel=n[3];this.Data.numOfSeries=t.length;for(var s=0;s<t.length;s++){this.Data.dOrder[s]=s;var o=new this.Data.CSeries;this.Data.series[s]=o;this.Data.series[s].rawData=r[s];this.Data.series[s].browser=a.Data.series[s].rawData[0];var u=this.Data.series[s].rawData.slice(4);this.Data.series[s].data=u[0].split("|");this.Data.series[s].data.pop();this.Data.series[s].color[s]=128;this.Data.series[s].max=Number(this.Data.series[s].data[0]);this.Data.series[s].min=Number(this.Data.series[s].data[0])}this.Data.min=Number(this.Data.series[0].data[0]);this.Data.max=Number(this.Data.series[0].data[0]);this.Data.ymin=Number(this.Data.series[0].data[0]);this.Data.ymax=Number(this.Data.series[0].data[0]);for(var s=0;s<this.Data.series.length;s++){if(this.Data.numOfBins<Number(Math.sqrt(this.Data.series[s].data.length).toFixed())){this.Data.numOfBins=Number(Math.sqrt(this.Data.series[s].data.length).toFixed())}for(var f=0;f<this.Data.series[s].data.length;f++){this.Data.series[s].avg+=Number(this.Data.series[s].data[f]);if(Number(this.Data.series[s].data[f])>Number(this.Data.series[s].max)){this.Data.series[s].max=Number(this.Data.series[s].data[f])}if(Number(this.Data.series[s].data[f])<Number(this.Data.series[s].min)){this.Data.series[s].min=Number(this.Data.series[s].data[f])}}if(Number(this.Data.series[s].min)<Number(this.Data.min)){this.Data.min=Number(this.Data.series[s].min)}this.Data.series[s].stats.push("Min: "&&this.Data.series[s].min);if(Number(this.Data.series[s].max)>Number(this.Data.max)){this.Data.max=Number(this.Data.series[s].max)}this.Data.series[s].stats.push("Max: "&&this.Data.series[s].max)}for(var s=0;s<this.Data.series.length;s++){this.Data.series[s].num=this.Data.series[s].data.length;this.Data.series[s].stats.push("N: "&&this.Data.series[s].num);this.Data.series[s].avg=Number(this.Data.series[s].avg)/this.Data.series[s].data.length;this.Data.series[s].stats.push("Mean: "&&this.Data.series[s].avg);this.Data.series[s].stdev=0;for(var f=0;f<this.Data.series[s].data.length;f++){this.Data.series[s].stdev+=Math.pow(Number(this.Data.series[s].avg)-Number(this.Data.series[s].data[f]),2)}this.Data.series[s].stdev=this.Data.series[s].stdev/this.Data.series[s].data.length;this.Data.series[s].stdev=Math.sqrt(this.Data.series[s].stdev);this.Data.series[s].stats.push("Stdev: "&&this.Data.series[s].stdev);this.Data.series[s].bins[0]={bin:this.Data.min,count:0};for(f=1;f<=this.Data.numOfBins;f++){this.Data.series[s].bins[f]={bin:Number(this.Data.series[s].bins[f-1].bin)+(this.Data.max-this.Data.min)/this.Data.numOfBins,count:0}}this.Data.series[s].maxY=this.Data.series[s].bins[0].count;this.Data.series[s].minY=this.Data.series[s].bins[0].count;for(var f=0;f<this.Data.series[s].data.length;f++){var l=0;while(this.Data.series[s].data[f]>this.Data.series[s].bins[l].bin&&l<this.Data.series[s].bins.length-1){l++}this.Data.series[s].bins[l].count++;if(Number(this.Data.series[s].bins[l].count)>this.Data.series[s].maxY){this.Data.series[s].maxY=Number(this.Data.series[s].bins[l].count)}if(Number(this.Data.series[s].bins[l].count)<this.Data.series[s].minY){this.Data.series[s].minY=Number(this.Data.series[s].bins[l].count)}i.console.file1.value+="\nBin: "+this.Data.series[s].bins[l].bin+", Count: "+this.Data.series[s].bins[l].count}if(this.Data.series[s].maxY>this.Data.ymax){this.Data.ymax=Number(this.Data.series[s].maxY)}if(this.Data.series[s].minY<this.Data.ymin){this.Data.ymin=Number(this.Data.series[s].minY)}}this.Properties.NumOfSeries=t.length;this.Properties.XAxis.label=this.Data.xLabel;this.Properties.YAxis.label=this.Data.yLabel;this.Type="Histogram";this.Title="Time to Send Large Messages";this.Properties.XAxis.min=this.Data.min;this.Properties.XAxis.max=this.Data.max;this.Properties.YAxis.min=0;this.Properties.YAxis.max=this.Data.ymax;this.DataPointWidth=10}.bind(this);var n=function(){this.Box.pi=3.14159265;this.Box.theta=45;this.Box.rad=this.Box.theta*this.Box.pi/180;this.Box.nSeries=this.Properties.NumOfSeries;this.Box.wBar=this.DataPointWidth;this.Box.depth=this.Box.wBar*this.Box.nSeries*1.5;this.Box.xOffset=this.Box.depth*Math.cos(this.Box.rad);this.Box.yOffset=this.Box.depth*Math.sin(this.Box.rad);this.Box.BackPanel.x=this.PlotArea.x+this.Box.xOffset;this.Box.BackPanel.y=this.PlotArea.y;this.Box.BackPanel.w=this.PlotArea.width-this.Box.xOffset;this.Box.BackPanel.h=this.PlotArea.height-this.Box.yOffset}.bind(this);var r=function(){n();this.Canvas.context.fillStyle="white";this.Canvas.context.fillRect(this.Box.BackPanel.x,this.Box.BackPanel.y,this.Box.BackPanel.w+this.DataPointWidth,this.Box.BackPanel.h);this.Canvas.context.fillStyle="white";this.Canvas.context.beginPath();this.Canvas.context.moveTo(this.Box.BackPanel.x,this.Box.BackPanel.y);this.Canvas.context.lineTo(this.Box.BackPanel.x-this.Box.xOffset,this.Box.BackPanel.y+this.Box.yOffset);this.Canvas.context.lineTo(this.Box.BackPanel.x-this.Box.xOffset,this.Box.BackPanel.y+this.Box.yOffset+this.Box.BackPanel.h);this.Canvas.context.lineTo(this.Box.BackPanel.x,this.Box.BackPanel.y+this.Box.BackPanel.h);this.Canvas.context.fill();this.Canvas.context.fillStyle="white";this.Canvas.context.beginPath();this.Canvas.context.moveTo(this.Box.BackPanel.x,this.Box.BackPanel.y+this.Box.BackPanel.h);this.Canvas.context.lineTo(this.Box.BackPanel.x-this.Box.xOffset,this.Box.BackPanel.y+this.Box.yOffset+this.Box.BackPanel.h);this.Canvas.context.lineTo(this.Box.BackPanel.x-this.Box.xOffset+this.Box.BackPanel.w+this.DataPointWidth,this.Box.BackPanel.y+this.Box.yOffset+this.Box.BackPanel.h);this.Canvas.context.lineTo(this.Box.BackPanel.x+this.Box.BackPanel.w+this.DataPointWidth,this.Box.BackPanel.y+this.Box.BackPanel.h);this.Canvas.context.fill()}.bind(this);var s=function(){var e=16;var t=16;var n=this.Data.series[0].stats.length*t;this.Legend.width=80;var r=this.Legend.width/this.Data.series.length;this.Legend.height=e+t+n;this.Legend.x=this.PlotArea.x1+(this.Canvas.width-this.PlotArea.x1-this.Legend.width)/2;this.Legend.y=this.PlotArea.y;for(var i=0;i<this.Data.series.length;i++){this.Legend.tabs[i]=new this.Legend.CTab;this.Legend.tabs[i].label=this.Data.series[i].browser;this.Legend.tabs[i].width=r;this.Legend.tabs[i].height=t;this.Legend.tabs[i].x=this.Legend.x+r*i;this.Legend.tabs[i].y=this.Legend.y+e;this.Legend.tabs[i].color=this.Data.series[i].color}}.bind(this);this.DrawData=function(){o();for(var e=0;e<this.Properties.NumOfSeries;e++){for(var t=0;t<this.Data.series[e].bins.length;t++){b(this.Data.series[this.Data.dOrder[e]].bins[t].bin,this.Data.series[this.Data.dOrder[e]].bins[t].count,e+1,this.Data.series[this.Data.dOrder[e]].color)}}}.bind(this);var o=function(){var e=this.Canvas.context.createLinearGradient(0,0,this.Canvas.width,this.Canvas.height);e.addColorStop(0,"lightsteelblue");e.addColorStop(1,"whitesmoke");this.Canvas.context.fillStyle=e;this.Canvas.context.fillRect(0,0,this.Canvas.width,this.Canvas.height);this.PlotArea.width=this.Canvas.width-300;this.PlotArea.height=this.Canvas.height-150;this.PlotArea.x1=this.PlotArea.x+this.PlotArea.width;this.PlotArea.y1=this.PlotArea.y+this.PlotArea.height;f();r();p();d();g();y()}.bind(this);var f=function(){var e=-30;this.Canvas.context.font="14px sans-serif";this.Canvas.context.fillStyle="black";this.Canvas.context.textAlign="center";this.Canvas.context.textBaseline="bottom";this.Canvas.context.fillText(this.Data.title,this.Canvas.width/2,this.PlotArea.y+e)}.bind(this);var l=function(){var e=this.DataPointWidth/2;var t=this.Series.length*this.DataPointWidth;this.Canvas.context.fillStyle="white";this.Canvas.context.fillRect(this.PlotArea.x+this.DataPointWidth+t,this.PlotArea.y-t,this.PlotArea.width,this.PlotArea.height+t);this.Canvas.context.fillStyle="lightgray";this.Canvas.context.beginPath();this.Canvas.context.moveTo(this.PlotArea.x,this.PlotArea.y1);this.Canvas.context.lineTo(this.PlotArea.x+e,this.PlotArea.y1-e);this.Canvas.context.lineTo(this.PlotArea.x1+e,this.PlotArea.y1-e);this.Canvas.context.lineTo(this.PlotArea.x1,this.PlotArea.y1);this.Canvas.context.fill()}.bind(this);var c=function(){}.bind(this);var h=function(){}.bind(this);var p=function(){var e=Number((this.Data.ymax/10).toFixed());var t=0;var n=Number((this.Box.BackPanel.h/10).toFixed());this.Canvas.context.textAlign="right";this.Canvas.context.textBaseline="middle";this.Canvas.context.fillStyle="black";this.Canvas.context.font="12px sans-serif";for(var r=0;r<10;r++){this.Canvas.context.fillText(this.Properties.YAxis.min+t,this.PlotArea.x-5,this.PlotArea.y1-r*n);t+=e;this.Canvas.context.strokeStyle="lightgray";this.Canvas.context.beginPath();this.Canvas.context.moveTo(this.PlotArea.x,this.PlotArea.y1-r*n);this.Canvas.context.lineTo(this.Box.BackPanel.x,this.PlotArea.y1-r*n-this.Box.yOffset);this.Canvas.context.lineTo(this.Box.BackPanel.x+this.Box.BackPanel.w+this.DataPointWidth,this.PlotArea.y1-r*n-this.Box.yOffset);this.Canvas.context.stroke()}this.Canvas.context.fillText(t,this.PlotArea.x-5,this.PlotArea.y1-10*n);this.Canvas.context.strokeStyle="lightgray";this.Canvas.context.beginPath();this.Canvas.context.moveTo(this.Box.BackPanel.x,this.Box.BackPanel.y+this.Box.BackPanel.h);this.Canvas.context.lineTo(this.Box.BackPanel.x,this.Box.BackPanel.y);this.Canvas.context.stroke()}.bind(this);var d=function(){this.Canvas.context.save();this.Canvas.context.translate(this.PlotArea.x-50,this.PlotArea.y1-this.PlotArea.height/2);this.Canvas.context.rotate(-Math.PI/2);this.Canvas.context.textAlign="center";this.Canvas.context.fillStyle="black";this.Canvas.context.font="12px sans-serif";this.Canvas.context.fillText(this.Properties.YAxis.label,0,0);this.Canvas.context.restore()}.bind(this);var v=function(){}.bind(this);var m=function(){}.bind(this);var g=function(){var e=Number(((this.Data.max-this.Data.min)/5).toFixed(1));var t=0;var n=Number((this.Box.BackPanel.w/5).toFixed(1));this.Canvas.context.textAlign="left";this.Canvas.context.fillStyle="black";this.Canvas.context.font="12px sans-serif";for(var r=0;r<5;r++){var i=Number((Number(this.Data.min.toFixed(1))+Number(t.toFixed(1))).toFixed(1));this.Canvas.context.fillText(Number((Number(this.Data.min.toFixed(1))+Number(t.toFixed(1))).toFixed(1)),this.PlotArea.x+r*n-5,this.PlotArea.y1+15);t+=e}this.Canvas.context.fillText(Number((Number(this.Data.min.toFixed(1))+Number(t.toFixed(1))).toFixed(1)),this.PlotArea.x+5*n,this.PlotArea.y1+15)}.bind(this);var y=function(){var e=40;this.Canvas.context.fillStyle="black";this.Canvas.context.font="12px sans-serif";this.Canvas.context.textAlign="center";this.Canvas.context.textBaseline="bottom";this.Canvas.context.fillText(this.Properties.XAxis.label,this.PlotArea.x+this.PlotArea.width/2,this.PlotArea.y1+e)}.bind(this);this.DrawLegend=function(){s();this.Canvas.context.strokeStyle="black";this.Canvas.context.strokeRect(this.Legend.x,this.Legend.y,this.Legend.width,this.Legend.height);this.Canvas.context.font="12px sans-serif";this.Canvas.context.fillStyle="black";this.Canvas.context.textAlign="center";this.Canvas.context.textBaseline="bottom";this.Canvas.context.fillText("Statistics",this.Legend.x+this.Legend.width/2,this.Legend.y+14);for(var e=0;e<this.Legend.tabs.length;e++){this.Canvas.context.fillStyle="rgb("+this.Data.series[e].color[0]+", "+this.Data.series[e].color[1]+", "+this.Data.series[e].color[2]+")";this.Canvas.context.fillRect(this.Legend.tabs[e].x,this.Legend.tabs[e].y,this.Legend.tabs[e].width,this.Legend.tabs[e].height)}this.Canvas.context.font="10px monaco";this.Canvas.context.textAlign="left";this.Canvas.context.fillStyle="black";var t=this.Data.dOrder[this.Data.series.length-1];var n=this.Legend.tabs[0].y+this.Legend.tabs[0].height;this.Canvas.context.fillText("Min:   "+this.Data.series[t].stats[0].toFixed(2),this.Legend.x+3,n+(this.Legend.tabs[0].height-3)*1);this.Canvas.context.fillText("Max:   "+this.Data.series[t].stats[1].toFixed(2),this.Legend.x+3,n+(this.Legend.tabs[0].height-3)*2);this.Canvas.context.fillText("N:     "+this.Data.series[t].stats[2].toFixed(),this.Legend.x+3,n+(this.Legend.tabs[0].height-3)*3);this.Canvas.context.fillText("Mean:  "+this.Data.series[t].stats[3].toFixed(2),this.Legend.x+3,n+(this.Legend.tabs[0].height-3)*4);this.Canvas.context.fillText("Stdev: "+this.Data.series[t].stats[4].toFixed(2),this.Legend.x+3,n+(this.Legend.tabs[0].height-3)*5);this.Canvas.context.strokeStyle="black";this.Canvas.context.strokeRect(this.Legend.x,this.Legend.y+this.Legend.height+10,this.Legend.width,75);this.Canvas.context.font="12px sans-serif";this.Canvas.context.fillStyle="black";this.Canvas.context.textAlign="center";this.Canvas.context.textBaseline="bottom";this.Canvas.context.fillText("Legend",this.Legend.x+this.Legend.width/2,this.Legend.y+this.Legend.height+25);for(var e=0,r=16;e<this.Data.series.length;e++){this.Canvas.context.fillStyle="rgb("+this.Data.series[e].color[0]+", "+this.Data.series[e].color[1]+", "+this.Data.series[e].color[2]+")";this.Canvas.context.fillRect(this.Legend.x,this.Legend.y+this.Legend.height+15+r*(1+e),14,14);this.Canvas.context.font="12px sans-serif";this.Canvas.context.textAlign="left";if(this.Data.dOrder[this.Data.series.length-1]==e){this.Canvas.context.fillStyle="rgb("+this.Data.series[e].color[0]+", "+this.Data.series[e].color[1]+", "+this.Data.series[e].color[2]+")"}else{this.Canvas.context.fillStyle="black"}this.Canvas.context.fillText(this.Data.series[e].browser,this.Legend.x+20,this.Legend.y+this.Legend.height+30+r*(1+e))}}.bind(this);var b=function(e,t,n,r){var i=this.PlotArea.x+(e-this.Properties.XAxis.min)*(this.Box.BackPanel.w/(this.Properties.XAxis.max-this.Properties.XAxis.min));var s=(t-this.Properties.YAxis.min)*(this.Box.BackPanel.h/(this.Properties.YAxis.max-this.Properties.YAxis.min));var o=this.PlotArea.y+this.PlotArea.height-s;var u=this.DataPointWidth;var a=this.Box.depth/(2*this.Box.nSeries-1);var f=a*Math.cos(this.Box.rad)*2;var l=a*Math.sin(this.Box.rad)*2;var c=a*Math.cos(this.Box.rad);var h=a*Math.sin(this.Box.rad);var u=this.DataPointWidth;i=i+f*(this.Box.nSeries-n);o=o-l*(this.Box.nSeries-n);this.Canvas.context.fillStyle="rgb("+r[0]+", "+r[1]+", "+r[2]+")";this.Canvas.context.fillRect(i,o,u,s);var p=60;this.Canvas.context.fillStyle="rgb("+(r[0]-p)+", "+(r[1]-p)+", "+(r[2]-p)+")";this.Canvas.context.beginPath();this.Canvas.context.moveTo(i+u,o);this.Canvas.context.lineTo(i+u,o+s);this.Canvas.context.lineTo(i+u+c,o+s-h);this.Canvas.context.lineTo(i+u+c,o-h);this.Canvas.context.fill();this.Canvas.context.fillStyle="rgb("+(r[0]+p)+", "+(r[1]+p)+", "+(r[2]+p)+")";this.Canvas.context.beginPath();this.Canvas.context.moveTo(i,o);this.Canvas.context.lineTo(i+u,o);this.Canvas.context.lineTo(i+u+c,o-h);this.Canvas.context.lineTo(i+c,o-h);this.Canvas.context.fill()}.bind(this)};var u={};u.Title="My Test Chart";u.Window=i.resschmgr.Create.Window("chart","Distribution Plot",900,600,100,100);u.Window.Elements.Window.style.backgroundImage="url()";u.Canvas=document.createElement("canvas");u.Canvas.id=u.Title;u.Canvas.width="900";u.Canvas.height="580";u.Plot=u.Canvas.getContext("2d");u.Window.Elements.Body.appendChild(u.Canvas);var a=new o(u.Title);a.Canvas.width="900";a.Canvas.height="580";a.LoadData(s);a.DrawData();a.DrawLegend()},WebGL:function(){canvas=i.resschmgr.Create.HTMLElement("canvas");canvas.html().style.width="100%";canvas.html().style.height="100%";Win=i.windows.WindowsManager.Create.Window("WebGL Demo","PC");Win.Set.position(300,300);Win.elements.content.AppendChild(canvas.html());Win.elements.content.html().style.overflow="hidden";Win.Set.statusbarText("FPS: ");Win.Display.window();Win.Set.width(400);Win.Set.height(300);Win.Set.onMax(i.graphics.OnReset);Win.Set.onMin(i.graphics.Pause);i.graphics.Load(true,false,canvas.html());i.graphics.Managers.Texture.Create.Texture("scorpion","scripts/jahova/OS/Cores/Graphics/textures/scorpion.jpg");i.graphics.Managers.Mesh.Create.Mesh("scorpion","scripts/jahova/OS/Cores/Graphics/meshes/scorpion.json");i.graphics.Managers.Texture.Create.Texture("goliath","scripts/jahova/OS/Cores/Graphics/textures/goliath.jpg");i.graphics.Managers.Mesh.Create.Mesh("goliath","scripts/jahova/OS/Cores/Graphics/meshes/goliath.json");ent=i.graphics.Managers.Entity.Create();ent.Graphics.Add.Mesh("scorpion");ent.Graphics.Add.Texture("scorpion");ent.Graphics.Vectors.Scale.set([.5,.5,.5]);ent.Graphics.Update=function(e){ent.roll+=.05*e;ent.pitch+=.05*e;Win.Set.statusbarText("FPS: "+(1/e*1e3).toFixed(3))};i.graphics.AddToWorld(ent);i.graphics.Start()},Fog:function(){var e=i.resschmgr.Create.HTMLElement("canvas");e.html().style.width="100%";e.html().style.height="100%";document.body.appendChild(e.html());document.body.style.overflow="hidden";i.graphics.Load(false,false,e.html());i.graphics.Managers.Texture.Create.Texture("starhawk","scripts/jahova/OS/Cores/Graphics/textures/starhawk.jpg");i.graphics.Managers.Mesh.Create.Mesh("starhawk","scripts/jahova/OS/Cores/Graphics/meshes/starhawk.json");quad=i.graphics.Managers.Mesh.Create.Primitive.Quad("quad");quad.Initialize();i.graphics.Managers.Shader.Create.VertexShader("shadow","scripts/jahova/OS/Cores/Graphics/shaders/shadow.vs");i.graphics.Managers.Shader.Create.FragmentShader("shadow","scripts/jahova/OS/Cores/Graphics/shaders/shadow.fs");Win=i.windows.WindowsManager.Create.Window("Fog","PC");Win.Set.position(0,0);Win.elements.content.html().style.overflow="hidden";Win.Set.statusbarText("");Win.Display.window();Win.Set.width(200);Win.Set.height(60);Win.Set.onMax(i.graphics.OnReset);Win.Set.onMin(i.graphics.Pause);terrain=i.graphics.Managers.Entity.Create();terrain.Graphics.Add.Mesh("quad");terrain.Graphics.Set.light(false);terrain.Graphics.Set.useBlendColor(true);terrain.Graphics.Set.texture(false);terrain.Graphics.Set.blendColor([.17,.26,.4]);terrain.Set.Scale(2e3,2e3,2e3);terrain.pitch=90;terrain.Set.Position(0,1999,0);terrain.Graphics.Set.fog(true);terrain.Graphics.Set.fogEndPosition(1e3);terrain.Graphics.Set.fogBeginPosition(200);i.graphics.AddToWorld(terrain);starhawk=i.graphics.Managers.Entity.Create();starhawk.Graphics.Add.Mesh("starhawk");starhawk.Graphics.Add.Texture("starhawk");starhawk.Graphics.Vectors.Scale.set([.5,.5,.5]);starhawk.Set.Position(0,50,100);starhawk.Graphics.Update=function(e){starhawk.yaw+=.05*e};starhawk.Graphics.Set.fog(true);starhawk.Graphics.Set.fogEndPosition(1500);starhawk.Graphics.Set.fogBeginPosition(200);var t=i.graphics.Managers.Shader.Create.Program("shadow","shadow","shadow");t.CreateAttribute("aVertexPosition");t.CreateUniform("uPMatrix");t.CreateUniform("uVMatrix");t.CreateUniform("uWMatrix");t.CreateUniform("uLight");var n=starhawk.Graphics.Add.Shader("shadow","shadow");n.AddAttribute("aVertexPosition","FLOAT",null,"VERTEX",null);n.AddUniform("uPMatrix","4X4",i.graphics.Matrix.Projection);n.AddUniform("uVMatrix","4X4",i.graphics.Matrix.View);n.AddUniform("uWMatrix","4X4",starhawk.Graphics.Matrix.World);n.AddUniform("uLight","VEC3",[0,1e3,500]);i.graphics.AddToUpdate(starhawk);FogDraw=function(){starhawk.Graphics.Draw("default");starhawk.Graphics.Draw("shadow")};FogUpdate=function(e){Win.Set.statusbarText("FPS: "+(1/e*1e3).toFixed(3))};i.graphics.Set.Callback.Draw(FogDraw);i.graphics.Set.Callback.Update(FogUpdate);i.graphics.Managers.Camera.MoveUp(150);i.graphics.Managers.Camera.Rotation.pitch=5;Input={Mouse:{lastX:0,lastY:0,pressed:false}};onKeyDown=function(e){if(String.fromCharCode(e.keyCode)=="W"){i.graphics.Managers.Camera.MoveForward(10)}else if(String.fromCharCode(e.keyCode)=="S"){i.graphics.Managers.Camera.MoveBackward(10)}else if(String.fromCharCode(e.keyCode)=="A"){i.graphics.Managers.Camera.MoveLeft(10)}else if(String.fromCharCode(e.keyCode)=="D"){i.graphics.Managers.Camera.MoveRight(10)}else if(String.fromCharCode(e.keyCode)=="Q"){i.graphics.Managers.Camera.MoveUp(5)}else if(String.fromCharCode(e.keyCode)=="E"){i.graphics.Managers.Camera.MoveDown(10)}};onMouseDown=function(e){Input.Mouse.lastX=e.clientX;Input.Mouse.lastY=e.clientY;Input.Mouse.pressed=true};onMouseUp=function(e){Input.Mouse.pressed=false};onMouseMove=function(e){if(!Input.Mouse.pressed){return}var t=i.graphics.Managers.Camera;var n=e.clientX;var r=e.clientY;var s=n-Input.Mouse.lastX;t.Rotation.yaw+=s/10;if(t.Rotation.yaw>360){t.Rotation.yaw-=360}else if(t.Rotation.yaw<0){t.Rotation.yaw+=360}var o=r-Input.Mouse.lastY;t.Rotation.pitch+=o/10;if(t.Rotation.pitch>360){t.Rotation.pitch-=360}else if(t.Rotation.pitch<0){t.Rotation.pitch+=360}Input.Mouse.lastX=n;Input.Mouse.lastY=r};window.addEventListener("keydown",onKeyDown,false);i.graphics.Get.Canvas().addEventListener("mousedown",onMouseDown,false);document.addEventListener("mouseup",onMouseUp,false);document.addEventListener("mousemove",onMouseMove,false);i.graphics.Start()},DynamicShadow:function(){var e=i.resschmgr.Create.HTMLElement("canvas");e.html().style.width="100%";e.html().style.height="100%";document.body.appendChild(e.html());document.body.style.overflow="hidden";i.graphics.Load(false,false,e.html());i.graphics.Managers.Texture.Create.Texture("starhawk","scripts/jahova/OS/Cores/Graphics/textures/starhawk.jpg");i.graphics.Managers.Mesh.Create.Mesh("starhawk","scripts/jahova/OS/Cores/Graphics/meshes/starhawk.json");quad=i.graphics.Managers.Mesh.Create.Primitive.Quad("quad");quad.Initialize();i.graphics.Managers.Shader.Create.VertexShader("shadow","scripts/jahova/OS/Cores/Graphics/shaders/shadow.vs");i.graphics.Managers.Shader.Create.FragmentShader("shadow","scripts/jahova/OS/Cores/Graphics/shaders/shadow.fs");Win=i.windows.WindowsManager.Create.Window("Dynamic Shadows","PC");Win.Set.position(0,0);Win.elements.content.html().style.overflow="hidden";Win.Set.statusbarText("");Win.Display.window();Win.Set.width(200);Win.Set.height(60);Win.Set.onMax(i.graphics.OnReset);Win.Set.onMin(i.graphics.Pause);terrain=i.graphics.Managers.Entity.Create();terrain.Graphics.Add.Mesh("quad");terrain.Graphics.Set.light(false);terrain.Graphics.Set.useBlendColor(true);terrain.Graphics.Set.texture(false);terrain.Graphics.Set.blendColor([.17,.26,.4]);terrain.Set.Scale(2e3,2e3,2e3);terrain.pitch=90;terrain.Set.Position(0,1999,0);i.graphics.AddToWorld(terrain);starhawk=i.graphics.Managers.Entity.Create();starhawk.Graphics.Add.Mesh("starhawk");starhawk.Graphics.Add.Texture("starhawk");starhawk.Graphics.Vectors.Scale.set([.5,.5,.5]);starhawk.Set.Position(0,250,500);starhawk.Graphics.Update=function(e){starhawk.roll+=.05*e;starhawk.pitch+=.05*e;Win.Set.statusbarText("FPS: "+(1/e*1e3).toFixed(3))};var t=i.graphics.Managers.Shader.Create.Program("shadow","shadow","shadow");t.CreateAttribute("aVertexPosition");t.CreateUniform("uPMatrix");t.CreateUniform("uVMatrix");t.CreateUniform("uWMatrix");t.CreateUniform("uLight");var n=starhawk.Graphics.Add.Shader("shadow","shadow");n.AddAttribute("aVertexPosition","FLOAT",null,"VERTEX",null);n.AddUniform("uPMatrix","4X4",i.graphics.Matrix.Projection);n.AddUniform("uVMatrix","4X4",i.graphics.Matrix.View);n.AddUniform("uWMatrix","4X4",starhawk.Graphics.Matrix.World);n.AddUniform("uLight","VEC3",[0,1e3,500]);i.graphics.AddToUpdate(starhawk);ShadowDraw=function(){starhawk.Graphics.Draw("default");starhawk.Graphics.Draw("shadow")};i.graphics.Set.Callback.Draw(ShadowDraw);i.graphics.Managers.Camera.MoveUp(150);i.graphics.Managers.Camera.Rotation.pitch=5;Input={Mouse:{lastX:0,lastY:0,pressed:false}};onKeyDown=function(e){if(String.fromCharCode(e.keyCode)=="W"){i.graphics.Managers.Camera.MoveForward(10)}else if(String.fromCharCode(e.keyCode)=="S"){i.graphics.Managers.Camera.MoveBackward(10)}else if(String.fromCharCode(e.keyCode)=="A"){i.graphics.Managers.Camera.MoveLeft(10)}else if(String.fromCharCode(e.keyCode)=="D"){i.graphics.Managers.Camera.MoveRight(10)}else if(String.fromCharCode(e.keyCode)=="Q"){i.graphics.Managers.Camera.MoveUp(5)}else if(String.fromCharCode(e.keyCode)=="E"){i.graphics.Managers.Camera.MoveDown(10)}};onMouseDown=function(e){Input.Mouse.lastX=e.clientX;Input.Mouse.lastY=e.clientY;Input.Mouse.pressed=true};onMouseUp=function(e){Input.Mouse.pressed=false};onMouseMove=function(e){if(!Input.Mouse.pressed){return}var t=i.graphics.Managers.Camera;var n=e.clientX;var r=e.clientY;var s=n-Input.Mouse.lastX;t.Rotation.yaw+=s/10;if(t.Rotation.yaw>360){t.Rotation.yaw-=360}else if(t.Rotation.yaw<0){t.Rotation.yaw+=360}var o=r-Input.Mouse.lastY;t.Rotation.pitch+=o/10;if(t.Rotation.pitch>360){t.Rotation.pitch-=360}else if(t.Rotation.pitch<0){t.Rotation.pitch+=360}Input.Mouse.lastX=n;Input.Mouse.lastY=r};window.addEventListener("keydown",onKeyDown,false);i.graphics.Get.Canvas().addEventListener("mousedown",onMouseDown,false);document.addEventListener("mouseup",onMouseUp,false);document.addEventListener("mousemove",onMouseMove,false);i.graphics.Start()},CubeMap:function(){var e=i.resschmgr.Create.HTMLElement("canvas");e.html().style.width="100%";e.html().style.height="100%";document.body.appendChild(e.html());document.body.style.overflow="hidden";i.graphics.Load(false,false,e.html());Win=i.windows.WindowsManager.Create.Window("Cube Map","PC");Win.Set.position(0,0);Win.elements.content.html().style.overflow="hidden";Win.Set.statusbarText("");Win.Display.window();Win.Set.width(100);Win.Set.height(60);Win.Set.onMax(i.graphics.OnReset);Win.Set.onMin(i.graphics.Pause);var t=i.graphics.Managers.Texture.Create.CubeMap("arch");t.Load.positiveX("images/textures/cubemaps/arch/arch_positive_x.jpg");t.Load.negativeX("images/textures/cubemaps/arch/arch_negative_x.jpg");t.Load.positiveY("images/textures/cubemaps/arch/arch_positive_y.jpg");t.Load.negativeY("images/textures/cubemaps/arch/arch_negative_y.jpg");t.Load.positiveZ("images/textures/cubemaps/arch/arch_positive_z.jpg");t.Load.negativeZ("images/textures/cubemaps/arch/arch_negative_z.jpg");var n=i.graphics.Managers.Texture.Create.CubeMap("brightday");n.Load.positiveX("images/textures/cubemaps/brightday/brightday2_positive_x.png");n.Load.negativeX("images/textures/cubemaps/brightday/brightday2_negative_x.png");n.Load.positiveY("images/textures/cubemaps/brightday/brightday2_positive_y.png");n.Load.negativeY("images/textures/cubemaps/brightday/brightday2_negative_y.png");n.Load.positiveZ("images/textures/cubemaps/brightday/brightday2_positive_z.png");n.Load.negativeZ("images/textures/cubemaps/brightday/brightday2_negative_z.png");var r=i.graphics.Managers.Texture.Create.CubeMap("grandcanyon");r.Load.positiveX("images/textures/cubemaps/grandcanyon/grandcanyon_positive_x.jpg");r.Load.negativeX("images/textures/cubemaps/grandcanyon/grandcanyon_negative_x.jpg");r.Load.positiveY("images/textures/cubemaps/grandcanyon/grandcanyon_positive_y.jpg");r.Load.negativeY("images/textures/cubemaps/grandcanyon/grandcanyon_negative_y.jpg");r.Load.positiveZ("images/textures/cubemaps/grandcanyon/grandcanyon_positive_z.jpg");r.Load.negativeZ("images/textures/cubemaps/grandcanyon/grandcanyon_negative_z.jpg");var s=i.graphics.Managers.Texture.Create.CubeMap("hills");s.Load.positiveX("images/textures/cubemaps/hills/hills_positive_x.png");s.Load.negativeX("images/textures/cubemaps/hills/hills_negative_x.png");s.Load.positiveY("images/textures/cubemaps/hills/hills_positive_y.png");s.Load.negativeY("images/textures/cubemaps/hills/hills_negative_y.png");s.Load.positiveZ("images/textures/cubemaps/hills/hills_positive_z.png");s.Load.negativeZ("images/textures/cubemaps/hills/hills_negative_z.png");var o=i.graphics.Managers.Texture.Create.CubeMap("mars");o.Load.positiveX("images/textures/cubemaps/mars/mars_positive_x.jpg");o.Load.negativeX("images/textures/cubemaps/mars/mars_negative_x.jpg");o.Load.positiveY("images/textures/cubemaps/mars/mars_positive_y.jpg");o.Load.negativeY("images/textures/cubemaps/mars/mars_negative_y.jpg");o.Load.positiveZ("images/textures/cubemaps/mars/mars_positive_z.jpg");o.Load.negativeZ("images/textures/cubemaps/mars/mars_negative_z.jpg");var u=i.graphics.Managers.Texture.Create.CubeMap("museum");u.Load.positiveX("images/textures/cubemaps/museum/museum_positive_x.png");u.Load.negativeX("images/textures/cubemaps/museum/museum_negative_x.png");u.Load.positiveY("images/textures/cubemaps/museum/museum_positive_y.png");u.Load.negativeY("images/textures/cubemaps/museum/museum_negative_y.png");u.Load.positiveZ("images/textures/cubemaps/museum/museum_positive_z.png");u.Load.negativeZ("images/textures/cubemaps/museum/museum_negative_z.png");var a=i.graphics.Managers.Texture.Create.CubeMap("snow");a.Load.positiveX("images/textures/cubemaps/snow/snow_positive_x.jpg");a.Load.negativeX("images/textures/cubemaps/snow/snow_negative_x.jpg");a.Load.positiveY("images/textures/cubemaps/snow/snow_positive_y.jpg");a.Load.negativeY("images/textures/cubemaps/snow/snow_negative_y.jpg");a.Load.positiveZ("images/textures/cubemaps/snow/snow_positive_z.jpg");a.Load.negativeZ("images/textures/cubemaps/snow/snow_negative_z.jpg");var f=i.graphics.Managers.Texture.Create.CubeMap("space");f.Load.positiveX("images/textures/cubemaps/space/space_positive_x.png");f.Load.negativeX("images/textures/cubemaps/space/space_negative_x.png");f.Load.positiveY("images/textures/cubemaps/space/space_positive_y.png");f.Load.negativeY("images/textures/cubemaps/space/space_negative_y.png");f.Load.positiveZ("images/textures/cubemaps/space/space_positive_z.png");f.Load.negativeZ("images/textures/cubemaps/space/space_negative_z.png");var l=i.graphics.Managers.Texture.Create.CubeMap("terrain");l.Load.positiveX("images/textures/cubemaps/terrain/terrain_positive_x.png");l.Load.negativeX("images/textures/cubemaps/terrain/terrain_negative_x.png");l.Load.positiveY("images/textures/cubemaps/terrain/terrain_positive_y.png");l.Load.negativeY("images/textures/cubemaps/terrain/terrain_negative_y.png");l.Load.positiveZ("images/textures/cubemaps/terrain/terrain_positive_z.png");l.Load.negativeZ("images/textures/cubemaps/terrain/terrain_negative_z.png");i.graphics.Managers.Texture.Create.Texture("scorpion","scripts/jahova/OS/Cores/Graphics/textures/scorpion.jpg");i.graphics.Managers.Mesh.Create.Mesh("scorpion","scripts/jahova/OS/Cores/Graphics/meshes/scorpion.json");ent=i.graphics.Managers.Entity.Create();ent.Graphics.Add.Mesh("scorpion");ent.Graphics.Add.Texture("scorpion");ent.Graphics.Vectors.Scale.set([.1,.1,.1]);ent.Graphics.Update=function(e){Win.Set.statusbarText("FPS: "+(1/e*1e3).toFixed(3))};i.graphics.AddToWorld(ent);i.graphics.Managers.Shader.Create.VertexShader("skybox","scripts/jahova/OS/Cores/Graphics/shaders/skybox.vs");i.graphics.Managers.Shader.Create.FragmentShader("skybox","scripts/jahova/OS/Cores/Graphics/shaders/skybox.fs");var c=i.graphics.Managers.Shader.Create.Program("skybox","skybox","skybox");c.CreateAttribute("aVertexPosition");c.CreateAttribute("aVertexNormal");c.CreateUniform("uPMatrix");c.CreateUniform("uVMatrix");c.CreateUniform("uWMatrix");c.CreateUniform("uNMatrix");c.CreateUniform("uSampler");skybox=i.graphics.Managers.Entity.Create("skybox");var h=skybox.Graphics.Add.Shader("skybox","skybox");h.AddAttribute("aVertexPosition","FLOAT",null,"VERTEX",null);h.AddAttribute("aVertexNormal","FLOAT",null,"NORMAL",null);h.AddUniform("uPMatrix","4X4",i.graphics.Matrix.Projection);h.AddUniform("uVMatrix","4X4",i.graphics.Matrix.View);h.AddUniform("uWMatrix","4X4",skybox.Graphics.Matrix.World);h.AddUniform("uNMatrix","3X3",skybox.Graphics.Matrix.Normal);var p=i.graphics.Managers.Mesh.Create.Primitive.Cube("skybox");p.model.vertexTextureCoords=null;p.Initialize();skybox.Graphics.Add.Mesh("skybox");skybox.Graphics.Add.Texture("space");skybox.Set.Scale(5e3,5e3,5e3);skybox.Attach=function(e){skybox.attachedEntity=e;if(e){skybox.attached=true}else skybox.atached=false};skybox.attached=false;skybox.attachedEntity=null;skybox.Attach(i.graphics.Managers.Camera);skybox.Graphics.Update=function(e){if(skybox.attached){vec3.set(skybox.attachedEntity.Position,skybox.Position)}}.bind(skybox);i.graphics.AddToWorld(skybox);Input={Mouse:{lastX:0,lastY:0,pressed:false}};onKeyDown=function(e){if(String.fromCharCode(e.keyCode)=="W"){i.graphics.Managers.Camera.MoveForward(10)}else if(String.fromCharCode(e.keyCode)=="S"){i.graphics.Managers.Camera.MoveBackward(10)}else if(String.fromCharCode(e.keyCode)=="A"){i.graphics.Managers.Camera.MoveLeft(10)}else if(String.fromCharCode(e.keyCode)=="D"){i.graphics.Managers.Camera.MoveRight(10)}else if(String.fromCharCode(e.keyCode)=="Q"){i.graphics.Managers.Camera.MoveUp(5)}else if(String.fromCharCode(e.keyCode)=="E"){i.graphics.Managers.Camera.MoveDown(10)}else if(String.fromCharCode(e.keyCode)=="1"){skybox.Graphics.Texture.removeAll();skybox.Graphics.Add.Texture("arch");skybox.Set.Scale(5e3,5e3,5e3)}else if(String.fromCharCode(e.keyCode)=="2"){skybox.Graphics.Texture.removeAll();skybox.Graphics.Add.Texture("brightday");skybox.Set.Scale(5e3,5e3,5e3)}else if(String.fromCharCode(e.keyCode)=="3"){skybox.Graphics.Texture.removeAll();skybox.Graphics.Add.Texture("grandcanyon");skybox.Set.Scale(5e3,5e3,5e3)}else if(String.fromCharCode(e.keyCode)=="4"){skybox.Graphics.Texture.removeAll();skybox.Graphics.Add.Texture("hills");skybox.Set.Scale(5e3,5e3,5e3)}else if(String.fromCharCode(e.keyCode)=="5"){skybox.Graphics.Texture.removeAll();skybox.Graphics.Add.Texture("mars");skybox.Set.Scale(5e3,5e3,5e3)}else if(String.fromCharCode(e.keyCode)=="6"){skybox.Graphics.Texture.removeAll();skybox.Graphics.Add.Texture("museum");skybox.Set.Scale(5e3,5e3,5e3)}else if(String.fromCharCode(e.keyCode)=="7"){skybox.Graphics.Texture.removeAll();skybox.Graphics.Add.Texture("snow");skybox.Set.Scale(5e3,5e3,5e3)}else if(String.fromCharCode(e.keyCode)=="8"){skybox.Graphics.Texture.removeAll();skybox.Graphics.Add.Texture("space");skybox.Set.Scale(5e3,5e3,5e3)}else if(String.fromCharCode(e.keyCode)=="9"){skybox.Graphics.Texture.removeAll();skybox.Graphics.Add.Texture("terrain");skybox.Set.Scale(5e3,5e3,5e3)}};onMouseDown=function(e){Input.Mouse.lastX=e.clientX;Input.Mouse.lastY=e.clientY;Input.Mouse.pressed=true};onMouseUp=function(e){Input.Mouse.pressed=false};onMouseMove=function(e){if(!Input.Mouse.pressed){return}var t=i.graphics.Managers.Camera;var n=e.clientX;var r=e.clientY;var s=n-Input.Mouse.lastX;t.Rotation.yaw+=s/10;if(t.Rotation.yaw>360){t.Rotation.yaw-=360}else if(t.Rotation.yaw<0){t.Rotation.yaw+=360}var o=r-Input.Mouse.lastY;t.Rotation.pitch+=o/10;if(t.Rotation.pitch>360){t.Rotation.pitch-=360}else if(t.Rotation.pitch<0){t.Rotation.pitch+=360}Input.Mouse.lastX=n;Input.Mouse.lastY=r};window.addEventListener("keydown",onKeyDown,false);i.graphics.Get.Canvas().addEventListener("mousedown",onMouseDown,false);document.addEventListener("mouseup",onMouseUp,false);document.addEventListener("mousemove",onMouseMove,false);i.graphics.Start()},JOSS:function(){server=i.network.Create.JOSServer("demo.jahovaos.com","8081","");server.Events.onMessage=function(e){i.windows.Create.ErrorWindow("JOS Server Message","Messabe Received: <br/>"+"UserID: "+e.UserID+" <br/>"+"SessionID: "+e.SessionID+" <br/>"+"ModuleID: "+e.ModuleID+" <br/>"+"Data Type: "+e.Data.Type+" <br/>"+"Data Args: "+e.Data.Args+" <br/>"+"Func ID: "+e.FunctionID+" <br/>")};server.Connect()},AudioAdd:function(){i.audio.Add("battle","scripts/Applications/Audio/BattleTheme",true,false)},AudioPlay:function(){i.audio.Play("battle");i.audio.Set.Volume("battle",1)},AudioPause:function(){i.audio.Pause("battle")},Collision:function(){i.graphics.Load(false,true);var e=i.graphics.Managers.Mesh.Create.Primitive.Quad("quad");e.Initialize();var t=i.graphics.Managers.Mesh.Create.Primitive.Cube("cube");t.Initialize();var n=i.graphics.Managers.Mesh.Create.Primitive.Sphere("sphere");n.Initialize();Win=i.windows.WindowsManager.Create.Window("Collision Detection","PC");Win.Set.position(0,0);Win.elements.content.html().style.overflow="hidden";Win.Set.statusbarText("");Win.Display.window();Win.Set.width(200);Win.Set.height(60);Win.Hide.menubar();Win.Set.onMax(i.graphics.OnReset);Win.Set.onMin(i.graphics.Pause);var r=i.graphics.Managers.Entity.Create();r.Graphics.Add.Mesh("quad");r.Graphics.Set.light(false);r.Graphics.Set.useBlendColor(true);r.Graphics.Set.texture(false);r.Graphics.Set.blendColor([.17,.26,.4]);r.Set.Scale(2e3,2e3,1);r.pitch=90;r.Set.Position(0,0,0);r.Graphics.Set.fog(true);r.Graphics.Set.fogEndPosition(1e3);r.Graphics.Set.fogBeginPosition(200);i.graphics.AddToWorld(r);var s=[.57,.26,.4];var o=[.17,.26,.8];box=i.graphics.Managers.Entity.Create();box.Graphics.Add.Mesh("cube");box.Set.Position(-1,0,0);box.Set.Scale(1.01,1.01,1.01);box.Graphics.Set.useBlendColor(true);box.Graphics.Set.texture(false);box.Graphics.Set.blendColor(o);sphere=i.graphics.Managers.Entity.Create();sphere.Graphics.Add.Mesh("sphere");sphere.Set.Position(1,0,0);sphere.Set.Scale(.05,.05,.05);sphere.Graphics.Set.useBlendColor(true);sphere.Graphics.Set.texture(false);sphere.Graphics.Set.blendColor(o);var u=0;var a=0;var f=function(e){a+=i.graphics.Time.dt;u++;if(a>1e3){a=a/1e3;Win.Set.statusbarText("FPS: "+(u/a).toFixed(3));a=0;u=0}if(obj1.physics.bv.CollisionTest(obj2.physics.bv)){obj1.graphics.Graphics.Set.blendColor(s);obj2.graphics.Graphics.Set.blendColor(s)}else{obj1.graphics.Graphics.Set.blendColor(o);obj2.graphics.Graphics.Set.blendColor(o)}};var l=function(){obj1.graphics.Physics=obj1.physics;obj1.graphics.Graphics.Draw();obj2.graphics.Physics=obj2.physics;obj2.graphics.Graphics.Draw()};i.graphics.Set.Callback.Draw(l);i.graphics.Set.Callback.Update(f);i.graphics.Managers.Camera.Position[0]=0;i.graphics.Managers.Camera.Position[1]=5;i.graphics.Managers.Camera.Position[2]=-25;i.graphics.Managers.Camera.Rotation.pitch=5;var c=i.physics.Create.Entity(.1);c.Add.InertialTensor(i.physics.Create.InertialTensor.Cube(c,1,1,1));c.position[0]=-1;c.position[1]=0;c.position[2]=0;c.CalculateDerivedData();c.bv=i.physics.Create.BV.OBB(c,[1,1,1]);var h=i.physics.Create.Entity(.1);h.Add.InertialTensor(i.physics.Create.InertialTensor.Cube(h,1,1,1));h.position[0]=-1;h.position[1]=0;h.position[2]=0;h.CalculateDerivedData();h.bv=i.physics.Create.BV.OBB(h,[1,1,1]);var p=i.physics.Create.Entity(.1);p.Add.InertialTensor(i.physics.Create.InertialTensor.SphereSolid(p,1,1,1));p.position[0]=1;p.position[1]=0;p.position[2]=0;p.CalculateDerivedData();p.bv=i.physics.Create.BV.Sphere(p,1);var d=i.physics.Create.Entity(.1);d.Add.InertialTensor(i.physics.Create.InertialTensor.SphereSolid(d,1,1,1));d.position[0]=1;d.position[1]=0;d.position[2]=0;d.CalculateDerivedData();d.bv=i.physics.Create.BV.Sphere(d,1);obj1={graphics:sphere,physics:p};obj2={graphics:sphere,physics:d};Win.elements.content.html().innerHTML="Press 1-4";Input={Mouse:{lastX:0,lastY:0,pressed:false}};onKeyDown=function(e){if(String.fromCharCode(e.keyCode)=="W"){obj1.physics.position[2]+=.1}else if(String.fromCharCode(e.keyCode)=="S"){obj1.physics.position[2]-=.1}else if(String.fromCharCode(e.keyCode)=="A"){obj1.physics.position[0]-=.1}else if(String.fromCharCode(e.keyCode)=="D"){obj1.physics.position[0]+=.1}else if(String.fromCharCode(e.keyCode)=="Q"){obj1.physics.position[1]+=.1}else if(String.fromCharCode(e.keyCode)=="E"){obj1.physics.position[1]-=.1}else if(String.fromCharCode(e.keyCode)=="R"){obj1.physics.position[0]=-1;obj1.physics.position[1]=0;obj1.physics.position[2]=0}else if(String.fromCharCode(e.keyCode)=="1"){Win.elements.content.html().innerHTML="Sphere-Sphere";obj1.graphics=sphere;obj1.physics=p;obj2.graphics=sphere;obj2.physics=d;obj1.physics.position[0]=-1;obj1.physics.position[1]=0;obj1.physics.position[2]=0;obj2.physics.position[0]=1;obj2.physics.position[1]=0;obj2.physics.position[2]=0}else if(String.fromCharCode(e.keyCode)=="2"){Win.elements.content.html().innerHTML="Sphere-OBB";obj1.graphics=sphere;obj1.physics=p;obj2.graphics=box;obj2.physics=h;obj2.graphics.yaw=0;obj2.graphics.pitch=0;v(obj2);obj1.physics.position[0]=-1;obj1.physics.position[1]=0;obj1.physics.position[2]=0;obj2.physics.position[0]=1;obj2.physics.position[1]=0;obj2.physics.position[2]=0}else if(String.fromCharCode(e.keyCode)=="3"){Win.elements.content.html().innerHTML="OBB-Sphere";obj1.graphics=box;obj1.physics=c;obj2.graphics=sphere;obj2.physics=d;obj1.physics.position[0]=-1;obj1.physics.position[1]=0;obj1.physics.position[2]=0;obj1.graphics.yaw=0;obj1.graphics.pitch=0;v(obj1);obj2.physics.position[0]=1;obj2.physics.position[1]=0;obj2.physics.position[2]=0}else if(String.fromCharCode(e.keyCode)=="4"){Win.elements.content.html().innerHTML="OBB-OBB";obj1.graphics=box;obj1.physics=c;obj2.graphics=box;obj2.physics=h;obj1.physics.position[0]=-1;obj1.physics.position[1]=0;obj1.physics.position[2]=0;obj1.graphics.yaw=0;obj1.graphics.pitch=0;v(obj1);obj2.physics.position[0]=1;obj2.physics.position[1]=0;obj2.physics.position[2]=0;obj2.graphics.yaw=0;obj2.graphics.pitch=0;v(obj2)}else if(String.fromCharCode(e.keyCode)=="5"){Win.elements.content.html().innerHTML="OBB-OBB";obj1.graphics=box;obj1.physics=c;obj2.graphics=box;obj2.physics=h;obj1.physics.position[0]=-1;obj1.physics.position[1]=0;obj1.physics.position[2]=0;obj1.graphics.yaw=-45;obj1.graphics.pitch=45;v(obj1);obj2.physics.position[0]=1;obj2.physics.position[1]=0;obj2.physics.position[2]=0;obj2.graphics.yaw=0;obj2.graphics.pitch=0;v(obj2)}else if(String.fromCharCode(e.keyCode)=="6"){Win.elements.content.html().innerHTML="Sphere-OBB";obj1.graphics=sphere;obj1.physics=p;obj2.graphics=box;obj2.physics=h;obj2.graphics.yaw=-45;obj2.graphics.pitch=0;v(obj2);obj1.physics.position[0]=-1;obj1.physics.position[1]=0;obj1.physics.position[2]=0;obj2.physics.position[0]=1;obj2.physics.position[1]=0;obj2.physics.position[2]=0}};onMouseDown=function(e){Input.Mouse.lastX=e.clientX;Input.Mouse.lastY=e.clientY;Input.Mouse.pressed=true};onMouseUp=function(e){Input.Mouse.pressed=false};onMouseMove=function(e){if(!Input.Mouse.pressed){return}var t=i.graphics.Managers.Camera;var n=e.clientX;var r=e.clientY;var s=n-Input.Mouse.lastX;obj1.graphics.yaw+=s/10;if(obj1.graphics.yaw>360){obj1.graphics.yaw-=360}else if(obj1.graphics.yaw<0){obj1.graphics.yaw+=360}var o=r-Input.Mouse.lastY;obj1.graphics.pitch+=o/10;if(obj1.graphics.pitch>360){obj1.graphics.pitch-=360}else if(obj1.graphics.pitch<0){obj1.graphics.pitch+=360}v(obj1);Input.Mouse.lastX=n;Input.Mouse.lastY=r};var v=function(e){var t=Math.cos(degToRad(e.graphics.pitch/2));var n=Math.sin(degToRad(e.graphics.pitch/2));var r=Math.cos(degToRad(e.graphics.yaw/2));var i=Math.sin(degToRad(e.graphics.yaw/2));var s=Math.cos(degToRad(e.graphics.roll/2));var o=Math.sin(degToRad(e.graphics.roll/2));var u=[];var a=[n,0,0,t];var f=[0,i,0,r];var l=[0,0,o,s];quat4.multiply(l,f,u);quat4.multiply(u,a,u);quat4.normalize(u,u);u[3]*=-1;quat4.set(u,e.physics.orientation)};window.addEventListener("keydown",onKeyDown,false);i.graphics.Get.Canvas().addEventListener("mousedown",onMouseDown,false);document.addEventListener("mouseup",onMouseUp,false);document.addEventListener("mousemove",onMouseMove,false);i.graphics.Start()},Physics:function(){var e=i.resschmgr.Create.HTMLElement("canvas");e.html().style.width="100%";e.html().style.height="100%";document.body.appendChild(e.html());document.body.style.overflow="hidden";i.graphics.Load(false,false,e.html());i.graphics.Managers.Texture.Create.Texture("scorpion","scripts/jahova/OS/Cores/Graphics/textures/starhawk.jpg");i.graphics.Managers.Mesh.Create.Mesh("scorpion","scripts/jahova/OS/Cores/Graphics/meshes/starhawk.json");i.graphics.Managers.Texture.Create.Texture("crate","scripts/jahova/OS/Cores/Graphics/textures/crate.jpg");var t=i.graphics.Managers.Mesh.Create.Primitive.Quad("quad");t.Initialize();var n=i.graphics.Managers.Mesh.Create.Primitive.Cube("cube");n.Initialize();Win=i.windows.WindowsManager.Create.Window("Physics Demo","PC");Win.Set.position(0,0);Win.elements.content.html().style.overflow="hidden";Win.Set.statusbarText("");Win.Display.window();Win.Set.width(200);Win.Set.height(60);Win.Set.onMax(i.graphics.OnReset);Win.Set.onMin(i.graphics.Pause);var r=i.graphics.Managers.Entity.Create();r.Graphics.Add.Mesh("quad");r.Graphics.Set.light(false);r.Graphics.Set.useBlendColor(true);r.Graphics.Set.texture(false);r.Graphics.Set.blendColor([.17,.26,.4]);r.Set.Scale(2e3,2e3,1);r.pitch=90;r.Set.Position(0,0,0);r.Graphics.Set.fog(true);r.Graphics.Set.fogEndPosition(1e3);r.Graphics.Set.fogBeginPosition(200);i.graphics.AddToWorld(r);var s=i.graphics.Managers.Entity.Create();s.Graphics.Add.Mesh("scorpion");s.Graphics.Add.Texture("scorpion");s.Set.Scale(.02,.02,.02);s.Set.Position(0,0,0);s.Graphics.Set.texture(true);i.graphics.AddToWorld(s);var o=i.graphics.Managers.Entity.Create();o.Graphics.Add.Mesh("cube");o.Graphics.Add.Texture("crate");o.Set.Position(0,0,0);o.Graphics.Set.useBlendColor(true);o.Graphics.Set.texture(false);o.Graphics.Set.blendColor([.57,.26,.4]);i.graphics.AddToWorld(o);var u=i.graphics.Managers.Entity.Create();u.Graphics.Add.Mesh("cube");u.Graphics.Add.Texture("crate");u.Set.Position(0,0,0);u.Graphics.Set.useBlendColor(true);u.Graphics.Set.texture(false);u.Graphics.Set.blendColor([.17,.66,.4]);i.graphics.AddToWorld(u);var a=i.graphics.Managers.Entity.Create();a.Graphics.Add.Mesh("cube");a.Graphics.Add.Texture("crate");a.Set.Position(0,0,0);a.Graphics.Set.useBlendColor(true);a.Graphics.Set.texture(false);a.Graphics.Set.blendColor([.57,.26,.8]);i.graphics.AddToWorld(a);var f=i.graphics.Managers.Entity.Create();f.Graphics.Add.Mesh("cube");f.Graphics.Add.Texture("crate");f.Set.Position(0,0,0);f.Set.Scale(.1,.1,.1);i.graphics.AddToWorld(f);time=0;var l=[0,0,-70];PhysicsUpdate=function(e){Win.Set.statusbarText("FPS: "+(1/e*1e3).toFixed(3));time+=.016;i.physics.Update.All(.033)};PhysicsDraw=function(){};i.graphics.Set.Callback.Update(PhysicsUpdate);i.graphics.Managers.Camera.Position[0]=0;i.graphics.Managers.Camera.Position[1]=15;i.graphics.Managers.Camera.Position[2]=-85;i.graphics.Managers.Camera.Rotation.pitch=5;var c=i.physics.Create.Entity(.1);var h=i.physics.Create.Entity(.1);var p=i.physics.Create.Entity(.1);var d=i.physics.Create.Entity(.1);s.Physics=c;c.linearDampening=.95;c.angularDampening=.9;c.position[0]=10;c.position[1]=0;c.position[2]=-30;c.Add.InertialTensor(i.physics.Create.InertialTensor.Cube(c,20,20,20));c.CalculateDerivedData();o.Physics=h;h.linearDampening=.99;h.angularDampening=.99;h.position[0]=-10;h.position[1]=0;h.position[2]=-30;h.Add.InertialTensor(i.physics.Create.InertialTensor.Cube(h,2,2,2));h.CalculateDerivedData();u.Physics=p;p.linearDampening=.99;p.angularDampening=.99;p.position[0]=5;p.position[1]=0;p.position[2]=-30;p.Add.InertialTensor(i.physics.Create.InertialTensor.Cube(p,2,2,2));p.CalculateDerivedData();a.Physics=d;d.linearDampening=.99;d.angularDampening=.95;d.position[0]=0;d.position[1]=0;d.position[2]=-30;d.Add.InertialTensor(i.physics.Create.InertialTensor.Cube(d,2,2,2));d.CalculateDerivedData();var v=i.physics.Create.Force.Spring(c,.25,20,l,[0,0,0]);var m=i.physics.Create.Force.Spring(h,2,20,[0,0,0],[0,0,0]);var g=i.physics.Create.Force.Spring(p,2,20,[0,0,0],[0,0,0]);var y=i.physics.Create.Force.Spring(d,2,20,[0,0,0],[0,0,0]);Input={Mouse:{lastX:0,lastY:0,pressed:false}};onKeyDown=function(e){if(String.fromCharCode(e.keyCode)=="W"){i.graphics.Managers.Camera.MoveForward(1)}else if(String.fromCharCode(e.keyCode)=="S"){i.graphics.Managers.Camera.MoveBackward(1)}else if(String.fromCharCode(e.keyCode)=="A"){i.graphics.Managers.Camera.MoveLeft(1)}else if(String.fromCharCode(e.keyCode)=="D"){i.graphics.Managers.Camera.MoveRight(1)}else if(String.fromCharCode(e.keyCode)=="Q"){i.graphics.Managers.Camera.MoveUp(1)}else if(String.fromCharCode(e.keyCode)=="E"){i.graphics.Managers.Camera.MoveDown(1)}else if(String.fromCharCode(e.keyCode)=="R"){c.inverseMass=3;c.position[0]=50;c.position[0]=0;c.position[0]=0;h.inverseMass=3;h.position[0]=-50;h.position[0]=0;h.position[0]=0}else if(String.fromCharCode(e.keyCode)=="T"){c.inverseMass=5;c.position[0]=50;c.position[0]=0;c.position[0]=0;h.inverseMass=5;h.position[0]=-50;h.position[0]=0;h.position[0]=0}else if(String.fromCharCode(e.keyCode)=="Y"){v.springConstant++;m.springConstant++}else if(String.fromCharCode(e.keyCode)=="H"){v.springConstant--;m.springConstant--}else if(String.fromCharCode(e.keyCode)=="U"){h.PrintRot()}if(String.fromCharCode(e.keyCode)=="I"){i.physics.Create.Force.Impulse(h,[0,0,0],[0,0,100])}if(String.fromCharCode(e.keyCode)=="K"){i.physics.Create.Force.Impulse(h,[0,0,0],[0,0,-100])}if(String.fromCharCode(e.keyCode)=="J"){i.physics.Create.Force.Impulse(h,[-10,0,0],[0,0,100])}if(String.fromCharCode(e.keyCode)=="L"){i.physics.Create.Force.Impulse(h,[10,0,0],[0,0,100])}};onMouseDown=function(e){Input.Mouse.lastX=e.clientX;Input.Mouse.lastY=e.clientY;Input.Mouse.pressed=true};onMouseUp=function(e){Input.Mouse.pressed=false};onMouseMove=function(e){if(!Input.Mouse.pressed){return}var t=i.graphics.Managers.Camera;var n=e.clientX;var r=e.clientY;var s=n-Input.Mouse.lastX;t.Rotation.yaw+=s/10;if(t.Rotation.yaw>360){t.Rotation.yaw-=360}else if(t.Rotation.yaw<0){t.Rotation.yaw+=360}var o=r-Input.Mouse.lastY;t.Rotation.pitch+=o/10;if(t.Rotation.pitch>360){t.Rotation.pitch-=360}else if(t.Rotation.pitch<0){t.Rotation.pitch+=360}Input.Mouse.lastX=n;Input.Mouse.lastY=r};window.addEventListener("keydown",onKeyDown,false);i.graphics.Get.Canvas().addEventListener("mousedown",onMouseDown,false);document.addEventListener("mouseup",onMouseUp,false);document.addEventListener("mousemove",onMouseMove,false);i.graphics.Start()},AddCommand:function(e,t,n,r){this.Commands.put(e.toUpperCase(),i.resschmgr.Create.Command(e,t,n,r))},RemoveCommand:function(e){this.Commands.remove(e.toUpperCase())},GetCommand:function(e){return this.Commands.get(e.toUpperCase())},DisplayCommands:function(){for(var e=0;e++<this.Commands.size;this.Commands.next()){i.console.AppendComment("Command: "+this.Commands.value().name);i.console.AppendComment("Description:");i.console.AppendComment(this.Commands.value().help);i.console.AppendComment("")}},log:function(e){},AppendComment:function(e){o.cmdWindow.value+="\n"+e;o.cmdWindow.scrollTop=o.cmdWindow.scrollHeight},Comment:function(e){o.cmdWindow.value+=e+"\n"+s;o.cmdWindow.scrollTop=o.cmdWindow.scrollHeight},Warning:function(e){o.cmdWindow.value+="\n~WARNING~ "+e+"\n"+s;o.cmdWindow.scrollTop=o.cmdWindow.scrollHeight},Error:function(e){o.cmdWindow.value+="\n~ERROR~ "+e+"\n"+s;o.cmdWindow.scrollTop=o.cmdWindow.scrollHeight},Clear:function(){o.cmdWindow.value=s;o.cmdWindow.scrollTop=o.cmdWindow.scrollHeight},EvaluateInput:function(e){var t=e.keyCode?e.keyCode:e.charCode;if(t==13){e.preventDefault();lastIndex=i.console.cmdWindow.value.lastIndexOf(s);lastInput=i.console.cmdWindow.value.substring(lastIndex+s.length);cmdIndex=lastInput.indexOf(" ");cmdString=cmdIndex>0?lastInput.substring(0,cmdIndex).toUpperCase():lastInput.toUpperCase();cmd=i.console.Commands.get(cmdString);if(cmd){cmd.Execute(lastInput.substring(cmdIndex+1))}else{o.AppendComment("Command: "+cmdString+"\nNot Found, type help to get a list of loaded commands")}o.Comment("");i.console.length=0}else if(t==38){if(cmd){o.cmdWindow.value+=lastInput;o.cmdWindow.scrollTop=o.cmdWindow.scrollHeight}}else if(t==8){if(i.console.length>0)i.console.length--;else{e.preventDefault()}}else if(t>31){i.console.length++}},ProcessInputString:function(){lastIndex=i.console.cmdWindow.value.lastIndexOf(s);lastInput=i.console.cmdWindow.value.substring(lastIndex+s.length);cmdIndex=lastInput.indexOf(" ");cmdString=cmdIndex>0?lastInput.substring(0,cmdIndex).toUpperCase():lastInput.toUpperCase();cmd=i.console.Commands.get(cmdString);if(cmd){cmd.Execute(lastInput.substring(cmdIndex+1))}else{o.AppendComment("Command: "+cmdString+"\nNot Found, type help to get a list of loaded commands")}o.Comment("");i.console.length=0}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.utilities.Instance().Timer=function(){function t(){var e="JaHOVA Utilities : Timer Module";var t="0v3";var n="scripts/jahova/Utilities/Console/jahova.utilities.timer.js";var r=com.jahova.os.Instance();var i=this;var s=null;var o=null;var u=null;var a=false;var f=new Date;var l=r.resschmgr.Create.Map();var c=function(e,t){this.name=e;this.time=t};return{log:null,Initialize:function(){i=this;this.log=[];u=0},Start:function(){a=true;return s=(new Date).getTime()},Stop:function(){var e=(new Date).getTime();a=false;return o+=e-s},Lap:function(e){var t=(new Date).getTime();if(a){o+=t-s;var n=o-u;u+=n;var r=new c(e,n);this.log.push(r);l.put(e,r);s=(new Date).getTime();return n}return null},Reset:function(){s=0;o=0;u=0;this.log=[];l.removeAll()},GetElapsedTime:function(){var e=(new Date).getTime();if(a){o+=e-s;s=e}return o},GetName:function(){return e},GetLap:function(e){return l.get(e)},RemoveLap:function(e){l.remove(e)},GetVersion:function(){return t},GetPath:function(){return n}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.utilities.Instance().DebugBar=function(){function t(){var e="JaHOVA Utilities : Debug Bar";var t="0v5";var n="scripts/jahova/Utilities/DebugBar/jahova.utilities.debugbar.js";var r=true;var i=com.jahova.os.Instance();var s=i.debugbar;var o="~JaHOVA OS >>";return{ConsolePagePinned:false,LogsPagePinned:false,SettingsPagePinned:false,GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetStatus:function(){return r},Enable:function(){r=true;i.Elements.DebugBar.style.display="block"},Disable:function(){r=false;i.Elements.DebugBar.style.display="none"},Initialize:function(){window.onkeydown=i.debugbar.EvaluateShortCuts;i.debugbar.Build()},Build:function(){i.Elements.DebugBar=document.createElement("div");i.Elements.DebugBar.id="com.jahova.debugBar";i.Elements.DebugBar.className="ideSidebar appBaseColor";document.body.appendChild(i.Elements.DebugBar);i.Elements.DebugBarConsoleTab=document.createElement("div");i.Elements.DebugBarConsoleTab.id="com.jahova.debugBar.Console.Tab";i.Elements.DebugBarConsoleTab.className="ideSidebarTabFolderView jahova_borRadR2 sidebarTabColor";i.Elements.DebugBar.appendChild(i.Elements.DebugBarConsoleTab);i.Elements.DebugBarConsoleTabLabel=document.createElement("div");i.Elements.DebugBarConsoleTabLabel.id="com.jahova.debugBar.Console.Tab.Label";i.Elements.DebugBarConsoleTabLabel.className="ideSidebarTabTextFolderView textColorWhite";i.Elements.DebugBarConsoleTabLabel.innerHTML="Console";i.Elements.DebugBarConsoleTab.appendChild(i.Elements.DebugBarConsoleTabLabel);i.Elements.DebugBarConsole=document.createElement("div");i.Elements.DebugBarConsole.id="com.jahova.debugBar.Console.Wrapper";i.Elements.DebugBarConsole.className="ideSidebarPageFolderView sidebarTabColor jahova_borRadL2 jahova_borRadB2 jahova_transWp5s";i.Elements.DebugBarConsoleTab.appendChild(i.Elements.DebugBarConsole);i.Elements.DebugBarConsoleHeader=document.createElement("div");i.Elements.DebugBarConsoleHeader.id="com.jahova.debugBar.Console.Header";i.Elements.DebugBarConsoleHeader.className="ideSidebarFolderHeader jahova_borRadT2 menuColor";i.Elements.DebugBarConsole.appendChild(i.Elements.DebugBarConsoleHeader);i.Elements.DebugBarConsoleHeaderLabel=document.createElement("div");i.Elements.DebugBarConsoleHeaderLabel.id="com.jahova.debugBar.Console.Header.Label";i.Elements.DebugBarConsoleHeaderLabel.className="ideSidebarFolderH3";i.Elements.DebugBarConsoleHeaderLabel.innerHTML="Terminal Window";i.Elements.DebugBarConsoleHeader.appendChild(i.Elements.DebugBarConsoleHeaderLabel);i.Elements.DebugBarConsoleHeaderPin=document.createElement("div");i.Elements.DebugBarConsoleHeaderPin.id="com.jahova.debugBar.Console.Header.Pin";i.Elements.DebugBarConsoleHeaderPin.className="ideSidebarPin";i.Elements.DebugBarConsoleHeaderPin.onclick=this.AnchorPage;i.Elements.DebugBarConsoleHeader.appendChild(i.Elements.DebugBarConsoleHeaderPin);i.Elements.DebugBarConsoleIconHeader=document.createElement("div");i.Elements.DebugBarConsoleIconHeader.id="com.jahova.debugBar.Console.Icons";i.Elements.DebugBarConsoleIconHeader.className="ideSidebarFolderIconHeader iconColor";i.Elements.DebugBarConsole.appendChild(i.Elements.DebugBarConsoleIconHeader);i.Elements.DebugBarConsoleContent=document.createElement("div");i.Elements.DebugBarConsoleContent.id="com.jahova.debugBar.Console.Content";i.Elements.DebugBarConsoleContent.className="ideSidebarFolderContent jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarConsole.appendChild(i.Elements.DebugBarConsoleContent);i.console.cmdWindow.style.border="0px";i.console.cmdWindow.style.height="503px";i.Elements.DebugBarConsoleContent.appendChild(i.console.cmdWindow);i.Elements.DebugBarLogTab=document.createElement("div");i.Elements.DebugBarLogTab.id="com.jahova.debugBar.Log.Tab";i.Elements.DebugBarLogTab.className="ideSidebarTabFolderView jahova_borRadR2 sidebarTabColor";i.Elements.DebugBar.appendChild(i.Elements.DebugBarLogTab);i.Elements.DebugBarLogTabLabel=document.createElement("div");i.Elements.DebugBarLogTabLabel.id="com.jahova.debugBar.Log.TabLabel";i.Elements.DebugBarLogTabLabel.className="ideSidebarTabTextFolderView textColorWhite";i.Elements.DebugBarLogTabLabel.innerHTML="Logs";i.Elements.DebugBarLogTab.appendChild(i.Elements.DebugBarLogTabLabel);i.Elements.DebugBarLog=document.createElement("div");i.Elements.DebugBarLog.id="com.jahova.debugBar.Log.Wrapper";i.Elements.DebugBarLog.className="ideSidebarPageFolderView sidebarTabColor jahova_borRadL2 jahova_borRadB2 jahova_transWp5s";i.Elements.DebugBarLogTab.appendChild(i.Elements.DebugBarLog);i.Elements.DebugBarLogHeader=document.createElement("div");i.Elements.DebugBarLogHeader.id="com.jahova.debugBar.Log.Header";i.Elements.DebugBarLogHeader.className="ideSidebarFolderHeader jahova_borRadT2 menuColor";i.Elements.DebugBarLog.appendChild(i.Elements.DebugBarLogHeader);i.Elements.DebugBarLogHeaderLabel=document.createElement("div");i.Elements.DebugBarLogHeaderLabel.id="com.jahova.debugBar.Log.Header.Label";i.Elements.DebugBarLogHeaderLabel.className="ideSidebarFolderH3";i.Elements.DebugBarLogHeaderLabel.innerHTML="JaHOVA Logs";i.Elements.DebugBarLogHeader.appendChild(i.Elements.DebugBarLogHeaderLabel);i.Elements.DebugBarLogHeaderPin=document.createElement("div");i.Elements.DebugBarLogHeaderPin.id="com.jahova.debugBar.Log.Header.Pin";i.Elements.DebugBarLogHeaderPin.className="ideSidebarPin";i.Elements.DebugBarLogHeaderPin.onclick=this.AnchorPage;i.Elements.DebugBarLogHeader.appendChild(i.Elements.DebugBarLogHeaderPin);i.Elements.DebugBarLogIconHeader=document.createElement("div");i.Elements.DebugBarLogIconHeader.id="com.jahova.debugBar.Log.Icons";i.Elements.DebugBarLogIconHeader.className="ideSidebarFolderIconHeader iconColor";i.Elements.DebugBarLog.appendChild(i.Elements.DebugBarLogIconHeader);i.Elements.DebugBarLogContent=document.createElement("pre");i.Elements.DebugBarLogContent.id="com.jahova.debugBar.Log.Content";i.Elements.DebugBarLogContent.className="ideSidebarFolderContent jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarLog.appendChild(i.Elements.DebugBarLogContent);i.Elements.DebugBarSettingsTab=document.createElement("div");i.Elements.DebugBarSettingsTab.id="com.jahova.debugBar.Settings.Tab";i.Elements.DebugBarSettingsTab.className="ideSidebarTabFolderView jahova_borRadR2 sidebarTabColor";i.Elements.DebugBar.appendChild(i.Elements.DebugBarSettingsTab);i.Elements.DebugBarSettingsTabLabel=document.createElement("div");i.Elements.DebugBarSettingsTabLabel.id="com.jahova.debugBar.Settings.TabLabel";i.Elements.DebugBarSettingsTabLabel.className="ideSidebarTabTextFolderView textColorWhite";i.Elements.DebugBarSettingsTabLabel.innerHTML="Settings";i.Elements.DebugBarSettingsTab.appendChild(i.Elements.DebugBarSettingsTabLabel);i.Elements.DebugBarSettings=document.createElement("div");i.Elements.DebugBarSettings.id="com.jahova.debugBar.Settings.Wrapper";i.Elements.DebugBarSettings.className="ideSidebarPageFolderView sidebarTabColor jahova_borRadL2 jahova_borRadB2 jahova_transWp5s";i.Elements.DebugBarSettingsTab.appendChild(i.Elements.DebugBarSettings);i.Elements.DebugBarSettingsHeader=document.createElement("div");i.Elements.DebugBarSettingsHeader.id="com.jahova.debugBar.Settings.Header";i.Elements.DebugBarSettingsHeader.className="ideSidebarFolderHeader jahova_borRadT2 menuColor";i.Elements.DebugBarSettings.appendChild(i.Elements.DebugBarSettingsHeader);i.Elements.DebugBarSettingsHeaderLabel=document.createElement("div");i.Elements.DebugBarSettingsHeaderLabel.id="com.jahova.debugBar.Settings.Header.Label";i.Elements.DebugBarSettingsHeaderLabel.className="ideSidebarFolderH3";i.Elements.DebugBarSettingsHeaderLabel.innerHTML="JaHOVA Settings";i.Elements.DebugBarSettingsHeader.appendChild(i.Elements.DebugBarSettingsHeaderLabel);i.Elements.DebugBarSettingsHeaderPin=document.createElement("div");i.Elements.DebugBarSettingsHeaderPin.id="com.jahova.debugBar.Settings.Header.Pin";i.Elements.DebugBarSettingsHeaderPin.className="ideSidebarPin";i.Elements.DebugBarSettingsHeaderPin.onclick=this.AnchorPage;i.Elements.DebugBarSettingsHeader.appendChild(i.Elements.DebugBarSettingsHeaderPin);i.Elements.DebugBarSettingsIconHeader=document.createElement("div");i.Elements.DebugBarSettingsIconHeader.id="com.jahova.debugBar.Settings.Icons";i.Elements.DebugBarSettingsIconHeader.className="ideSidebarFolderIconHeader iconColor";i.Elements.DebugBarSettings.appendChild(i.Elements.DebugBarSettingsIconHeader);i.Elements.DebugBarSettingsContent=document.createElement("div");i.Elements.DebugBarSettingsContent.id="com.jahova.debugBar.Settings.Content";i.Elements.DebugBarSettingsContent.className="ideSidebarFolderContent jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarSettings.appendChild(i.Elements.DebugBarSettingsContent)},AnchorPage:function(e){var t="com.jahova.debugBar.";var n=e.target.id;n=n.substring(t.length);n=n.substring(0,n.indexOf("."));if(n.toUpperCase()=="CONSOLE"){i.debugbar.AnchorConsolePage(e)}else if(n.toUpperCase()=="LOG"){i.debugbar.AnchorLogsPage(e)}else if(n.toUpperCase()=="SETTINGS"){i.debugbar.AnchorSettingsPage(e)}},AnchorConsole:function(){if(this.ConsolePagePinned==false){this.ConsolePagePinned=true;i.Elements.DebugBarConsole.className="ideSidebarPageFolderViewPinned sidebarTabColor jahova_borRadL2 jahova_borRadB2";i.Elements.DebugBarConsole.style.width="560px";i.Elements.DebugBarConsoleHeaderPin.className="ideSidebarPinned";i.Elements.DebugBarConsoleHeaderLabel.className="ideSidebarFolderH3Pinned";i.Elements.DebugBarConsoleContent.className="ideSidebarFolderContentPinned jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarConsoleHeaderLabel.innerHTML="Terminal Window"}else{i.Elements.DebugBarConsole.className="ideSidebarPageFolderView sidebarTabColor jahova_borRadL2 jahova_borRadB2 jahova_transWp5s";i.Elements.DebugBarConsole.style.width="";i.Elements.DebugBarConsoleHeaderPin.className="ideSidebarPin";i.Elements.DebugBarConsoleHeaderLabel.className="ideSidebarFolderH3";i.Elements.DebugBarConsoleContent.className="ideSidebarFolderContent jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarConsoleHeaderLabel.innerHTML="Terminal Window";this.ConsolePagePinned=false}},AnchorSettings:function(){if(this.SettingsPagePinned==true){i.Elements.DebugBarSettings.className="ideSidebarPageFolderView sidebarTabColor jahova_borRadL2 jahova_borRadB2 jahova_transWp5s";i.Elements.DebugBarSettingsHeaderPin.className="ideSidebarPin";i.Elements.DebugBarSettingsHeaderLabel.className="ideSidebarFolderH3";i.Elements.DebugBarSettingsContent.className="ideSidebarFolderContent jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarSettingsHeaderLabel.innerHTML="JaHOVA Settings";this.SettingsPagePinned=false}else{i.Elements.DebugBarSettings.className="ideSidebarPageFolderViewPinned sidebarTabColor jahova_borRadL2 jahova_borRadB2";i.Elements.DebugBarSettingsHeaderPin.className="ideSidebarPinned";i.Elements.DebugBarSettingsHeaderLabel.className="ideSidebarFolderH3Pinned";i.Elements.DebugBarSettingsContent.className="ideSidebarFolderContentPinned jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarSettingsHeaderLabel.innerHTML="JaHOVA Settings";this.SettingsPagePinned=true}},AnchorConsolePage:function(e){if(e.target.classList[0]=="ideSidebarPinned"){i.Elements.DebugBarConsole.className="ideSidebarPageFolderView sidebarTabColor jahova_borRadL2 jahova_borRadB2 jahova_transWp5s";i.Elements.DebugBarConsole.style.width="";i.Elements.DebugBarConsoleHeaderPin.className="ideSidebarPin";i.Elements.DebugBarConsoleHeaderLabel.className="ideSidebarFolderH3";i.Elements.DebugBarConsoleContent.className="ideSidebarFolderContent jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarConsoleHeaderLabel.innerHTML="Terminal Window";this.ConsolePagePinned=false}else{i.Elements.DebugBarConsole.className="ideSidebarPageFolderViewPinned sidebarTabColor jahova_borRadL2 jahova_borRadB2";i.Elements.DebugBarConsole.style.width="560px";i.Elements.DebugBarConsoleHeaderPin.className="ideSidebarPinned";i.Elements.DebugBarConsoleHeaderLabel.className="ideSidebarFolderH3Pinned";i.Elements.DebugBarConsoleContent.className="ideSidebarFolderContentPinned jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarConsoleHeaderLabel.innerHTML="Terminal Window";this.ConsolePagePinned=true}},AnchorLogsPage:function(e){if(e.target.classList[0]=="ideSidebarPinned"){i.Elements.DebugBarLog.className="ideSidebarPageFolderView sidebarTabColor jahova_borRadL2 jahova_borRadB2 jahova_transWp5s";i.Elements.DebugBarLogHeaderPin.className="ideSidebarPin";i.Elements.DebugBarLogHeaderLabel.className="ideSidebarFolderH3";i.Elements.DebugBarLogContent.className="ideSidebarFolderContent jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarLogHeaderLabel.innerHTML="JaHOVA Logs";this.LogsPagePinned=false}else{i.Elements.DebugBarLog.className="ideSidebarPageFolderViewPinned sidebarTabColor jahova_borRadL2 jahova_borRadB2";i.Elements.DebugBarLogHeaderPin.className="ideSidebarPinned";i.Elements.DebugBarLogHeaderLabel.className="ideSidebarFolderH3Pinned";i.Elements.DebugBarLogContent.className="ideSidebarFolderContentPinned jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarLogHeaderLabel.innerHTML="JaHOVA Logs";this.LogsPagePinned=true}},AnchorSettingsPage:function(e){if(e.target.classList[0]=="ideSidebarPinned"){i.Elements.DebugBarSettings.className="ideSidebarPageFolderView sidebarTabColor jahova_borRadL2 jahova_borRadB2 jahova_transWp5s";i.Elements.DebugBarSettingsHeaderPin.className="ideSidebarPin";i.Elements.DebugBarSettingsHeaderLabel.className="ideSidebarFolderH3";i.Elements.DebugBarSettingsContent.className="ideSidebarFolderContent jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarSettingsHeaderLabel.innerHTML="JaHOVA Settings";this.SettingsPagePinned=false}else{i.Elements.DebugBarSettings.className="ideSidebarPageFolderViewPinned sidebarTabColor jahova_borRadL2 jahova_borRadB2";i.Elements.DebugBarSettingsHeaderPin.className="ideSidebarPinned";i.Elements.DebugBarSettingsHeaderLabel.className="ideSidebarFolderH3Pinned";i.Elements.DebugBarSettingsContent.className="ideSidebarFolderContentPinned jahova_borRadB2 viewContentBkgColor";i.Elements.DebugBarSettingsHeaderLabel.innerHTML="JaHOVA Settings";this.SettingsPagePinned=true}},EvaluateShortCuts:function(e){var t=e.keyCode?e.keyCode:e.charCode;if(e.ctrlKey){if(t==192){if(i.debugbar.GetStatus()){i.debugbar.Disable()}else{i.debugbar.Enable()}}}}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Kernel=function(){function t(){var e="JaHOVA OS Kernel";var t="0v3";var n="scripts/jahova/OS/Kernel/jahova.os.kernel.js";var r=com.jahova.os.Instance();var i=null;var s=null;var o=null;return{GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},Initialize:function(){i=r.Kernel.Instance();s=com.jahova.utilities.Instance();o=s.Console.Instance();debug=s.DebugBar.Instance();if(document.getElementById("com.jahova")){r.Elements.JaHOVA=document.getElementById("com.jahova");r.Elements.JaHOVA.className="mainContent appBaseColor"}else{}},Command:null,ResSchMgr:null,Instruction:null}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Kernel.Instance().Command=function(){function t(){var e="JaHOVA OS Kernel : Command Module";var t="0v3";var n="scripts/jahova/OS/Kernel/jahova.os.kernel.command.js";var r=com.jahova.os.Instance();var i=com.jahova.utilities.Instance().Console.Instance();return{Core:null,GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},Interface:null,Initialize:function(){r.console.AppendComment("Initializing Command Module\n");r.command.Interface=r.resschmgr.Create.Map();var e=r.resschmgr.CoreManager.RegisterResource("com.jahova.os.kernel.command",r.command.GetPath(),false);r.command.Core=r.resschmgr.CoreManager.GetCoreByID(e);r.command.Core.OnRequest=r.command.OnRequest;r.resschmgr.CoreManager.ActivateResource(e);r.command.Interface.put("GetResources",r.command.GetResources);r.command.Interface.put("Display",r.command.Display)},OnRequest:function(e){var t=e.jahovaos;var n=t.length;for(var i=0;i<n;i++){if(t[i].InterfaceName!=null){r.command.Interface.get(t[i].InterfaceName)(t[i])}else{r.command.Interface.get(t[i].InterfaceID)(t[i])}}},Display:function(e){var t=(new Date).getTime();i.AppendComment("Kernel::Command Module:: Request Received");i.AppendComment("Current Time: "+t);i.AppendComment("Transit Time: "+(t-e.SendTime)+"ms");i.AppendComment("     Sender ID:       "+e.SenderID);i.AppendComment("     Receiver ID:     "+e.ReceiverID);i.AppendComment("     Data:         "+e.Data);i.AppendComment("     Priority:        "+e.Priority);i.AppendComment("     Interface ID:    "+e.InterfaceID);i.AppendComment("     Interface Name:  "+e.InterfaceName);i.AppendComment("     Send Time:       "+e.SendTime);i.AppendComment("     Delivery Time:   "+e.DeliveryTime);i.AppendComment("     Call Back Func:  "+e.CallBackFunction);i.AppendComment("     Call Back ID:    "+e.CallBackInterfaceID);i.Comment("")},GetResources:function(e){var t=r.resschmgr.CoreManager.GetAllResources();var n=[];var i=t.length;for(var s=0;s<i;s++){n.push({id:t[s].GetID(),name:t[s].name,path:t[s].path})}var o=(new Date).getTime();var u=r.resschmgr.Create.Instruction();u.SenderID=r.command.Core.GetID();u.ReceiverID=e.SenderID;u.Data=n;u.Priority=e.Priority;u.InterfaceID=e.CallBackInterfaceID;u.InterfaceName=e.CallBackFunction;u.SendTime=o;u.DeliveryTime=o;u.CallBackInterfaceID=e.CallBackInterfaceID;var a=[];a.push(u);var f=r.resschmgr.CoreManager.GetCoreByID(u.ReceiverID);var l=r.resschmgr.EventManager.GetEventObjectByName(f.name);var c=l.GetEventsByName("onRequest")[0];r.command.Core.SendRequest.apply(c,[a])}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Kernel.Instance().ResSchMgr=function(){function t(){var e="JaHOVA OS Kernel : Resource and Schedule Manager Module";var t="0v5";var n="scripts/jahova/OS/Kernel/jahova.os.kernel.resschmgr.js";var r=null;var i=com.jahova.os.Instance();var s=com.jahova.utilities.Instance();var o=function(){var e=false;try{e=new XMLHttpRequest}catch(t){var n=["MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var r=0;r<n.length;++r){try{e=new ActiveXObject(n[r])}catch(t){continue}break}}finally{return e}};var u=function(e){var t=e;var n;this.os=com.jahova.os.Instance();this.utilities=com.jahova.utilities.Instance();this.name=null;this.osName=null;this.path=null;this.threadSafe=null;this.SendRequest=null;this.Dispatcher=null;this.OnRequest=null;this.Interface=this.os.resschmgr.Create.Map();this.SetID=function(e){t=e};this.GetID=function(){return t};this.SetState=function(e){n=e};this.GetState=function(){return n}};var a=function(e,t,n,r,i,s,o){this.os=com.jahova.os.Instance();this.utilities=com.jahova.utilities.Instance();this.scope=this;this.id=e;this.target=t;this.name=n;this.eventType=r;this.custom=i;this.can_bubble=false;this.cancelable=false;this.event;this.nextID=0;this.Subscribers=this.os.resschmgr.Create.Map();this.Name2ID=this.os.resschmgr.Create.Map();if(this.custom){if(document.createEvent){if(window.Worker&&this.target instanceof Worker){this.event=document.createEvent("MessageEvent")}else{this.event=document.createEvent("MouseEvents");this.event.initMouseEvent("click",false,true,window,0,0,0,0,0,false,false,false,false,0,null)}}else{if(this.target.constructor!=Worker){this.event=document.createEventObject()}else{}}}else{if(document.createEvent){if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){this.event=document.createEvent(this.eventType);this.event.initEvent(this.name,this.can_bubble,this.cancelable)}else{this.event=document.createEvent(this.eventType);this.event.initMouseEvent(this.name,this.can_bubble,this.cancelable,window,0,0,0,0,0,false,false,false,false,0,null)}}else{this.event=document.createEventObject()}}};a.prototype.Subscribe=function(e,t,n,r){this.nextID++;var i=this.nextID;var s=new this.os.resschmgr.Create.Subscriber(e,i,t,n,r);this.Subscribers.put(i,s);this.Name2ID.put(e,i);if(this.custom){if(window.Worker&&this.target instanceof Worker){if(this.target.attachEvent!=undefined){this.target.attachEvent("onmessage",n)}else{this.target.addEventListener("message",n,r)}}else{if(this.target.attachEvent!=undefined){this.target.attachEvent("onclick",n)}else{this.target.addEventListener("click",n,r)}}}else{if(this.target.attachEvent!=undefined){this.target.attachEvent("on"+this.name,n)}else{this.target.addEventListener(this.name,n,r)}}return s};a.prototype.Unsubscribe=function(e){var t=this.Subscribers.get(e);if(this.custom){if(this.target.detachEvent!=undefined){this.target.detachEvent("onclick",t.callback)}else{this.target.removeEventListener("click",t.callback,false)}}else{if(this.target.detachEvent!=undefined){this.target.detachEvent("on"+this.name,t.callback)}else{this.target.removeEventListener(this.name,t.callback,t.capture)}}Name2ID.remove(t.name);Subscribers.remove(e)};a.prototype.RemoveAllSubscribers=function(){for(var e=0;e++<this.Subscribers.size;this.Subscribers.next()){this.Unsubscribe(Subscribers.value().id)}};a.prototype.Dispatch=function(e){if(this.custom){this.event.jahovaos=e;if(document.createEvent){if(window.Worker&&this.target instanceof Worker){return this.target.postMessage(e)}else{return this.target.dispatchEvent(this.event)}}else{return this.target.fireEvent("onclick",this.event)}}else{if(document.createEvent){return this.target.dispatchEvent(this.event)}else{return this.target.fireEvent("on"+this.name,this.event)}}};a.prototype.GetSubscriberByID=function(e){return this.Subscribers.get(e)};a.prototype.GetSubscribersByName=function(e){var t=false;for(var n=0;n++<this.Subscribers.size;this.Subscribers.next()){if(this.Subscribers.value().name==e){if(!t){t=[]}t.push(this.Subscribers.value())}}return t};a.prototype.GetSubscriberID=function(e){return this.Subscribers.get(this.Name2ID.get(e))};var f=function(e,t,n,r){this.os=com.jahova.os.Instance();this.utilities=com.jahova.utilities.Instance();this.id=e;this.name=t;this.target;this.targetID=r;this.custom=n;this.nextID=0;this.PublishedEvents=this.os.resschmgr.Create.Map();this.Name2ID=this.os.resschmgr.Create.Map();if(this.custom){if(isNaN(this.targetID)){this.target=new Worker(this.targetID)}else{this.target=document.createElement("a");this.target.name=this.name;this.target.id=this.targetID;document.body.appendChild(this.target)}}else{this.target=document.getElementById(this.targetID)}};f.prototype.PublishEvent=function(e,t,n,r){this.nextID++;var i=this.nextID;var s=this.os.resschmgr.Create.Event(i,this.target,e,t,this.custom,n,r);this.PublishedEvents.put(i,s);this.Name2ID.put(e,i);return s};f.prototype.UnpublishEvent=function(e){var t=this.PublishedEvents.get(e);t.RemoveAllSubscribers();this.Name2ID.remove(t.name);this.PublishedEvents.remove(e)};f.prototype.UnpublishAllEvents=function(){for(var e=0;e++<this.PublishedEvents.size;this.PublishedEvents.next()){var t=this.PublishedEvents.value();t.RemoveAllSubscribers()}};f.prototype.GetEventByID=function(e){return this.PublishedEvents.get(e)};f.prototype.GetEventsByName=function(e){var t=false;for(var n=0;n++<this.PublishedEvents.size;this.PublishedEvents.next()){if(this.PublishedEvents.value().name==e){if(!t){t=[]}t.push(this.PublishedEvents.value())}}return t};f.prototype.GetEventID=function(e){return this.PublishedEvents.get(this.Name2ID.get(e))};var l=function(e,t,n,r,i){this.name=e;this.id=t;this.eventName=n;this.callback=r;this.capture=i};var c=function(){this.SenderID=null;this.ReceiverID=null;this.Data=null;this.Priority=null;this.InterfaceID=null;this.InterfaceName=null;this.SendTime=null;this.DeliveryTime=null;this.CallBackFunction=null;this.CallBackInterfaceID=null};var h=function(e,t,n,r){this.name=e;this.callback=t;this.scope=n;this.help=r};h.prototype.Execute=function(){this.callback.apply(this.scope,arguments)};var p=function(e){this.current=undefined;this.size=0;this.isLinked=true;if(e===false){this.disableLinking()}this.from=function(e,t,n){var r=new Map(n);for(var i in e){if(t||e.hasOwnProperty(i))r.put(i,e[i])}return r};this.noop=function(){return this};this.illegal=function(){throw new Error("can't do this with unlinked maps")};this.reverseIndexTableFrom=function(e,t){var n=new Map(t);for(var r=0,i=e.length;r<i;++r){var s=e[r],o=n.get(s);if(o)o.push(r);else n.put(s,[r])}return n};this.cross=function(e,t,n,r){var i,s;if(e.isLinked){i=e;s=t}else if(t.isLinked){i=t;s=e}else Map.illegal();for(var o=i.size;o--;i.next()){var u=i.key();if(s.contains(u))n.call(r,u,e.get(u),t.get(u))}return r};this.uniqueArray=function(e){var t=new Map;for(var n=0,r=e.length;n<r;++n)t.put(e[n]);return t.listKeys()}};p.prototype.disableLinking=function(){this.isLinked=false;this.link=Map.noop;this.unlink=Map.noop;this.disableLinking=Map.noop;this.next=Map.illegal;this.key=Map.illegal;this.value=Map.illegal;this.removeAll=Map.illegal;this.each=Map.illegal;this.flip=Map.illegal;this.drop=Map.illegal;this.listKeys=Map.illegal;this.listValues=Map.illegal;return this};p.prototype.hash=function(e){return e instanceof Object?e.__hash||(e.__hash="object "+ ++arguments.callee.current):typeof e+" "+String(e)};p.prototype.hash.current=0;p.prototype.link=function(e){if(this.size===0){e.prev=e;e.next=e;this.current=e}else{e.prev=this.current.prev;e.prev.next=e;e.next=this.current;this.current.prev=e}};p.prototype.unlink=function(e){if(this.size===0)this.current=undefined;else{e.prev.next=e.next;e.next.prev=e.prev;if(e===this.current)this.current=e.next}};p.prototype.get=function(e){var t=this[this.hash(e)];return typeof t==="undefined"?undefined:t.value};p.prototype.put=function(e,t){var n=this.hash(e);if(this.hasOwnProperty(n))this[n].value=t;else{var r={key:e,value:t};this[n]=r;this.link(r);++this.size}return this};p.prototype.remove=function(e){var t=this.hash(e);if(this.hasOwnProperty(t)){--this.size;this.unlink(this[t]);delete this[t]}return this};p.prototype.removeAll=function(){while(this.size)this.remove(this.key());return this};p.prototype.contains=function(e){return this.hasOwnProperty(this.hash(e))};p.prototype.isUndefined=function(e){var t=this.hash(e);return this.hasOwnProperty(t)?typeof this[t]==="undefined":false};p.prototype.next=function(){this.current=this.current.next};p.prototype.key=function(){return this.current.key};p.prototype.value=function(){return this.current.value};p.prototype.each=function(e,t){if(typeof t==="undefined")t=this;for(var n=this.size;n--;this.next()){var r=e.call(t,this.key(),this.value(),n>0);if(typeof r==="number")n+=r}return this};p.prototype.flip=function(e){var t=new Map(e);for(var n=this.size;n--;this.next()){var r=this.value(),i=t.get(r);if(i)i.push(this.key());else t.put(r,[this.key()])}return t};p.prototype.drop=function(e,t){if(typeof t==="undefined")t=this;for(var n=this.size;n--;){if(e.call(t,this.key(),this.value())){this.remove(this.key());--n}else this.next()}return this};p.prototype.listValues=function(){var e=[];for(var t=this.size;t--;this.next())e.push(this.value());return e};p.prototype.listKeys=function(){var e=[];for(var t=this.size;t--;this.next())e.push(this.key());return e};p.prototype.toString=function(){function t(t,n,r){e+="    { "+this.hash(t)+" : "+n+" }"+(r?",":"")+"\n"}var e="[object Map";if(this.isLinked&&this.size){e+="\n";this.each(t)}e+="]";return e};var d=function(){this.q=[]};d.prototype.push=function(e){this.q.push(e)};d.prototype.pop=function(){return this.q.splice(0,1)};d.prototype.push_front=function(e){this.q.unshift(e)};d.prototype.push_back=function(e){this.q.push(e)};d.prototype.pop_front=function(){return this.q.splice(0,1)};d.prototype.pop_back=function(){return this.q.pop()};d.prototype.length=function(){return this.q.length};d.prototype.toString=function(){return this.q.toString()};d.prototype.at=function(e){return this.q[e]};d.prototype.set=function(e,t){this.q[e]=t};d.prototype.find=function(e){var t=false;for(var n=0;n<this.q.length;n++){if(typeof e=="function"){if(e.test(this.q[n])){if(!t){t=[]}t.push(n)}}else{if(this.q[n]===e){if(!t){t=[]}t.push(n)}}}return t};d.prototype.remove=function(e){this.q.splice(e,1)};var v=function(e,t,n,r,s,o){var u=e;var a=t;var f=function(e){if(this.onclose!=null){this.onclose.apply(this.onclosescope,[e])}i.resschmgr.WindowManager.Windows.remove(u);document.body.removeChild(this.Elements.Window)}.bind(this);var l=function(e){if(this.onmin!=null){this.onmin.apply(this.onminscope,[e])}if(!this.isMinimized){this.Elements.Body.style.display="none";this.Elements.Status.style.display="none";this.Elements.Menu.style.display="none";this.Elements.HeaderButtons.style.display="none";this.Elements.Header.style.overflow="hidden";this.Elements.Header.style.resize="none";this.Elements.Header.style.width="100%";this.Elements.Header.style.height="100%";this.Elements.Header.style.borderTopLeftRadius="0px";this.Elements.Header.style.borderTopRightRadius="0px";this.left=this.Elements.Window.style.left;this.top=this.Elements.Window.style.top;this.Elements.Window.className="";this.Elements.Window.style.height="25px";this.Elements.Window.style.width="150px";this.Elements.Window.style.top="";this.Elements.Window.style.left="";this.Elements.Window.style.borderRight="1px solid black";this.Elements.Window.style.position="relative";this.Elements.Window.style.float="left";this.Elements.Window.style.cssFloat="left";this.Elements.Window.style.display="inline-block";if(i.windows.Desktop.Get.state.desktop()=="VISIBLE"){i.windows.Desktop.Elements.dock.AppendChild(this.Elements.Window);this.Elements.Header.onclick=l}this.isMinimized=true;e.stopPropagation()}else{this.Elements.Body.setAttribute("style","");this.Elements.Status.setAttribute("style","");this.Elements.Menu.setAttribute("style","");this.Elements.HeaderButtons.setAttribute("style","");this.Elements.Header.setAttribute("style","");this.Elements.Window.style.position="absolute";this.Elements.Window.style.width=this.width+"px";this.Elements.Window.style.height=this.height+"px";this.Elements.Window.style.top=this.top;this.Elements.Window.style.left=this.left;this.Elements.Window.className="outputWindow";document.body.appendChild(this.Elements.Window);this.Elements.Header.onclick="";this.isMinimized=false;e.stopPropagation()}}.bind(this);var c=function(e){if(this.onmax!=null){this.onmax.apply(this.onmaxscope,[e])}if(!this.isMaximized){this.isMaximized=true;this.left=this.Elements.Window.style.left;this.top=this.Elements.Window.style.top;this.Elements.Window.style.width="100%";this.Elements.Window.style.height=window.innerHeight-46+"px";this.Elements.Window.style.top="20px";this.Elements.Window.style.left="0px";this.Elements.Window.style.border="none";this.makeActive();e.stopPropagation()}else{this.isMaximized=false;this.Elements.Window.style.width=this.width+"px";this.Elements.Window.style.height=this.height+"px";this.Elements.Window.style.top=this.top;this.Elements.Window.style.left=this.left;this.Elements.Window.style.borderRight="";this.Elements.Status.setAttribute("style","");e.stopPropagation()}}.bind(this);this.makeActive=function(e){if(i.resschmgr.WindowManager.ActiveWindow){i.resschmgr.WindowManager.ActiveWindow.Elements.Header.onmousedown=i.resschmgr.WindowManager.ActiveWindow.BeginDrag;i.resschmgr.WindowManager.ActiveWindow.Elements.Window.onclick=i.resschmgr.WindowManager.ActiveWindow.makeActive;i.resschmgr.WindowManager.ActiveWindow.Elements.Window.style.zIndex=20;i.resschmgr.WindowManager.ActiveWindow.Elements.StatusText.innerHTML="Status: Inactive";i.resschmgr.WindowManager.ActiveWindow.Elements.Menu.style.display="none"}this.Elements.Header.onmousedown=this.BeginDrag;this.Elements.Window.onclick="";this.Elements.Window.style.zIndex=25;this.Elements.StatusText.innerHTML="Status: Active";this.Elements.Menu.setAttribute("style","");i.resschmgr.WindowManager.ActiveWindow=this}.bind(this);this.width=n;this.height=r;this.top=s;this.left=o;this.startX=null;this.startY=null;this.startLeft=null;this.startTop=null;this.onclose=null;this.onmin=null;this.onmax=null;this.onfocus=null;this.onclosescope=null;this.onminscope=null;this.onmaxscope=null;this.onfocusscope=null;this.isMinimized=false;this.isMaximized=false;this.Elements={Window:document.createElement("div"),Header:document.createElement("div"),HeaderText:document.createElement("div"),HeaderButtons:document.createElement("div"),Close:document.createElement("div"),Min:document.createElement("div"),Max:document.createElement("div"),Body:document.createElement("div"),Status:document.createElement("div"),StatusText:document.createElement("div"),Menu:document.createElement("div"),File:document.createElement("div"),Edit:document.createElement("div"),View:document.createElement("div")};this.Elements.Window.style.position="absolute";this.Elements.Window.style.width=this.width+"px";this.Elements.Window.style.height=this.height+"px";this.Elements.Window.style.top=this.top+"px";this.Elements.Window.style.left=this.left+"px";this.Elements.Window.className="outputWindow";this.Elements.Window.id=u;this.Elements.Window.name=u;this.Elements.Window.onclick=this.makeActive;this.Elements.Window.onfocus=function(){alert("On Focus")};this.Elements.Window.onblur=function(){alert("On Blur")};this.Elements.Window.onactivate=function(){alert("On Activate")};this.Elements.Header.className="windowTitleBar";this.Elements.Header.id=u;this.Elements.HeaderButtons.className="macButtonsContainer";this.Elements.Close.className="mac_os_x_close";this.Elements.HeaderButtons.appendChild(this.Elements.Close);this.Elements.Min.className="mac_os_x_minimize";this.Elements.HeaderButtons.appendChild(this.Elements.Min);this.Elements.Max.className="mac_os_x_maximize";this.Elements.HeaderButtons.appendChild(this.Elements.Max);this.Elements.Header.appendChild(this.Elements.HeaderButtons);this.Elements.Header.name=u;this.Elements.HeaderText.innerHTML=t;this.Elements.HeaderText.className="windowTitle";this.Elements.HeaderText.name=u;this.Elements.Header.appendChild(this.Elements.HeaderText);this.Elements.Window.appendChild(this.Elements.Header);this.Elements.Close.onclick=f;this.Elements.Min.onclick=l;this.Elements.Max.onclick=c;this.Elements.File.className="windowMenu";this.Elements.File.innerHTML="File";this.Elements.Edit.className="windowMenu";this.Elements.Edit.innerHTML="Edit";this.Elements.View.className="windowMenu";this.Elements.View.innerHTML="View";this.Elements.Menu.className="windowMenuBarMac";this.Elements.Menu.name=u;this.Elements.Menu.appendChild(this.Elements.File);this.Elements.Menu.appendChild(this.Elements.Edit);this.Elements.Menu.appendChild(this.Elements.View);this.Elements.Window.appendChild(this.Elements.Menu);this.Elements.Window.appendChild(this.Elements.Body);this.Elements.Status.className="windowStatusBar";this.Elements.Status.name=u;this.Elements.StatusText.innerHTML="Status: Active";this.Elements.StatusText.className="windowStatus";this.Elements.StatusText.name=u;this.Elements.Status.appendChild(this.Elements.StatusText);this.Elements.Window.appendChild(this.Elements.Status);document.body.appendChild(this.Elements.Window);i.resschmgr.WindowManager.Windows.put(e,this);this.makeActive();return this};v.prototype.BeginDrag=function(e){var t=i.resschmgr.WindowManager.Windows.get(e.target.name);if(t){t.Elements.Window.style.zIndex=21;if(i.resschmgr.WindowManager.ActiveWindow){i.resschmgr.WindowManager.ActiveWindow.Elements.Window.style.zIndex=20}t.makeActive();document.addEventListener("mouseup",t.DragStop,false);document.addEventListener("mousemove",t.DragStart,false);t.startX=e.clientX+window.scrollX;t.startY=e.clientY+window.scrollY;t.startLeft=parseInt(t.Elements.Window.style.left,10);t.startTop=parseInt(t.Elements.Window.style.top,10);if(isNaN(t.startLeft))t.startLeft=0;if(isNaN(t.startTop))t.startTop=0}e.preventDefault()};v.prototype.DragStart=function(e,t){var n=i.resschmgr.WindowManager.ActiveWindow;var r,s;r=e.clientX+window.scrollX;s=e.clientY+window.scrollY;if(n){n.Elements.Window.style.left=n.startLeft+r-n.startX+"px";n.Elements.Window.style.top=n.startTop+s-n.startY+"px"}e.preventDefault()};v.prototype.DragStop=function(e,t){var n=i.resschmgr.WindowManager.ActiveWindow;if(n){document.removeEventListener("mousemove",n.DragStart,false);document.removeEventListener("mouseup",n.DragStop,false)}};v.prototype.Close=function(){i.resschmgr.WindowManager.Windows.remove(r);document.body.removeChild(this.Elements.Window)};v.prototype.Move=function(e,t){this.Elements.Window.style.top=e+"px";this.Elements.Window.style.left=t+"px";this.top=e;this.left=t};v.prototype.Resize=function(e,t){this.Elements.Window.style.width=e+"px";this.Elements.Window.style.height=t+"px";this.width=e;this.height=t};return{CHTMLElement:function(e){var t=null;var n="";this.Class={Add:function(e){n+=e+" ";t.className=n;return n},Remove:function(e){n=n.replace(e,"");return n},ClearAll:function(){n="";t.className=""},Get:function(){return n}};this.AppendToID=function(e){document.getElementById(e).appendChild(t)};this.AppendTo=function(e){e.appendChild(t)};this.AppendChild=function(e){t.appendChild(e)};this.GetHeight=function(){return t.clientHeight};this.SetHTML=function(e){t=document.createElement(e)};this.RemoveAllChildren=function(){if(t.hasChildNodes()){while(t.childNodes.length>=1){t.removeChild(t.firstChild)}}};t=document.createElement(e);this.html=function(){return t};return this},CEntity:function(e){var t=e;this.ID=function(){return t};this.Get={id:function(){return t}.bind(this)};this.Set={};this.Graphics=null;this.AI=null;this.Physics=null},GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r},Initialize:function(){i.console.AppendComment("Initializing Resource and Schedule Manager");i.console.AppendComment("        Initializing Core Manager");this.CoreManager.Initialize();i.console.AppendComment("        Initializing Event Manager");this.EventManager.Initialize();i.console.AppendComment("        Initializing Schedule Manager");this.ScheduleManager.Initialize();i.console.AppendComment("");r=this.CoreManager.RegisterResource("com.jahova.os.kernel.resschmgr",n,false);this.Core=this.CoreManager.Cores.get(r);this.Core.OnRequest=this.OnRequest},Core:null,OnRequest:function(e){var t=e.jahovaos},Create:{XHRObject:function(){return new o},Core:function(e){return new u(e)},Command:function(e,t,n,r){return new h(e,t,n,r)},Event:function(e,t,n,r,i,s,o){return new a(e,t,n,r,i,s,o)},EventObject:function(e,t,n,r){return new f(e,t,n,r)},Subscriber:function(e,t,n,r,i){return new l(e,t,n,r,i)},Instruction:function(){return new c},Map:function(e){return new p(e)},Queue:function(){return new d},Window:function(e,t,n,r,i,s){return new v(e,t,n,r,i,s)},HTMLElement:function(e){return new i.resschmgr.CHTMLElement(e)},Entity:function(e){return new i.resschmgr.CEntity(e)}},WindowManager:{NextID:0,ActiveWindow:null,Windows:new p},CoreManager:{NextID:0,Cores:null,Name2ID:null,GetCoreByID:function(e){return this.Cores.get(e)},GetCoreByName:function(e){return this.Cores.get(this.Name2ID.get(e))},GetAllResources:function(){var e=[];for(var t=0;t++<i.resschmgr.CoreManager.Cores.size;i.resschmgr.CoreManager.Cores.next()){e.push(i.resschmgr.CoreManager.Cores.value())}return e},Initialize:function(){this.Cores=i.resschmgr.Create.Map();this.Name2ID=i.resschmgr.Create.Map()},RegisterResource:function(e,t,n){var r=this.Name2ID.get(e);if(!r){r=this.NextID++;var s=i.resschmgr.Create.Core(r);s.name=e;s.SetID(r);s.osName="com_jahovaos_res_"+e;s.path=t;s.threadSafe=n;this.Cores.put(r,s);this.Name2ID.put(e,r)}else{r=-1}return r},ActivateResource:function(e){var t=this.Cores.get(e);var n;var r;if(window.Worker&&t.threadSafe){n=i.resschmgr.EventManager.PublishThread(t.name,i.GetDomain()+t.path);r=n.PublishEvent("onRequest","message",false,true);r.Subscribe(t.name,"onRequest",i.instruction.AddRequest,false);t.OnRequest=i.instruction.Core.Dispatcher}else{n=i.resschmgr.EventManager.PublishEventObject(t.name,true,t.GetID());r=n.PublishEvent("onRequest","click",false,true);r.Subscribe(t.name,"onRequest",t.OnRequest,false)}t.Dispatcher=r.Dispatch;t.SendRequest=i.instruction.Core.Dispatcher;i.instruction.AddResource(t);t.SetState(2)},ActivateResSchMgrModule:function(){var e=false;i.resschmgr.Core.OnRequest=i.resschmgr.OnRequest;this.ActivateResource(r);if(i.resschmgr.Core.GetState()==2){e=true}return e},ExecuteResource:function(){}},EventManager:{NextID:0,PublishedEventObjects:null,Name2ID:null,Initialize:function(){this.PublishedEventObjects=i.resschmgr.Create.Map();this.Name2ID=i.resschmgr.Create.Map()},PublishEventObject:function(e,t,n){this.NextID++;var r=this.NextID;var s=i.resschmgr.Create.EventObject(r,e,t,n);this.PublishedEventObjects.put(s.id,s);this.Name2ID.put(e,r);return s},PublishThread:function(e,t){return this.PublishEventObject(e,true,t)},UnpublishEventObject:function(e){var t=this.PublishedEventObjects.get(e);t.UnpublishAllEvents();this.Name2ID.remove(t.name);this.PublishedEventObjects.remove(e)},GetEventObjectByID:function(e){return this.PublishedEventObjects.get(e)},GetEventObjectByName:function(e){var t=this.Name2ID.get(e);var n=this.GetEventObjectByID(t);return this.PublishedEventObjects.get(this.Name2ID.get(e))},GetEventObjectID:function(e){return this.GetEventObjectByName(e).id}},ScheduleManager:{NextID:0,Initialize:function(){}}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Kernel.Instance().Instruction=function(){function t(){var e="JaHOVA OS Kernel : Instruction Module";var t="0v3";var n="scripts/jahova/OS/Kernel/jahova.os.kernel.instruction.js";var r=null;var i=com.jahova.os.Instance();var s=com.jahova.utilities.Instance();return{GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r},Core:null,Initialize:function(){i.console.AppendComment("Initializing Instruction Module");i.console.AppendComment("     Initializing Router");this.Router.Initialize();i.console.AppendComment("");r=i.resschmgr.CoreManager.RegisterResource("com.jahova.os.kernel.instruction",n,false);this.Core=i.resschmgr.CoreManager.Cores.get(r);var e=false;this.Core.SetState(1);this.Core.OnRequest=this.AddRequest;i.resschmgr.CoreManager.ActivateResource(this.Core.GetID());if(this.Core.GetState()==2){e=true}var t=false;if(i.resschmgr.Core.GetState()==2){t=true}return e},AddRequest:function(e){if(e instanceof MouseEvent){i.instruction.Router.Process(e.jahovaos)}else if(e.target instanceof Worker){i.instruction.Router.Process(e.data)}else{i.instruction.Router.Process(e)}},AddResource:function(e){if(e.GetID()!=r){this.Router.Cores.put(e.GetID(),{info:e,requests:i.resschmgr.Create.Queue()})}},RemoveResource:function(e){this.Router.Cores.remove(e.GetID())},Router:{Requests:null,Cores:null,Initialize:function(){this.Requests=i.resschmgr.Create.Queue();this.Cores=i.resschmgr.Create.Map()},Process:function(e){var t=e.length;for(var n=0;n<t;n++){var r=e.pop();var i=this.Cores.get(r.ReceiverID);i.requests.push(r)}this.Route()},Route:function(){var e=this.Cores.size;for(var t=0;t++<e;this.Cores.next()){var n=this.Cores.value();if(n.requests.q.length>0){var r=[];var s=n.requests.q.length;for(var o=0;o<s;o++){r.push(n.requests.q[o]);n.requests.remove(o)}var u=i.resschmgr.EventManager.GetEventObjectByName(n.info.name);var a=u.GetEventsByName("onRequest")[0];n.info.Dispatcher.apply(a,[r])}}if(this.Requests.q.length>0){this.Process()}}}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Cores=function(){function t(){var e="JaHOVA OS Internal APIs";var t="0v3";var n="scripts/jahova/OS/Cores/jahova.os.cores.js";var r=null;var i=com.jahova.os.Instance();var s=i.kernel;var o=i.utilities;var u=i.console;return{GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r},Initialize:function(){},Network:null,HTML:null,Threads:null,Database:null,Audio:null,Windows:null,Graphics:null,Physics:null}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Cores.Instance().Network=function(){function t(){var e="JaHOVA OS Internal API : Network Core";var t="0v3";var n="scripts/jahova/OS/Cores/Network/jahova.os.cores.network.js";var r=null;var i=com.jahova.os.Instance();var s=com.jahova.utilities.Instance();var o=function(){this.SenderID;this.ReceiverID;this.Data={Type:null,Args:null,ModuleID:null};this.InterfaceID};var u=function(){this.UserID="";this.SessionID="";this.ModuleID="";this.Data={Type:"",Args:""};this.FunctionID="";this.Parse=function(e){var t="";try{t=JSON.parse(e);this.UserID=t.UserID;this.SessionID=t.SessionID;this.Data=t.Data;this.ModuleID=t.ModuleID;this.FunctionID=t.FunctionID}catch(n){i.windows.Create.ErrorWindow("ERROR: JOS Server","Unable to parse message: <br/>"+e)}};this.Serialize=function(){return JSON.stringify(this)}};var a=function(){var e=function(){i.console.Comment("JaHOVA OS Server: Connection Opened");if(this.Events.onOpen){this.Events.onOpen()}}.bind(this);var t=function(){i.console.Comment("JaHOVA OS Server: Connection Closed");if(this.Events.onClose){this.Events.onClose()}}.bind(this);var n=function(e){var t=new u;t.Parse(e);if(this.Events.onMessage){this.Events.onMessage(t)}if(t.Data.Type=="userID"){this.userID=t.Data.Args[0];this.mainSessionID=t.SessionID;i.console.Comment("JaHOVA OS Server ID Set: "+this.userID)}}.bind(this);var r=function(e){if(this.Events.onError){this.Events.onError(e)}}.bind(this);this.socket=null;this.message=null;this.userID=null;this.mainSessionID=null;this.Events={onOpen:null,onMessage:null,onClose:null,onError:null};this.Connect=function(){this.socket.Events.onOpen=e;this.socket.Events.onMessage=n;this.socket.Events.onClose=t;this.socket.Events.onError=r;this.socket.Open()};this.Send=function(e){this.socket.Send(e.Serialize())};this.Disconnect=function(){var e=new u;e.UserID=this.userID;e.Data.Type="disconnect";this.Send(e)};this.Create={Session:function(e,t,n){var r=new u;r.SessionID=this.mainSessionID;r.UserID=this.userID;r.Data.Type="createSession";r.Data.Args=[e,t,n];r.ModuleID="";this.Send(r)}.bind(this),RegisteredSession:function(e,t){var n=new u;n.SessionID=this.mainSessionID;n.UserID=this.userID;n.Data.Type="createRegisteredSession";n.Data.Args=[e,t];n.ModuleID="";this.Send(n)}.bind(this),Module:function(e,t){var n=new u;n.SessionID="";n.UserID=this.userID;n.Data.Type="createModule";n.Data.Args=[t];n.ModuleID=module;this.Send(n)}.bind(this),Function:function(e,t,n,r){var i=new u;i.SessionID="";i.UserID=this.userID;i.Data.Type="createFunction";i.Data.Args=[e,t,n,r];i.ModuleID=e;this.Send(i)}.bind(this),Message:function(){var e=new u;e.UserID=this.userID;return e}.bind(this)};this.Get={SessionList:function(e){var t=new u;t.SessionID=this.mainSessionID;t.UserID=this.userID;t.Data.Type="getList";t.Data.Args=[e];t.ModuleID="";this.Send(t)}.bind(this),SessionPropertyTypes:function(e){var t=new u;t.SessionID=e;t.UserID=this.userID;t.Data.Type="getSessionProperties";t.Data.Args=[];t.ModuleID="";this.Send(t)}.bind(this),SessionPropertyValues:function(e){var t=new u;t.SessionID=e;t.UserID=this.userID;t.Data.Type="getSessionValues";t.Data.Args=[];t.ModuleID="";this.Send(t)}.bind(this)};this.Set={SessionProperty:function(e,t,n){var r=new u;r.SessionID=e;r.UserID=this.userID;r.Data.Type="setSessionProperty";r.Data.Args=[t,n];r.ModuleID="";this.Send(r)}.bind(this)};this.JoinSession=function(e,t){var n=new u;n.SessionID=e;n.UserID=this.userID;n.Data.Type="joinSession";n.Data.Args=[t];n.ModuleID="";this.Send(n)};this.Broadcast=function(e,t){var n=new u;n.SessionID=e;n.UserID=this.userID;n.Data.Type="sessionBroadcast";n.Data.Args=[t];n.ModuleID="";this.Send(n)};this.LeaveSession=function(e){var t=new u;t.SessionID=e;t.UserID=this.userID;t.Data.Type="leaveSession";t.ModuleID="";this.Send(t)};this.AccessModule=function(e,t,n){var r=new u;r.SessionID=e;r.UserID=this.userID;r.Data.Type="accessModule";r.Data.Args=[n];r.ModuleID=t;this.Send(r)};this.ExecuteFunction=function(e,t,n){var r=new u;r.SessionID="";r.UserID=this.userID;r.Data.Type="executeFunction";r.Data.Args=[param];r.ModuleID=t;this.Send(r)}};var f=function(e,t,n,r){var i=n;var s=e;var o=t;var u=r;var a=null;var f=function(){if(this.Events.onOpen){this.Events.onOpen()}}.bind(this);var l=function(){if(this.Events.onClose){this.Events.onClose()}}.bind(this);var c=function(e){if(this.Events.onMessage){this.Events.onMessage(e)}}.bind(this);var h=function(e){if(this.Events.onError){this.Events.onError(e)}}.bind(this);this.Events={onOpen:null,onMessage:null,onClose:null,onError:null};this.GetID=function(){return u};this.Open=function(){if(a==null){a=io.connect(s+":"+o+"/"+i);a.on("connect",f);a.on("disconnect",l);a.on("message",c);a.on("error",h)}};this.Close=function(){};this.Send=function(e){a.send(e)}};var l=function(e,t,n,r){var i=n;var s=e;var o=t;var u=r;var a=null;var f=function(e){this.state=a.readyState;if(this.Event.onConnect!=null){this.Event.onConnect()}}.bind(this);var l=function(e){this.state=a.readyState;if(this.Events.onClose!=null){this.Events.onClose()}}.bind(this);var c=function(e){this.state=a.readyState;if(this.Events.onMessage!=null){this.Events.onMessage()}}.bind(this);var h=function(){this.state=a.readyState;if(this.Events.onError!=null){this.Events.onError()}}.bind(this);this.Events={onOpen:null,onMessage:null,onClose:null,onError:null};this.GetID=function(){return u};this.Open=function(){if(a==null){a=new WebSocket("ws://"+s+":"+o+"/"+i);this.state=a.readyState;a.onopen=f.bind(this);a.onclose=l.bind(this);a.onmessage=c.bind(this);a.onerror=h.bind(this);return this.state}else{return"Already Initialized"}};this.Close=function(){a.close()};this.Send=function(e){a.send(e)}};return{GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r},Initialize:function(){},SocketManager:{Sockets:i.resschmgr.Create.Map(),CreateSocket:function(e,t,n){var r=(new Date).getTime();var i=new l(e,t,n,r);this.Sockets.put(r,i);return i}},Create:{Socket:function(e,t,n){var r=(new Date).getTime();var s=new l(e,t,n,r);i.network.SocketManager.Sockets.put(r,s);return s},SocketIO:function(e,t,n){var r=(new Date).getTime();var s=new f(e,t,n,r);i.network.SocketManager.Sockets.put(r,s);return s},JOSServer:function(e,t,n){var r=new a;if(io){r.socket=i.network.Create.SocketIO(e,t,n)}else{r.socket=i.network.Create.Socket(e,t,n)}return r}}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Cores.Instance().Threads=function(){function t(){var e="JaHOVA OS Internal API : Multithreading Core";var t="0v3";var n="scripts/jahova/OS/Cores/jahova.os.cores.thread.js";var r=null;var i=com.jahova.os.Instance();var s=com.jahova.utilities.Instance();var o=function(e,t,n,r,s){this.ID=i.threads.ThreadManager.NextID++;this.name=e;this.type=t;this.pool=r;this.frame=null;this.maxThreadCount=s;this.priority=n;this.callbacks=i.resschmgr.Create.Map()};o.prototype.Suspend=function(e){var t=new u;t.msgType="SUSPENDTHREAD";t.priority=0;t.sendTime=(new Date).getTime();t.osThreadID=this.ID;i.threads.ThreadManager.SendToController(t.Serialize())};o.prototype.Resume=function(e){var t=new u;t.msgType="RESUMETHREAD";t.priority=0;t.sendTime=(new Date).getTime();t.osThreadID=this.ID;i.threads.ThreadManager.SendToController(t.Serialize())};o.prototype.GetSuspendCount=function(e){var t=new u;t.msgType="GETSUSPENDCOUNT";t.priority=0;t.sendTime=(new Date).getTime();t.osThreadID=this.ID;i.threads.ThreadManager.SendToController(t.Serialize())};o.prototype.Execute=function(e){var t=new u;t.msgType="EXECUTETHREAD";t.data=e;t.priority=0;t.sendTime=(new Date).getTime();t.osThreadID=this.ID;i.threads.ThreadManager.SendToController(t.Serialize())};o.prototype.SetPriority=function(e){var t=new u;t.msgType="SETPRIORITY";t.data=e;t.priority=0;t.sendTime=(new Date).getTime();t.osThreadID=this.ID;i.threads.ThreadManager.SendToController(t.Serialize())};o.prototype.GetPriority=function(){var e=new u;e.msgType="GETPRIORITY";e.priority=0;e.sendTime=(new Date).getTime();e.osThreadID=this.ID;i.threads.ThreadManager.SendToController(e.Serialize())};o.prototype.AddTask=function(e){var t=new u;t.msgType="ADDTASK";t.data=e;t.priority=0;t.sendTime=(new Date).getTime();t.osThreadID=this.ID;i.threads.ThreadManager.SendToController(t.Serialize())};o.prototype.GetPendingTask=function(){var e=new u;e.msgType="GETPENDINGTASK";e.priority=0;e.sendTime=(new Date).getTime();e.osThreadID=this.ID;i.threads.ThreadManager.SendToController(e.Serialize())};o.prototype.Exit=function(){var e=new u;e.msgType="EXITTHREAD";e.priority=0;e.sendTime=(new Date).getTime();e.osThreadID=this.ID;i.threads.ThreadManager.SendToController(e.Serialize())};o.prototype.SetMaxThreadCount=function(e){var t=new u;t.msgType="SETMAXTHREADCOUNT";t.data=e;t.priority=0;t.sendTime=(new Date).getTime();t.osThreadID=this.ID;i.threads.ThreadManager.SendToController(t.Serialize())};o.prototype.GetFunction=function(){var e=new u;e.msgType="GETFUNCTION";e.priority=0;e.sendTime=(new Date).getTime();e.osThreadID=this.ID;i.threads.ThreadManager.SendToController(e.Serialize())};o.prototype.GetCurrentTask=function(){var e=new u;e.msgType="GETCURRENTTASK";e.priority=0;e.sendTime=(new Date).getTime();e.osThreadID=this.ID;i.threads.ThreadManager.SendToController(e.Serialize())};o.prototype.GetFilename=function(){var e=new u;e.msgType="GETFILENAME";e.priority=0;e.sendTime=(new Date).getTime();e.osThreadID=this.ID;i.threads.ThreadManager.SendToController(e.Serialize())};o.prototype.AddCallback=function(){};o.prototype.RemoveCallback=function(){};o.prototype.GetStatus=function(){var e=new u;e.msgType="GETTHREADSTATUS";e.priority=0;e.sendTime=(new Date).getTime();e.osThreadID=this.ID;i.threads.ThreadManager.SendToController(e.Serialize())};var u=function(){this.msgID=i.threads.ThreadManager.NextMessageID++;this.msgType="";this.data="";this.priority="";this.sendTime="";this.deliveryTime="";this.osThreadID="";this.cntrlThreadID="";this.callbackCoreID="";this.callbackFunctionID=""};u.prototype.Serialize=function(){return JSON.stringify(this)};u.prototype.Parse=function(e){var t=JSON.parse(e);this.msgID=t.msgID;this.msgType=t.msgType;this.data=t.data;this.priority=t.priority;this.sendTime=t.sendTime;this.deliveryTime=t.deliveryTime;this.osThreadID=t.osThreadID;this.cntrlThreadID=t.cntrlThreadID;this.callbackCoreID=t.callbackCoreID;this.callbackFunctionID=t.callbackFunctionID};return{GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r},Initialize:function(){this.ThreadManager.Initialize()},ThreadManager:{NextID:0,SharedWorkers:false,NextMessageID:0,ThreadController:null,ThreadControllerPath:null,SWThreadControllerPath:null,ThreadPath:null,ThreadNameMap:null,ThreadIDMap:null,ControllerCallbacksMap:null,ControllerID:-1,PendingCommandsMap:null,CommandFunctionsMap:null,Initialize:function(){i.console.AppendComment("Initializing Thread Core");i.console.AppendComment("        Creating Thread Maps");this.ThreadNameMap=i.resschmgr.Create.Map();this.ThreadIDMap=i.resschmgr.Create.Map();this.ControllerCallbacksMap=i.resschmgr.Create.Map();this.PendingCommandsMap=i.resschmgr.Create.Map();this.CommandFunctionsMap=i.resschmgr.Create.Map();this.ThreadControllerPath="scripts/jahova/OS/Cores/Threads/jahova.os.cores.thread.controller.js";this.SWThreadControllerPath="scripts/jahova/OS/Cores/Threads/jahova.os.cores.thread.swcontroller.js";i.console.AppendComment("        Path Set: "+this.ThreadControllerPath);this.ThreadPath="scripts/Applications/Threads/jahova.os.cores.thread.dynamic.js";i.console.AppendComment("        Set Dynamic Thread Path");if(window.Worker){i.console.AppendComment("        Web Workers Supported: true");if(window.SharedWorker){this.SharedWorkers=true}i.console.AppendComment("        Shared Workers Supported: "+this.SharedWorkers)}else{i.console.AppendComment("        Web Workers Supported: false")}},CreateCommand:function(){return new u},CreateThread:function(e,t,n,r,i,s,a,f,l){var c=null;if(!this.ThreadNameMap.get(e)){c=new o(e,t,n,f,l);if(i){c.callbacks.put(i,i)}if(this.SharedWorkers){c.frame=document.createElement("iframe");c.frame.style.display="none";c.frame.name=c.name;c.frame.id=c.ID;document.body.appendChild(c.frame);var h=document.createElement("script");h.type="text/javascript";if(t=="DYNAMIC"){h.src="scripts/Applications/Threads/jahova.os.cores.thread.swdynamic.js"}else{h.src=s}c.frame.contentDocument.head.appendChild(h)}this.ThreadIDMap.put(c.ID,c);this.ThreadNameMap.put(c.name,c);var p={id:c.ID,name:c.name,type:c.type,priority:c.priority,pooled:c.pool,maxPooledThreads:c.maxThreadCount,suspend:r,filename:s,data:{func:s,input:a}};var d=new u;d.msgType="CreateThread";d.data=JSON.stringify(p);d.priority=n;d.sendTime=(new Date).getTime();d.deliveryTime;d.osThreadID=c.ID;d.cntrlThreadID=null;d.callbackCoreID=i;d.callbackFunctionID;this.SendToController(d.Serialize())}return c},GetActiveThreads:function(){var e=new u;e.msgType="GETACTIVETHREADS";e.data="";e.priority=0;e.sendTime=(new Date).getTime();e.deliveryTime;e.osThreadID=-1;e.cntrlThreadID=null;e.callbackCoreID=null;e.callbackFunctionID;i.threads.ThreadManager.SendToController(e.Serialize())},ExitThread:function(){},GetFunctionBody:function(e){var t=e.indexOf("{")+1;var n=e.lastIndexOf("}");var r=e.slice(t,n);return r},GetThreadByName:function(e){return this.ThreadNameMap.get(e)},GetThreadByID:function(){},CreateThreadController:function(e){if(this.ThreadController==null){if(window.Worker){i.threads.ThreadManager.ControllerCallbacksMap.put(e,e);if(this.SharedWorkers){this.ThreadController=new SharedWorker(this.SWThreadControllerPath);this.ThreadController.port.start();this.ThreadController.port.onmessage=this.ProcessControllerRequest;this.ThreadController.port.onerror=function(e){alert("Error in file: "+e.filename+"\nline: "+e.lineno+"\nDescription: "+e.message)};var t=new u;t.msgType="Start";t.data="Thread Core Requesting Controller Initialize";t.osThreadID=-1}else{this.ThreadController=new Worker(this.ThreadControllerPath);this.ThreadController.addEventListener("message",this.ProcessControllerRequest,false);this.ThreadController.onerror=function(e){alert("Error in file: "+e.filename+"\nline: "+e.lineno+"\nDescription: "+e.message)};var t=new u;t.msgType="Start";t.data="Thread Core Requesting Controller Initialize";t.osThreadID=-1;this.SendToController(t.Serialize())}}else{i.console.Comment("");i.console.Warning("\nCan not create Thread Controller \nYour Browser Does Not Support Web Workers")}}else{i.console.Comment("");i.console.Warning("Thread Controller already exist")}},SendToController:function(e){if(this.SharedWorkers){i.threads.ThreadManager.ThreadController.port.postMessage(e)}else{i.threads.ThreadManager.ThreadController.postMessage(e)}},SharedMemory:{Get:{Entry:function(e){var t=new u;t.msgType="GetSharedMemoryEntry";t.data=e;t.priority="";t.sendTime=(new Date).getTime();t.deliveryTime;t.osThreadID=i.threads.ThreadManager.ControllerID;t.cntrlThreadID=null;t.callbackCoreID="";t.callbackFunctionID;i.threads.ThreadManager.SendToController(t.Serialize())},All:function(){var e=new u;e.msgType="GetSharedMemory";e.data="";e.priority="";e.sendTime=(new Date).getTime();e.deliveryTime;e.osThreadID=i.threads.ThreadManager.ControllerID;e.cntrlThreadID=null;e.callbackCoreID="";e.callbackFunctionID;i.threads.ThreadManager.SendToController(e.Serialize())}},Set:{Entry:function(e,t){var n=new u;n.msgType="SetSharedMemoryEntry";n.data={};n.data.key=e;n.data.value=t;n.priority="";n.sendTime=(new Date).getTime();n.deliveryTime;n.osThreadID=i.threads.ThreadManager.ControllerID;n.cntrlThreadID=null;n.callbackCoreID="";n.callbackFunctionID;i.threads.ThreadManager.SendToController(n.Serialize())},All:function(e){var t=new u;t.msgType="SetSharedMemory";t.data=e;t.priority="";t.sendTime=(new Date).getTime();t.deliveryTime;t.osThreadID=i.threads.ThreadManager.ControllerID;t.cntrlThreadID=null;t.callbackCoreID="";t.callbackFunctionID;i.threads.ThreadManager.SendToController(t.Serialize())}},Update:{Entry:function(e,t,n){var r=new u;r.msgType="UpdateSharedMemoryEntry";r.data={};r.data.key=e;r.data.value=n;r.data.property=t;r.priority="";r.sendTime=(new Date).getTime();r.deliveryTime;r.osThreadID=i.threads.ThreadManager.ControllerID;r.cntrlThreadID=null;r.callbackCoreID="";r.callbackFunctionID;i.threads.ThreadManager.SendToController(r.Serialize())},All:function(e){var t=new u;t.msgType="UpdateSharedMemory";t.data=e;t.priority="";t.sendTime=(new Date).getTime();t.deliveryTime;t.osThreadID=i.threads.ThreadManager.ControllerID;t.cntrlThreadID=null;t.callbackCoreID="";t.callbackFunctionID;i.threads.ThreadManager.SendToController(t.Serialize())}},Remove:{Entry:function(e){var t=new u;t.msgType="RemoveSharedMemoryEntry";t.data=e;t.priority="";t.sendTime=(new Date).getTime();t.deliveryTime;t.osThreadID=i.threads.ThreadManager.ControllerID;t.cntrlThreadID=null;t.callbackCoreID="";t.callbackFunctionID;i.threads.ThreadManager.SendToController(t.Serialize())},All:function(){var e=new u;e.msgType="RemoveSharedMemory";e.data="";e.priority="";e.sendTime=(new Date).getTime();e.deliveryTime;e.osThreadID=i.threads.ThreadManager.ControllerID;e.cntrlThreadID=null;e.callbackCoreID="";e.callbackFunctionID;i.threads.ThreadManager.SendToController(e.Serialize())}}},ProcessControllerRequest:function(e){var t=new u;t.Parse(e.data);var n=i.threads.ThreadManager.ThreadIDMap.get(t.osThreadID);if(t.osThreadID==-1){var r=i.threads.ThreadManager.ControllerCallbacksMap.size;for(var s=0;s++<r;i.threads.ThreadManager.ControllerCallbacksMap.next()){i.threads.ThreadManager.ControllerCallbacksMap.value()(t)}return}else if(n){var r=n.callbacks.size;if(r>0){for(var s=0;s++<r;n.callbacks.next()){n.callbacks.value()(t)}}else{i.console.AppendComment("\nNo Callback Assigned For Thread");i.console.AppendComment("Message Type: "+t.msgType+"\nMessage Data: "+t.data)}}else{i.console.AppendComment("\nNo Thread Found to Handle Command Callback");i.console.AppendComment("Message Type: "+t.msgType+"\nMessage Data: "+t.data)}},CreateSocket:function(){var e=new u;e.msgType="CREATESOCKET";e.priority=0;e.sendTime=(new Date).getTime();e.osThreadID=this.ID;i.threads.ThreadManager.SendToController(e.Serialize())},CloseSocket:function(){var e=new u;e.msgType="CLOSESOCKET";e.priority=0;e.sendTime=(new Date).getTime();e.osThreadID=this.ID;i.threads.ThreadManager.SendToController(e.Serialize())}}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Cores.Instance().HTML=function(){function t(){var e="JaHOVA OS Internal API : HTML Core";var t="0v5";var n="scripts/jahova/OS/Cores/HTML/jahova.os.cores.html.js";var r=null;var i=com.jahova.os.Instance();var s=com.jahova.utilities.Instance();return{GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r},Initialize:function(){}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Cores.Instance().Windows=function(){function t(){var e="JaHOVA OS Internal API : Windows Core";var t="0v5";var n="scripts/jahova/OS/Cores/Windows/jahova.os.cores.windows.js";var r=null;var i=com.jahova.os.Instance();var s=com.jahova.utilities.Instance();var o=function(e,t,n){var s={window:"HIDDEN",titlebar:"VISIBLE",menubar:"VISIBLE",toolbar:"VISIBLE",statusbar:"VISIBLE",content:"VISIBLE",buttons:"VISIBLE"};var o={top:0,left:0};var u=t;var a=e;var f=null;var l=null;this.type=null;this.theme=null;this.menu=null;this.isMin=false;this.isMax=false;this.Callbacks={onOpen:null,onClose:null,onMax:null,onMin:null,onFocus:null,onBlur:null};this.Scope={onOpen:null,onClose:null,onMax:null,onMin:null,onFocus:null,onBlur:null};this.Hide={window:function(){this.elements.window.html().style.display="none";s.window="HIDDEN"}.bind(this),titlebar:function(){this.elements.titlebar.html().style.display="none";s.titlebar="HIDDEN";var e=this.elements.window.GetHeight();var t=this.elements.titlebar.GetHeight();var n=this.elements.menubar.GetHeight();var r=this.elements.statusbar.GetHeight();var i=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=e-t-n-r-i+"px"}else{this.elements.content.html().style.height=e-t-r-i+"px"}}.bind(this),menubar:function(){this.elements.menubar.html().style.display="none";s.menubar="HIDDEN";if(this.theme.menubarIntegrated){var e=this.elements.window.GetHeight();var t=this.elements.titlebar.GetHeight();var n=this.elements.menubar.GetHeight();var r=this.elements.statusbar.GetHeight();var i=this.elements.toolbar.GetHeight();this.elements.content.html().style.height=e-t-n-r-i+"px"}}.bind(this),toolbar:function(){this.elements.toolbar.html().style.display="none";s.toolbar="HIDDEN";var e=this.elements.window.GetHeight();var t=this.elements.titlebar.GetHeight();var n=this.elements.menubar.GetHeight();var r=this.elements.statusbar.GetHeight();var i=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=e-t-n-r-i+"px"}else{this.elements.content.html().style.height=e-t-r-i+"px"}}.bind(this),statusbar:function(){this.elements.statusbar.html().style.display="none";s.statusbar="HIDDEN";var e=this.elements.window.GetHeight();var t=this.elements.titlebar.GetHeight();var n=this.elements.menubar.GetHeight();var r=this.elements.statusbar.GetHeight();var i=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=e-t-n-r-i+"px"}else{this.elements.content.html().style.height=e-t-r-i+"px"}}.bind(this),content:function(){this.elements.content.html().style.display="none";s.content="HIDDEN"}.bind(this),buttons:function(){this.elements.titlebar.buttons.html().style.display="none";s.buttons="HIDDEN"}.bind(this)};this.Display={window:function(){this.elements.window.html().style.display="block";s.window="VISIBLE";this.MakeActive();var e=this.elements.window.GetHeight();var t=this.elements.titlebar.GetHeight();var n=this.elements.menubar.GetHeight();var r=this.elements.statusbar.GetHeight();var i=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=e-t-n-r-i+"px"}else{this.elements.content.html().style.height=e-t-r-i+"px"}}.bind(this),titlebar:function(){this.elements.titlebar.html().style.display="block";s.titlebar="VISIBLE";var e=this.elements.window.GetHeight();var t=this.elements.titlebar.GetHeight();var n=this.elements.menubar.GetHeight();var r=this.elements.statusbar.GetHeight();var i=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=e-t-n-r-i+"px"}else{this.elements.content.html().style.height=e-t-r-i+"px"}}.bind(this),menubar:function(){this.elements.menubar.html().style.display="block";s.menubar="VISIBLE";if(this.theme.menubarIntegrated){var e=this.elements.window.GetHeight();var t=this.elements.titlebar.GetHeight();var n=this.elements.menubar.GetHeight();var r=this.elements.statusbar.GetHeight();var i=this.elements.toolbar.GetHeight();this.elements.content.html().style.height=e-t-n-r-i+"px"}}.bind(this),toolbar:function(){this.elements.toolbar.html().style.display="block";s.toolbar="VISIBLE";var e=this.elements.window.GetHeight();var t=this.elements.titlebar.GetHeight();var n=this.elements.menubar.GetHeight();var r=this.elements.statusbar.GetHeight();var i=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=e-t-n-r-i+"px"}else{this.elements.content.html().style.height=e-t-r-i+"px"}}.bind(this),statusbar:function(){this.elements.statusbar.html().style.display="block";s.statusbar="VISIBLE";var e=this.elements.window.GetHeight();var t=this.elements.titlebar.GetHeight();var n=this.elements.menubar.GetHeight();var r=this.elements.statusbar.GetHeight();var i=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=e-t-n-r-i+"px"}else{this.elements.content.html().style.height=e-t-r-i+"px"}}.bind(this),content:function(){this.elements.content.html().style.display="block";s.content="VISIBLE"}.bind(this),buttons:function(){this.elements.titlebar.buttons.html().style.display="block";s.buttons="VISIBLE"}.bind(this)};this.Get={State:{window:function(){return s.window},titlebar:function(){return s.titlebar},menubar:function(){return s.menubar},toolbar:function(){return s.toolbar},statusbar:function(){return s.statusbar},content:function(){return s.content}},theme:function(){return this.theme}.bind(this),id:function(){return a},position:function(){return{top:o.top,left:o.left}},title:function(){return u}};this.Set={position:function(e,t){o.top=e;o.left=t;this.elements.window.html().style.top=e+"px";this.elements.window.html().style.left=t+"px"}.bind(this),width:function(e){f=e;this.elements.window.html().style.width=f+"px"}.bind(this),height:function(e){l=e;this.elements.window.html().style.height=l+"px";var t=this.elements.window.GetHeight();var n=this.elements.titlebar.GetHeight();var r=this.elements.menubar.GetHeight();var i=this.elements.statusbar.GetHeight();var s=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=t-n-r-i-s+"px"}else{this.elements.content.html().style.height=t-n-i-s+"px"}}.bind(this),title:function(e){u=e;this.elements.titlebar.text.html().innerHTML=u}.bind(this),statusbarText:function(e){this.elements.statusbar.text.html().innerHTML=e}.bind(this),theme:function(e){this.LoadTheme(e)}.bind(this),onOpen:function(e,t){this.Callbacks.onOpen=e;this.Scope.onOpen=t}.bind(this),onClose:function(e,t){this.Callbacks.onClose=e;this.Scope.onClose=t}.bind(this),onMin:function(e,t){this.Callbacks.onMin=e;this.Scope.onMin=t}.bind(this),onMax:function(e,t){this.Callbacks.onMax=e;this.Scope.onMax=t}.bind(this),onFocus:function(e,t){this.Callbacks.onFocus=e;this.Scope.onFocus=t}.bind(this),onBlur:function(e,t){this.Callbacks.onBlur=e;this.Scope.onBlur=t}.bind(this)};var c={onOpen:function(e){if(this.Callbacks.onOpen){if(this.Scope.onOpen){this.Callbacks.onOpen.apply(this.Scope.onOpen,[e])}else{this.Callbacks.onOpen(e)}}}.bind(this),onClose:function(e){i.windows.WindowsManager.Windows.remove(r);document.body.removeChild(this.elements.window.html());if(this.Callbacks.onClose){if(this.Scope.onClose){this.Callbacks.onClose.apply(this.Scope.onClose,[e])}else{this.Callbacks.onClose(e)}}}.bind(this),onMin:function(e){if(!this.isMin){this.Hide.content();this.Hide.statusbar();this.Hide.menubar();this.Hide.buttons();this.elements.titlebar.Class.ClearAll();this.elements.titlebar.Class.Add(this.theme.Class.titlebarMinimized);this.elements.window.Class.ClearAll();this.elements.window.Class.Add(this.theme.Class.windowMinimized);this.elements.window.html().style.width="150px";this.elements.window.html().style.height="25px";this.elements.titlebar.html().onclick=c.onMin;if(i.windows.Desktop.Get.state.desktop()=="VISIBLE"){this.elements.window.html().style.top="";this.elements.window.html().style.left="";i.windows.Desktop.Elements.dock.AppendChild(this.elements.window.html())}else{this.elements.window.html().style.position="absolute"}this.isMin=true;if(e){e.stopPropagation()}}else{this.Display.content();this.Display.statusbar();if(s.menubar=="VISIBLE")this.Display.menubar();this.Display.buttons();this.elements.titlebar.Class.ClearAll();this.elements.titlebar.Class.Add(this.theme.Class.titlebar);this.elements.window.Class.ClearAll();this.elements.window.Class.Add(this.theme.Class.window);this.Set.position(o.top,o.left);this.Set.width(f);this.Set.height(l);this.elements.titlebar.html().onclick="";if(i.windows.Desktop.Get.state.desktop()=="VISIBLE"){document.body.appendChild(this.elements.window.html())}var t=this.elements.window.GetHeight();var n=this.elements.titlebar.GetHeight();var r=this.elements.menubar.GetHeight();var u=this.elements.statusbar.GetHeight();var a=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=t-n-r-u-a+"px"}else{this.elements.content.html().style.height=t-n-u-a+"px"}this.isMin=false;if(e){e.stopPropagation()}}if(this.Callbacks.onMin){if(this.Scope.onMin){this.Callbacks.onMin.apply(this.Scope.onMin,[e])}else{this.Callbacks.onMin(e)}}}.bind(this),onMax:function(e){if(!this.isMax){this.isMax=true;this.elements.window.Class.ClearAll();this.elements.window.Class.Add(this.theme.Class.windowMaximized);this.elements.window.html().style.left="0px";this.elements.window.html().style.width="";var t=i.windows.Desktop.Elements.dock.html().clientHeight;var n=this.elements.window.GetHeight();var r=this.elements.titlebar.GetHeight();var s=this.elements.menubar.GetHeight();var u=this.elements.statusbar.GetHeight();var a=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=window.innerHeight-t-r-u-s-a+"px";this.elements.window.html().style.height=window.innerHeight-t+"px";this.elements.window.html().style.top="0px"}else{this.elements.content.html().style.height=window.innerHeight-t-r-u-a+"px";this.elements.window.html().style.height=window.innerHeight-t-s+"px";this.elements.window.html().style.top="20px"}if(e){e.stopPropagation()}}else{this.isMax=false;this.elements.window.Class.ClearAll();this.elements.window.Class.Add(this.theme.Class.window);this.elements.window.html().style.height=l+"px";this.Set.position(o.top,o.left);this.Set.width(f);this.Set.height(l);var n=this.elements.window.GetHeight();var r=this.elements.titlebar.GetHeight();var s=this.elements.menubar.GetHeight();var u=this.elements.statusbar.GetHeight();var a=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=n-r-s-u-a+"px"}else{this.elements.content.html().style.height=n-r-u-a+"px"}if(e){e.stopPropagation()}}if(this.Callbacks.onMax){if(this.Scope.onMax){this.Callbacks.onMax.apply(this.Scope.onMax,[e])}else{this.Callbacks.onMax(e)}}}.bind(this),onFocus:function(e){if(this.Callbacks.onFocus){if(this.Scope.onFocus){this.Callbacks.onFocus.apply(this.Scope.onFocus,[e])}else{this.Callbacks.onFocus(e)}}}.bind(this),onBlur:function(e){this.elements.window.html().onclick=this.MakeActive;this.elements.window.html().style.zIndex=20;if(!this.theme.menubarIntegrated){this.Hide.menubar()}if(this.Callbacks.onBlur){if(this.Scope.onBlur){this.Callbacks.onBlur.apply(this.Scope.onBlur,[e])}else{this.Callbacks.onBlur(e)}}}.bind(this)};this.MakeActive=function(e){c.onFocus();if(i.windows.WindowsManager.ActiveWindow&&i.windows.WindowsManager.ActiveWindow!=this){i.windows.WindowsManager.ActiveWindow.Blur()}i.windows.WindowsManager.ActiveWindow=this;this.elements.window.html().onclick="";this.elements.window.html().style.zIndex=25;if(!this.theme.menubarIntegrated){if(s.menubar=="VISIBLE")this.Display.menubar()}}.bind(this);this.Blur=function(){c.onBlur()}.bind(this);this.Maximize=function(){c.onMax()};this.Minimize=function(){c.onMin()};this.LoadTheme=function(e){if(e){this.theme=i.windows.WindowsManager.Themes.get(e);if(!this.theme){alert(e+" Window Theme was not found")}}else{this.theme=i.windows.WindowsManager.Themes.get("Mac")}h();this.elements.window.Class.Add(this.theme.Class.window);this.elements.titlebar.Class.Add(this.theme.Class.titlebar);this.elements.menubar.Class.Add(this.theme.Class.menubar);this.elements.toolbar.Class.Add(this.theme.Class.toolbar);this.elements.statusbar.Class.Add(this.theme.Class.statusbar);this.elements.content.Class.Add(this.theme.Class.content);this.elements.titlebar.text.Class.Add(this.theme.Class.titlebarText);this.elements.titlebar.buttons.Class.Add(this.theme.Class.titlebarButtonContainer);this.elements.titlebar.buttons.max.Class.Add(this.theme.Class.titlebarButtonMax);this.elements.titlebar.buttons.min.Class.Add(this.theme.Class.titlebarButtonMin);this.elements.titlebar.buttons.close.Class.Add(this.theme.Class.titlebarButtonClose);this.elements.statusbar.text.Class.Add(this.theme.Class.statusbarText);this.elements.window.html().id=a;this.Set.position(this.theme.Position.top,this.theme.Position.left);this.Set.width(this.theme.width);this.Set.height(this.theme.height)};var h=function(){this.elements.window.Class.ClearAll();this.elements.titlebar.Class.ClearAll();this.elements.menubar.Class.ClearAll();this.elements.toolbar.Class.ClearAll();this.elements.statusbar.Class.ClearAll();this.elements.content.Class.ClearAll();this.elements.titlebar.text.Class.ClearAll();this.elements.titlebar.buttons.Class.ClearAll();this.elements.titlebar.buttons.max.Class.ClearAll();this.elements.titlebar.buttons.min.Class.ClearAll();this.elements.titlebar.buttons.close.Class.ClearAll();this.elements.statusbar.text.Class.ClearAll()}.bind(this);this.elements={window:i.resschmgr.Create.HTMLElement("div"),titlebar:i.resschmgr.Create.HTMLElement("div"),menubar:i.resschmgr.Create.HTMLElement("div"),toolbar:i.resschmgr.Create.HTMLElement("div"),statusbar:i.resschmgr.Create.HTMLElement("div"),content:i.resschmgr.Create.HTMLElement("div")};this.elements.titlebar.text=i.resschmgr.Create.HTMLElement("div");this.elements.titlebar.buttons=i.resschmgr.Create.HTMLElement("div");this.elements.titlebar.buttons.max=i.resschmgr.Create.HTMLElement("div");this.elements.titlebar.buttons.min=i.resschmgr.Create.HTMLElement("div");this.elements.titlebar.buttons.close=i.resschmgr.Create.HTMLElement("div");this.elements.menubar.children=i.resschmgr.Create.Map();this.elements.toolbar.children=i.resschmgr.Create.Map();this.elements.statusbar.text=i.resschmgr.Create.HTMLElement("div");this.LoadTheme(n);if(u)this.elements.titlebar.text.html().innerHTML=u;this.elements.window.html().id=a;this.elements.titlebar.html().id=a;this.elements.menubar.html().id=a;this.elements.toolbar.html().id=a;this.elements.statusbar.html().id=a;this.elements.content.html().id=a;this.elements.titlebar.text.html().id=a;this.elements.titlebar.buttons.html().id=a;this.elements.titlebar.buttons.max.html().id=a;this.elements.titlebar.buttons.min.html().id=a;this.elements.titlebar.buttons.close.html().id=a;this.elements.statusbar.text.html().id=a;this.elements.titlebar.buttons.max.html().onclick=c.onMax;this.elements.titlebar.buttons.min.html().onclick=c.onMin;this.elements.titlebar.buttons.close.html().onclick=c.onClose;this.elements.titlebar.html().onmousedown=i.windows.WindowsManager.BeginDrag;this.elements.titlebar.buttons.AppendChild(this.elements.titlebar.buttons.close.html());this.elements.titlebar.buttons.AppendChild(this.elements.titlebar.buttons.min.html());this.elements.titlebar.buttons.AppendChild(this.elements.titlebar.buttons.max.html());this.elements.titlebar.AppendChild(this.elements.titlebar.buttons.html());this.elements.titlebar.AppendChild(this.elements.titlebar.text.html());this.elements.statusbar.AppendChild(this.elements.statusbar.text.html());this.elements.window.AppendChild(this.elements.titlebar.html());this.elements.window.AppendChild(this.elements.menubar.html());this.elements.window.AppendChild(this.elements.toolbar.html());this.elements.window.AppendChild(this.elements.content.html());this.elements.window.AppendChild(this.elements.statusbar.html());document.body.appendChild(this.elements.window.html());var p=this.elements.window.GetHeight();var d=this.elements.titlebar.GetHeight();var v=this.elements.menubar.GetHeight();var m=this.elements.statusbar.GetHeight();var g=this.elements.toolbar.GetHeight();if(this.theme.menubarIntegrated){this.elements.content.html().style.height=p-d-v-m-g+"px"}else{this.elements.content.html().style.height=p-d-m-g+"px"}this.Hide.window();i.windows.WindowsManager.Windows.put(e,this)};var u=function(e){this.type=null;this.name=e;this.url=null;this.menubarIntegrated=null;this.Class={window:null,windowMinimized:null,windowMaximized:null,titlebar:null,titlebarText:null,titlebarButtonContainer:null,titlebarButtonMax:null,titlebarButtonMin:null,titlebarButtonClose:null,titlebarMinimized:null,menubar:null,menubarElement:null,toolbar:null,toolbarElement:null,content:null,statusbar:null,statusbarText:null};this.Position={top:0,left:0};this.width=400;this.height=300;this.resizable=false};var a=function(){this.SetHTML("div");this.children=[];this.theme=null;this.onClickScope=null;this.onClick=null;this.AddChild=function(){}};a.inherits(i.resschmgr.CHTMLElement);var f=function(){this.SetHTML("div");this.imageURL=null;this.theme=null;this.tooltipText=null;this.tooltipEnabled=false;this.onClickScope=null;this.onClick=null};f.inherits(i.resschmgr.CHTMLElement);var l=function(e){this.name=e;this.url=null;this.Class={desktop:null,dock:null,startButton:null,startButtonText:null,startMenu:null,application:null}};var c=function(e){this.SetHTML("div");var t=null;var n=null;var r=false;var s=null;var o=null;var u=e;var a=function(e){if(this.onClick){if(this.onClickScope){this.onClick.apply(this.onClickScope,[e])}else{this.onClick(e)}}}.bind(this);this.onClickScope=null;this.onClick=null;this.Get={ID:function(){return u}.bind(this),DisplayText:function(){}.bind(this),TooltipText:function(){}.bind(this),Callback:function(){}.bind(this),Image:function(){}.bind(this)};this.Set={DisplayText:function(e){this.html().innerHTML=e;t=e}.bind(this),TooltipText:function(){}.bind(this),Callback:function(e,t){this.onClick=e;if(t){this.onClickScope=t}}.bind(this),Image:function(){}.bind(this),Theme:function(e){o=e;this.Class.ClearAll();this.Class.Add(e.Class.application)}.bind(this)};this.EnableTooltip=function(){};this.DisableTooltip=function(){};this.html().onclick=a;i.windows.Desktop.Applications.put(e,this)};c.inherits(i.resschmgr.CHTMLElement);return{Create:{Window:function(e,t){return new o("jahova.window.id."+i.windows.WindowsManager.nextID++,e,t)},ErrorWindow:function(e,t){var n=400;var r=100;macWin=i.windows.Create.Window("ERROR: "+e,"PC");macWin.elements.content.html().innerHTML=t;macWin.elements.content.html().style.backgroundImage="none";macWin.Set.width(n);macWin.Set.height(r);macWin.Set.position(window.innerHeight/2-r/2,window.innerWidth/2-n/2);macWin.Hide.statusbar();macWin.Hide.menubar();macWin.Hide.toolbar();macWin.Display.window()},MessageWindow:function(e,t){var n=400;var r=100;macWin=i.windows.Create.Window(" "+e,"PC");macWin.elements.content.html().innerHTML=t;macWin.elements.content.html().style.backgroundImage="none";macWin.Set.width(n);macWin.Set.height(r);macWin.Set.position(window.innerHeight/2-r/2,window.innerWidth/2-n/2);macWin.Hide.statusbar();macWin.Hide.menubar();macWin.Hide.toolbar();macWin.Display.window()},Theme:function(e){var t=new u(e);i.windows.WindowsManager.Themes.put(e,t);return t},MenuElement:function(){return new a},ToolbarElement:function(){return new f}},WindowsManager:{nextID:0,Windows:null,Themes:null,BuildDefaultThemes:function(){var e=new i.windows.Create.Theme("PC");e.menubarIntegrated=true;e.type="STD";e.url=i.GetDomain+"styles/jahova.window.pc.css";e.Position.top=50;e.Position.left=50;e.Class.window="pcWindow";e.Class.windowMinimized="pcWindowMinimized";e.Class.windowMaximized="pcWindowMaximized";e.Class.titlebar="pcTitlebar";e.Class.titlebarText="pcTitlebarText";e.Class.titlebarButtonContainer="pcButtonContainer";e.Class.titlebarButtonMax="pcButtonMax";e.Class.titlebarButtonMin="pcButtonMin";e.Class.titlebarButtonClose="pcButtonClose";e.Class.titlebarMinimized="pcTitlebarMinimized";e.Class.menubar="pcMenubar";e.Class.menubarElement="pcMenubarElement";e.Class.toolbar="pcToolbar";e.Class.toolbarElement="pcToolbarElement";e.Class.content="pcContent";e.Class.statusbar="pcStatusbar";e.Class.statusbarText="pcStatusbarText";i.windows.WindowsManager.Themes.put(e.name,e);var t=i.windows.Create.Theme("Mac");t.type="STD";t.menubarIntegrated=false;t.url=i.GetDomain+"styles/jahova.window.mac.css";t.Position.top=50;t.Position.left=50;t.Class.window="macWindow";t.Class.windowMinimized="macWindowMinimized";t.Class.windowMaximized="macWindowMaximized";t.Class.titlebar="macTitlebar";t.Class.titlebarText="macTitlebarText";t.Class.titlebarButtonContainer="macButtonsContainer";t.Class.titlebarButtonMax="macButtonMax";t.Class.titlebarButtonMin="macButtonMin";t.Class.titlebarButtonClose="macButtonClose";t.Class.titlebarMinimized="macTitlebarMinimized";t.Class.menubar="macMenubar";t.Class.menubarElement="macMenubarElement";t.Class.toolbar="macToolbar";t.Class.toolbarElement="macToolbarElement";t.Class.content="macContent";t.Class.statusbar="macStatusbar";t.Class.statusbarText="macStatusbarText";i.windows.WindowsManager.Themes.put("Mac",t)},ActiveWindow:null,Create:{Window:function(e,t){return new o("jahova.window.id."+i.windows.WindowsManager.nextID++,e,t)},Theme:function(e){var t=new u(e);i.windows.WindowsManager.Themes.put(e,t);return t},MenuElement:function(){return new a},ToolbarElement:function(){return new f}},BeginDrag:function(e){var t=i.windows.WindowsManager.Windows.get(e.target.id);if(t){if(i.windows.WindowsManager.ActiveWindow){i.windows.WindowsManager.ActiveWindow.elements.window.html().zIndex=20}t.MakeActive();document.addEventListener("mousemove",i.windows.WindowsManager.DragStart,false);document.addEventListener("mouseup",i.windows.WindowsManager.DragStop,false);t.startX=e.clientX+window.scrollX;t.startY=e.clientY+window.scrollY;t.startTop=t.Get.position().top;t.startLeft=t.Get.position().left}e.preventDefault()},DragStart:function(e){var t=i.windows.WindowsManager.ActiveWindow;var n,r;n=e.clientX+window.scrollX;r=e.clientY+window.scrollY;if(t){t.Set.position(t.startTop+r-t.startY,t.startLeft+n-t.startX)}e.preventDefault()},DragStop:function(e){var t=i.windows.WindowsManager.ActiveWindow;if(t){document.removeEventListener("mousemove",i.windows.WindowsManager.DragStart,false);document.removeEventListener("mouseup",i.windows.WindowsManager.DragStop,false)}e.preventDefault()},BeginResize:function(e){},ResizeStart:function(e){},ResizeStop:function(e){}},Desktop:{Themes:null,Applications:null,nextID:0,theme:null,_state:{desktop:null,dock:null,startButton:null,startButtonText:null,startMenu:null},Get:{state:{desktop:function(){return i.windows.Desktop._state.desktop},dock:function(){return i.windows.Desktop._state.dock},startButton:function(){return i.windows.Desktop._state.startButton},startButtonText:function(){return i.windows.Desktop._state.startButtonText},startMenu:function(){return i.windows.Desktop._state.startMenu}}},Create:{Theme:function(e){var t=new l(e);i.windows.Desktop.Themes.put(e,t);return t},Application:function(){return new c(i.windows.Desktop.nextID++)}},Display:{desktop:function(){i.windows.Desktop.Elements.desktop.html().style.display="block";i.windows.Desktop._state.desktop="VISIBLE"},dock:function(){i.windows.Desktop.Elements.dock.html().style.display="block";i.windows.Desktop._state.dock="VISIBLE"},startButton:function(){i.windows.Desktop.Elements.startButton.html().style.display="block";i.windows.Desktop._state.startButton="VISIBLE"},startButtonText:function(){i.windows.Desktop.Elements.startButtonText.html().style.display="block";i.windows.Desktop._state.startButtonText="VISIBLE"},startMenu:function(){i.windows.Desktop.Elements.startMenu.html().style.display="block";i.windows.Desktop._state.startMenu="VISIBLE"}},Hide:{desktop:function(){i.windows.Desktop.Elements.desktop.html().style.display="none";i.windows.Desktop._state.desktop="HIDDEN"},dock:function(){i.windows.Desktop.Elements.dock.html().style.display="none";i.windows.Desktop._state.dock="HIDDEN"},startButton:function(){i.windows.Desktop.Elements.startButton.html().style.display="none";i.windows.Desktop._state.startButton="HIDDEN"},startButtonText:function(){i.windows.Desktop.Elements.startButtonText.html().style.display="none";i.windows.Desktop._state.startButtonText="HIDDEN"},startMenu:function(){i.windows.Desktop.Elements.startMenu.html().style.display="none";i.windows.Desktop._state.startMenu="HIDDEN"}},Set:{},BuildDefaultTheme:function(){var e=i.windows.Desktop.Create.Theme("default");e.url=i.GetDomain+"styles/jahova.window.desktop.css";e.Class.desktop="jDesktop";e.Class.dock="jDock";e.Class.startButton="jStartButton";e.Class.startButtonText="jStartButtonText";e.Class.startMenu="jStartMenu";e.Class.application="jApplication"},AddApplication:function(e){e.Set.Theme(i.windows.Desktop.theme);i.windows.Desktop.Elements.startMenu.AppendChild(e.html())},RemoveApplication:function(){},LoadTheme:function(e){i.windows.Desktop.theme=e;i.windows.Desktop.ClearTheme();i.windows.Desktop.Elements.desktop.Class.Add(e.Class.desktop);i.windows.Desktop.Elements.dock.Class.Add(e.Class.dock);i.windows.Desktop.Elements.startButton.Class.Add(e.Class.startButton);i.windows.Desktop.Elements.startButtonText.Class.Add(e.Class.startButtonText);i.windows.Desktop.Elements.startMenu.Class.Add(e.Class.startMenu);document.body.className="jDesktop";for(var t=0;t<i.windows.Desktop.Applications.size;t++){i.windows.Applications.value().Set.Theme(e)}},ClearTheme:function(){i.windows.Desktop.Elements.desktop.Class.ClearAll();i.windows.Desktop.Elements.dock.Class.ClearAll();i.windows.Desktop.Elements.startButton.Class.ClearAll();i.windows.Desktop.Elements.startButtonText.Class.ClearAll();i.windows.Desktop.Elements.startMenu.Class.ClearAll();document.body.className=""},Elements:{desktop:i.resschmgr.Create.HTMLElement("div"),dock:i.resschmgr.Create.HTMLElement("div"),startButton:i.resschmgr.Create.HTMLElement("div"),startButtonText:i.resschmgr.Create.HTMLElement("div"),startMenu:i.resschmgr.Create.HTMLElement("div")},Load:function(e){var t;if(e){t=i.windows.Desktop.Themes.get(e)}else{t=i.windows.Desktop.Themes.get("default")}i.windows.Desktop.LoadTheme(t);i.windows.Desktop.Elements.desktop.html().id="jdesktop";i.windows.Desktop.Elements.dock.html().id="jdesktop.dock";i.windows.Desktop.Elements.startButton.html().id="jdesktop.startButton";i.windows.Desktop.Elements.startButtonText.html().id="jdesktop.startButtonText";i.windows.Desktop.Elements.startMenu.html().id="jdesktop.startMenu";i.windows.Desktop.Elements.startButtonText.html().innerHTML="Start";i.windows.Desktop.Elements.desktop.AppendChild(i.windows.Desktop.Elements.dock.html());i.windows.Desktop.Elements.dock.AppendChild(i.windows.Desktop.Elements.startButton.html());i.windows.Desktop.Elements.startButton.AppendChild(i.windows.Desktop.Elements.startButtonText.html());i.windows.Desktop.Elements.startButton.AppendChild(i.windows.Desktop.Elements.startMenu.html());document.body.appendChild(i.windows.Desktop.Elements.desktop.html());i.windows.Desktop._state.desktop="VISIBLE";i.windows.Desktop._state.dock="VISIBLE";i.windows.Desktop._state.startButton="VISIBLE";i.windows.Desktop._state.startButtonText="VISIBLE";i.windows.Desktop._state.startMenu="VISIBLE"}},GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r},Initialize:function(){i.windows.WindowsManager.Windows=i.resschmgr.Create.Map();i.windows.WindowsManager.Themes=i.resschmgr.Create.Map();i.windows.WindowsManager.BuildDefaultThemes();i.windows.Desktop.Themes=i.resschmgr.Create.Map();i.windows.Desktop.Applications=i.resschmgr.Create.Map();i.windows.Desktop.BuildDefaultTheme()}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Cores.Instance().Database=function(){function t(){var e="JaHOVA OS Internal API : Database Core";var t="0v5";var n="scripts/jahova/OS/Cores/Database/jahova.os.cores.database.js";var r=null;var i=com.jahova.os.Instance();var s=com.jahova.utilities.Instance();return{GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r},Initialize:function(){}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Cores.Instance().Audio=function(){function t(){var e="JaHOVA OS Internal API : Audio Core";var t="0v5";var n="scripts/jahova/OS/Cores/Audio/jahova.os.cores.audio.js";var r=null;var i=com.jahova.os.Instance();var s=com.jahova.utilities.Instance();var o=null;var u=function(e){this.key=e;this.path="";this.loop=false;this.autoplay=false;this.type="";this.duration="";this.volume="";this.audio=i.resschmgr.Create.HTMLElement("audio")};return{Add:function(e,t,n,r,s){var a=new u(e);a.loop=n;a.autoplay=r;if(s){a.type=s;a.path=t;var f=document.createElement("source");if(s.toUpperCase()=="MP3"){if(a.audio.html().canPlayType("audio/mpeg;")){f.type="audio/mpeg";f.src=t;a.audio.html().setAttribute("preload","auto");if(n){a.audio.html().setAttribute("loop",n)}if(r){a.audio.html().setAttribute("autoplay",r)}a.audio.html().appendChild(f);o.put(e,a)}else{i.windows.Create.ErrorWindow(" Audio","Audio File: "+e+" not loaded <br/>Audio File Type: "+s+" is not supported by browser")}}else if(s.toUpperCase()=="OGG"){if(a.audio.html().canPlayType("audio/ogg;")){f.type="audio/ogg";f.src=t+".ogg";a.audio.html().setAttribute("preload","auto");if(n){a.audio.html().setAttribute("loop",n)}if(r){a.audio.html().setAttribute("autoplay",r)}a.audio.html().appendChild(f);o.put(e,a)}else{i.windows.Create.ErrorWindow(" Audio","Audio File: "+e+" not loaded <br/>Audio File Type: "+s+" is not supported by browser")}}}else{a.type=s;a.path=t;var f=document.createElement("source");if(a.audio.html().canPlayType("audio/mpeg;")){f.type="audio/mpeg";f.src=t+".mp3";a.audio.html().setAttribute("preload","auto");if(n){a.audio.html().setAttribute("loop",n)}if(r){a.audio.html().setAttribute("autoplay",r)}a.audio.html().appendChild(f);o.put(e,a)}else if(a.audio.html().canPlayType("audio/ogg;")){f.type="audio/ogg";f.src=t+".ogg";a.audio.html().setAttribute("preload","auto");if(n){a.audio.html().setAttribute("loop",n)}if(r){a.audio.html().setAttribute("autoplay",r)}a.audio.html().appendChild(f);o.put(e,a)}}a.duration=a.audio.html().duration;a.volume=a.audio.html().volume;return a},Get:{Volume:function(e){return o.get(e).volume},Sound:function(e){return o.get(e)},Duration:function(e){return o.get(e).audio.html().duration}},Set:{Volume:function(e,t){var n=o.get(e);n.audio.html().volume=t;n.volume=t},CurrentTime:function(e,t){var n=o.get(e);n.audio.html().currentTime=t}},Play:function(e){o.get(e).audio.html().play()},Pause:function(e){o.get(e).audio.html().pause()},GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r},Initialize:function(){o=i.resschmgr.Create.Map()}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Cores.Instance().Input=function(){function t(){var t="JaHOVA OS Internal API : Input Core";var n="0v5";var r="scripts/jahova/OS/Cores/Audio/jahova.os.cores.audio.js";var i=null;var s=com.jahova.os.Instance();var o=com.jahova.utilities.Instance();var u=0;var a=function(e){var t=e;this.debugRaw=t;this.id=e.index;var n=this;this.indicies={Dpad:{up:12,down:13,left:14,right:15},LeftShoulder:{top:4,bottom:6},RightShoulder:{top:5,bottom:7},Buttons:{top:3,bottom:0,left:2,right:1},LeftStick:{x:0,y:1,button:10},RightStick:{x:2,y:3,button:11},select:8,start:9};this.type=e.id.toUpperCase().indexOf("PLAYSTATION")<0?"XBOX":"PLAYSTATION";this.Dpad={Up:function(){return t.buttons[n.indicies.Dpad.up]},Down:function(){return t.buttons[n.indicies.Dpad.down]},Left:function(){return t.buttons[n.indicies.Dpad.left]},Right:function(){return t.buttons[n.indicies.Dpad.right]}};this.LeftShoulder={Top:function(){return t.buttons[n.indicies.LeftShoulder.top]},Bottom:function(){return t.buttons[n.indicies.LeftShoulder.bottom]}};this.RightShoulder={Top:function(){return t.buttons[n.indicies.RightShoulder.top]},Bottom:function(){return t.buttons[n.indicies.RightShoulder.bottom]}};this.Buttons={Top:function(){return t.buttons[n.indicies.Buttons.top]},Bottom:function(){return t.buttons[n.indicies.Buttons.bottom]},Left:function(){return t.buttons[n.indicies.Buttons.left]},Right:function(){return t.buttons[n.indicies.Buttons.right]}};this.LeftStick={X:function(){return t.axes[n.indicies.LeftStick.x]},Y:function(){return t.axes[n.indicies.LeftStick.y]},Button:function(){return t.buttons[n.indicies.LeftStick.button]}};this.RightStick={X:function(){return t.axes[n.indicies.RightStick.x]},Y:function(){return t.axes[n.indicies.RightStick.y]},Button:function(){return t.buttons[n.indicies.RightStick.button]}};this.Select=function(){return t.buttons[n.indicies.select]};this.Start=function(){return t.buttons[n.indicies.start]};this.Delete=function(){s.input.Gamepads.current.remove(this.id)};this.Update=function(e){if(this.type!="PLAYSTATION"){t=s.input.Gamepads.Raw.current[this.id]}}};var f=function(){};var l={Mouse:{Down:function(e){p.lastX=e.clientX;p.lastY=e.clientY;p.pressed=true;var t=v.get("DOWN");if(t){for(var n=t.length-1;n>=0;n--){if(t[n].scope){t[n].func.apply(t.scope,[e])}else{t[n].func(e)}}}},Up:function(e){p.pressed=false;var t=v.get("UP");if(t){for(var n=t.length-1;n>=0;n--){if(t[n].scope){t[n].func.apply(t.scope,[e])}else{t[n].func(e)}}}},Move:function(e){if(!p.pressed){return}var t=v.get("MOVE");if(t){for(var n=t.length-1;n>=0;n--){if(t[n].scope){t[n].func.apply(t.scope,[e])}else{t[n].func(e)}}}p.lastX=e.clientX;p.lastY=e.clientY}},Touch:{Start:function(e){e.preventDefault();h.lastX=e.touches[0].pageX;h.lastY=e.touches[0].pageY;h.startX=e.touches[0].pageX;h.startY=e.touches[0].pageY;h.pressed=true;var t=d.get("START");if(t){for(var n=t.length-1;n>=0;n--){if(t[n].scope){t[n].func.apply(t.scope,[e])}else{t[n].func(e)}}}},End:function(e){e.preventDefault();h.pressed=false;h.startX=0;h.startY=0;var t=d.get("END");if(t){for(var n=t.length-1;n>=0;n--){if(t[n].scope){t[n].func.apply(t.scope,[e])}else{t[n].func(e)}}}},Move:function(e){e.preventDefault();if(!h.pressed){return}var t=d.get("MOVE");if(t){for(var n=t.length-1;n>=0;n--){if(t[n].scope){t[n].func.apply(t.scope,[e])}else{t[n].func(e)}}}h.lastX=e.touches[0].pageX;h.lastY=e.touches[0].pageY}},Keyboard:{Keydown:function(e){var t=e.keyCode>47&&e.keyCode<91?g.get(String.fromCharCode(e.keyCode)):b.get(e.keyCode);if(t){for(var n=t.length-1;n>=0;n--){if(t[n].scope){t[n].func.apply(t.scope,[e])}else{t[n].func(e)}}}},Keyup:function(e){var t=e.keyCode>47&&e.keyCode<91?y.get(String.fromCharCode(e.keyCode)):w.get(e.keyCode);if(t){for(var n=t.length-1;n>=0;n--){if(t[n].scope){t[n].func.apply(t.scope,[e])}else{t[n].func(e)}}}}},Gamepad:{Connect:function(e){var t=new a(e);s.input.Gamepads.current.put(t.id,t);var n=E.get("CONNECT");if(n){for(var r=n.length-1;r>=0;r--){if(n[r].scope){n[r].func.apply(n.scope,[t])}else{n[r].func(t)}}}},Disconnect:function(e){var t=s.input.Gamepads.current.get(e.index);var n=E.get("DISCONNECT");if(n){for(var r=n.length-1;r>=0;r--){if(n[r].scope){n[r].func.apply(n.scope,[t])}else{n[r].func(t)}}}t.Delete()}}};var c=function(e,t,n){this.func=t;this.scope=n==undefined?false:n;this.id=e};var h={startX:0,startY:0,lastX:0,lastY:0,pressed:false};var p={lastX:0,lastY:0,pressed:false};var d=null;var v=null;var m=null;var g=null;var y=null;var b=null;var w=null;var E=null;return{currentTime:0,previousTime:0,Update:function(e){s.input.Gamepads.Update(e)},Get:{State:{Mouse:function(){return p},Touch:function(){return h},Keyboard:function(e){return m.get(e)},Gamepad:function(e){return _Gamepads.get(e)}}},Register:{Mouse:{Event:{Down:function(e,t){var n=new c(u++,e,t);v.get("DOWN").push(n);return n},Up:function(e,t){var n=new c(u++,e,t);v.get("UP").push(n);return n},Move:function(e,t){var n=new c(u++,e,t);v.get("MOVE").push(n);return n}},State:{}},Touch:{Event:{Start:function(e,t){var n=new c(u++,e,t);d.get("START").push(n);return n},End:function(e,t){var n=new c(u++,e,t);d.get("END").push(n);return n},Move:function(e,t){var n=new c(u++,e,t);d.get("MOVE").push(n);return n}},State:{}},Keyboard:{Event:{Keydown:function(e,t,n){var r=new c(u++,t,n);var i;if(isNaN(e)){i=b.get(e)}else{i=b.get(e)}if(!i){i=[];if(isNaN(e)){g.put(e,i)}else{b.put(e,i)}}i.push(r);return r},Keyup:function(e,t,n){var r=new c(u++,t,n);var i;if(isNaN(e)){i=w.get(e)}else{i=w.get(e)}if(!i){i=[];if(isNaN(e)){y.put(e,i)}else{w.put(e,i)}}i.push(r);return r}},State:{}},Gamepad:{Event:{Connected:function(e,t){var n=new c(u++,e,t);E.get("CONNECT").push(n);return n},Disconnected:function(e,t){var n=new c(u++,e,t);E.get("DISCONNECT").push(n);return n}},State:{}}},Gamepads:{Raw:{current:[undefined,undefined,undefined,undefined],previous:[undefined,undefined,undefined,undefined]},current:null,previous:null,Poll:function(e){for(var t=3;t>=0;t--){s.input.Gamepads.Raw.previous[t]=s.input.Gamepads.Raw.current[t]}s.input.Gamepads.Raw.current=navigator.webkitGetGamepads&&navigator.webkitGetGamepads()||navigator.webkitGamepads;if(s.input.Gamepads.Raw.current){var n=false;for(var t=3;t>=0;t--){if(typeof s.input.Gamepads.Raw.current[t]!=typeof s.input.Gamepads.Raw.previous[t]){if(typeof s.input.Gamepads.Raw.previous[t]=="undefined"){l.Gamepad.Connect(s.input.Gamepads.Raw.current[t])}else{l.Gamepad.Disconnect(s.input.Gamepads.Raw.previous[t])}}}}},Update:function(e){s.input.Gamepads.Poll(e);for(var t=s.input.Gamepads.current.size-1;t>=0;t--){s.input.Gamepads.current.value().Update();s.input.Gamepads.current.next()}}},GetName:function(){return t},GetVersion:function(){return n},GetPath:function(){return r},GetID:function(){return i},Initialize:function(){document.addEventListener("touchstart",l.Touch.Start,false);document.addEventListener("touchend",l.Touch.End,false);document.addEventListener("touchmove",l.Touch.Move,false);document.addEventListener("mousedown",l.Mouse.Down,false);document.addEventListener("mouseup",l.Mouse.Up,false);document.addEventListener("mousemove",l.Mouse.Move,false);window.addEventListener("keydown",l.Keyboard.Keydown,false);window.addEventListener("keyup",l.Keyboard.Keyup,false);d=s.resschmgr.Create.Map();d.put("START",[]);d.put("END",[]);d.put("MOVE",[]);v=s.resschmgr.Create.Map();v.put("DOWN",[]);v.put("UP",[]);v.put("MOVE",[]);m=s.resschmgr.Create.Map();g=s.resschmgr.Create.Map();y=s.resschmgr.Create.Map();b=s.resschmgr.Create.Map();w=s.resschmgr.Create.Map();E=s.resschmgr.Create.Map();e.Gamepads.current=s.resschmgr.Create.Map();e.Gamepads.previous=s.resschmgr.Create.Map();E.put("CONNECT",[]);E.put("DISCONNECT",[])}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();if(typeof Float32Array!="undefined"){glMatrixArrayType=Float32Array}else if(typeof WebGLFloatArray!="undefined"){glMatrixArrayType=WebGLFloatArray}else{glMatrixArrayType=Array}var vec3={};vec3.create=function(e){var t=new glMatrixArrayType(3);if(e){t[0]=e[0];t[1]=e[1];t[2]=e[2]}return t};vec3.set=function(e,t){t[0]=e[0];t[1]=e[1];t[2]=e[2];return t};vec3.add=function(e,t,n){if(!n||e==n){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2];return e}n[0]=e[0]+t[0];n[1]=e[1]+t[1];n[2]=e[2]+t[2];return n};vec3.subtract=function(e,t,n){if(!n||e==n){e[0]-=t[0];e[1]-=t[1];e[2]-=t[2];return e}n[0]=e[0]-t[0];n[1]=e[1]-t[1];n[2]=e[2]-t[2];return n};vec3.negate=function(e,t){if(!t){t=e}t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];return t};vec3.scale=function(e,t,n){if(!n||e==n){e[0]*=t;e[1]*=t;e[2]*=t;return e}n[0]=e[0]*t;n[1]=e[1]*t;n[2]=e[2]*t;return n};vec3.normalize=function(e,t){if(!t){t=e}var n=e[0],r=e[1],i=e[2];var s=Math.sqrt(n*n+r*r+i*i);if(!s){t[0]=0;t[1]=0;t[2]=0;return t}else if(s==1){t[0]=n;t[1]=r;t[2]=i;return t}s=1/s;t[0]=n*s;t[1]=r*s;t[2]=i*s;return t};vec3.cross=function(e,t,n){if(!n){n=e}var r=e[0],i=e[1],s=e[2];var o=t[0],u=t[1],a=t[2];n[0]=i*a-s*u;n[1]=s*o-r*a;n[2]=r*u-i*o;return n};vec3.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)};vec3.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]};vec3.direction=function(e,t,n){if(!n){n=e}var r=e[0]-t[0];var i=e[1]-t[1];var s=e[2]-t[2];var o=Math.sqrt(r*r+i*i+s*s);if(!o){n[0]=0;n[1]=0;n[2]=0;return n}o=1/o;n[0]=r*o;n[1]=i*o;n[2]=s*o;return n};vec3.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+"]"};var mat3={};mat3.create=function(e){var t=new glMatrixArrayType(9);if(e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9]}return t};mat3.set=function(e,t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return t};mat3.identity=function(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=1;e[5]=0;e[6]=0;e[7]=0;e[8]=1;return e};mat3.toMat4=function(e,t){if(!t){t=mat4.create()}t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=0;t[4]=e[3];t[5]=e[4];t[6]=e[5];t[7]=0;t[8]=e[6];t[9]=e[7];t[10]=e[8];t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};mat3.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+"]"};mat3.multiply=function(e,t,n){if(!n){n=e}var r=e[0],i=e[1],s=e[2];var o=e[3],u=e[4],a=e[5];var f=e[6],l=e[7],c=e[8];var h=t[0],p=t[1],d=t[2];var v=t[3],m=t[4],g=t[5];var y=t[6],b=t[7],w=t[8];n[0]=h*r+p*o+d*f;n[1]=h*i+p*u+d*l;n[2]=h*s+p*a+d*c;n[3]=v*r+m*o+g*f;n[4]=v*i+m*u+g*l;n[5]=v*s+m*a+g*c;n[6]=y*r+b*o+w*f;n[7]=y*i+b*u+w*l;n[8]=y*s+b*a+w*c;return n};mat3.multiplyVec3=function(e,t,n){if(!n){n=t}var r=t[0],i=t[1],s=t[2];n[0]=e[0]*r+e[3]*i+e[6]*s;n[1]=e[1]*r+e[4]*i+e[7]*s;n[2]=e[2]*r+e[5]*i+e[8]*s;return n};mat3.transpose=function(e,t){if(!t||e==t){var n=e[1],r=e[2],i=e[5];e[1]=e[3];e[2]=e[6];e[3]=n;e[5]=e[7];e[6]=r;e[7]=i;return e}t[0]=e[0];t[1]=e[3];t[2]=e[6];t[3]=e[1];t[4]=e[4];t[5]=e[7];t[6]=e[2];t[7]=e[5];t[8]=e[8];return t};var mat4={};mat4.create=function(e){var t=new glMatrixArrayType(16);if(e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}return t};mat4.set=function(e,t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t};mat4.identity=function(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e};mat4.transpose=function(e,t){if(!t||e==t){var n=e[1],r=e[2],i=e[3];var s=e[6],o=e[7];var u=e[11];e[1]=e[4];e[2]=e[8];e[3]=e[12];e[4]=n;e[6]=e[9];e[7]=e[13];e[8]=r;e[9]=s;e[11]=e[14];e[12]=i;e[13]=o;e[14]=u;return e}t[0]=e[0];t[1]=e[4];t[2]=e[8];t[3]=e[12];t[4]=e[1];t[5]=e[5];t[6]=e[9];t[7]=e[13];t[8]=e[2];t[9]=e[6];t[10]=e[10];t[11]=e[14];t[12]=e[3];t[13]=e[7];t[14]=e[11];t[15]=e[15];return t};mat4.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];var s=e[4],o=e[5],u=e[6],a=e[7];var f=e[8],l=e[9],c=e[10],h=e[11];var p=e[12],d=e[13],v=e[14],m=e[15];return p*l*u*i-f*d*u*i-p*o*c*i+s*d*c*i+f*o*v*i-s*l*v*i-p*l*r*a+f*d*r*a+p*n*c*a-t*d*c*a-f*n*v*a+t*l*v*a+p*o*r*h-s*d*r*h-p*n*u*h+t*d*u*h+s*n*v*h-t*o*v*h-f*o*r*m+s*l*r*m+f*n*u*m-t*l*u*m-s*n*c*m+t*o*c*m};mat4.inverse=function(e,t){if(!t){t=e}var n=e[0],r=e[1],i=e[2],s=e[3];var o=e[4],u=e[5],a=e[6],f=e[7];var l=e[8],c=e[9],h=e[10],p=e[11];var d=e[12],v=e[13],m=e[14],g=e[15];var y=n*u-r*o;var b=n*a-i*o;var w=n*f-s*o;var E=r*a-i*u;var S=r*f-s*u;var x=i*f-s*a;var T=l*v-c*d;var N=l*m-h*d;var C=l*g-p*d;var k=c*m-h*v;var L=c*g-p*v;var A=h*g-p*m;var O=1/(y*A-b*L+w*k+E*C-S*N+x*T);t[0]=(u*A-a*L+f*k)*O;t[1]=(-r*A+i*L-s*k)*O;t[2]=(v*x-m*S+g*E)*O;t[3]=(-c*x+h*S-p*E)*O;t[4]=(-o*A+a*C-f*N)*O;t[5]=(n*A-i*C+s*N)*O;t[6]=(-d*x+m*w-g*b)*O;t[7]=(l*x-h*w+p*b)*O;t[8]=(o*L-u*C+f*T)*O;t[9]=(-n*L+r*C-s*T)*O;t[10]=(d*S-v*w+g*y)*O;t[11]=(-l*S+c*w-p*y)*O;t[12]=(-o*k+u*N-a*T)*O;t[13]=(n*k-r*N+i*T)*O;t[14]=(-d*E+v*b-m*y)*O;t[15]=(l*E-c*b+h*y)*O;return t};mat4.toMat3=function(e,t){if(!t){t=mat3.create()}t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[4];t[4]=e[5];t[5]=e[6];t[6]=e[8];t[7]=e[9];t[8]=e[10];return t};mat4.toInverseMat3=function(e,t){var n=e[0],r=e[1],i=e[2];var s=e[4],o=e[5],u=e[6];var a=e[8],f=e[9],l=e[10];var c=l*o-u*f;var h=-l*s+u*a;var p=f*s-o*a;var d=n*c+r*h+i*p;if(!d){return null}var v=1/d;if(!t){t=mat3.create()}t[0]=c*v;t[1]=(-l*r+i*f)*v;t[2]=(u*r-i*o)*v;t[3]=h*v;t[4]=(l*n-i*a)*v;t[5]=(-u*n+i*s)*v;t[6]=p*v;t[7]=(-f*n+r*a)*v;t[8]=(o*n-r*s)*v;return t};mat4.multiply=function(e,t,n){if(!n){n=e}var r=e[0],i=e[1],s=e[2],o=e[3];var u=e[4],a=e[5],f=e[6],l=e[7];var c=e[8],h=e[9],p=e[10],d=e[11];var v=e[12],m=e[13],g=e[14],y=e[15];var b=t[0],w=t[1],E=t[2],S=t[3];var x=t[4],T=t[5],N=t[6],C=t[7];var k=t[8],L=t[9],A=t[10],O=t[11];var M=t[12],_=t[13],D=t[14],P=t[15];n[0]=b*r+w*u+E*c+S*v;n[1]=b*i+w*a+E*h+S*m;n[2]=b*s+w*f+E*p+S*g;n[3]=b*o+w*l+E*d+S*y;n[4]=x*r+T*u+N*c+C*v;n[5]=x*i+T*a+N*h+C*m;n[6]=x*s+T*f+N*p+C*g;n[7]=x*o+T*l+N*d+C*y;n[8]=k*r+L*u+A*c+O*v;n[9]=k*i+L*a+A*h+O*m;n[10]=k*s+L*f+A*p+O*g;n[11]=k*o+L*l+A*d+O*y;n[12]=M*r+_*u+D*c+P*v;n[13]=M*i+_*a+D*h+P*m;n[14]=M*s+_*f+D*p+P*g;n[15]=M*o+_*l+D*d+P*y;return n};mat4.multiplyVec3=function(e,t,n){if(!n){n=t}var r=t[0],i=t[1],s=t[2];n[0]=e[0]*r+e[4]*i+e[8]*s+e[12];n[1]=e[1]*r+e[5]*i+e[9]*s+e[13];n[2]=e[2]*r+e[6]*i+e[10]*s+e[14];return n};mat4.multiplyVec4=function(e,t,n){if(!n){n=t}var r=t[0],i=t[1],s=t[2],o=t[3];n[0]=e[0]*r+e[4]*i+e[8]*s+e[12]*o;n[1]=e[1]*r+e[5]*i+e[9]*s+e[13]*o;n[2]=e[2]*r+e[6]*i+e[10]*s+e[14]*o;n[3]=e[3]*r+e[7]*i+e[11]*s+e[15]*o;return n};mat4.translate=function(e,t,n){var r=t[0],i=t[1],s=t[2];if(!n||e==n){e[12]=e[0]*r+e[4]*i+e[8]*s+e[12];e[13]=e[1]*r+e[5]*i+e[9]*s+e[13];e[14]=e[2]*r+e[6]*i+e[10]*s+e[14];e[15]=e[3]*r+e[7]*i+e[11]*s+e[15];return e}var o=e[0],u=e[1],a=e[2],f=e[3];var l=e[4],c=e[5],h=e[6],p=e[7];var d=e[8],v=e[9],m=e[10],g=e[11];n[0]=o;n[1]=u;n[2]=a;n[3]=f;n[4]=l;n[5]=c;n[6]=h;n[7]=p;n[8]=d;n[9]=v;n[10]=m;n[11]=g;n[12]=o*r+l*i+d*s+e[12];n[13]=u*r+c*i+v*s+e[13];n[14]=a*r+h*i+m*s+e[14];n[15]=f*r+p*i+g*s+e[15];return n};mat4.scale=function(e,t,n){var r=t[0],i=t[1],s=t[2];if(!n||e==n){e[0]*=r;e[1]*=r;e[2]*=r;e[3]*=r;e[4]*=i;e[5]*=i;e[6]*=i;e[7]*=i;e[8]*=s;e[9]*=s;e[10]*=s;e[11]*=s;return e}n[0]=e[0]*r;n[1]=e[1]*r;n[2]=e[2]*r;n[3]=e[3]*r;n[4]=e[4]*i;n[5]=e[5]*i;n[6]=e[6]*i;n[7]=e[7]*i;n[8]=e[8]*s;n[9]=e[9]*s;n[10]=e[10]*s;n[11]=e[11]*s;n[12]=e[12];n[13]=e[13];n[14]=e[14];n[15]=e[15];return n};mat4.rotate=function(e,t,n,r){var i=n[0],s=n[1],o=n[2];var u=Math.sqrt(i*i+s*s+o*o);if(!u){return null}if(u!=1){u=1/u;i*=u;s*=u;o*=u}var a=Math.sin(t);var f=Math.cos(t);var l=1-f;var c=e[0],h=e[1],p=e[2],d=e[3];var v=e[4],m=e[5],g=e[6],y=e[7];var b=e[8],w=e[9],E=e[10],S=e[11];var x=i*i*l+f,T=s*i*l+o*a,N=o*i*l-s*a;var C=i*s*l-o*a,k=s*s*l+f,L=o*s*l+i*a;var A=i*o*l+s*a,O=s*o*l-i*a,M=o*o*l+f;if(!r){r=e}else if(e!=r){r[12]=e[12];r[13]=e[13];r[14]=e[14];r[15]=e[15]}r[0]=c*x+v*T+b*N;r[1]=h*x+m*T+w*N;r[2]=p*x+g*T+E*N;r[3]=d*x+y*T+S*N;r[4]=c*C+v*k+b*L;r[5]=h*C+m*k+w*L;r[6]=p*C+g*k+E*L;r[7]=d*C+y*k+S*L;r[8]=c*A+v*O+b*M;r[9]=h*A+m*O+w*M;r[10]=p*A+g*O+E*M;r[11]=d*A+y*O+S*M;return r};mat4.rotateX=function(e,t,n){var r=Math.sin(t);var i=Math.cos(t);var s=e[4],o=e[5],u=e[6],a=e[7];var f=e[8],l=e[9],c=e[10],h=e[11];if(!n){n=e}else if(e!=n){n[0]=e[0];n[1]=e[1];n[2]=e[2];n[3]=e[3];n[12]=e[12];n[13]=e[13];n[14]=e[14];n[15]=e[15]}n[4]=s*i+f*r;n[5]=o*i+l*r;n[6]=u*i+c*r;n[7]=a*i+h*r;n[8]=s*-r+f*i;n[9]=o*-r+l*i;n[10]=u*-r+c*i;n[11]=a*-r+h*i;return n};mat4.rotateY=function(e,t,n){var r=Math.sin(t);var i=Math.cos(t);var s=e[0],o=e[1],u=e[2],a=e[3];var f=e[8],l=e[9],c=e[10],h=e[11];if(!n){n=e}else if(e!=n){n[4]=e[4];n[5]=e[5];n[6]=e[6];n[7]=e[7];n[12]=e[12];n[13]=e[13];n[14]=e[14];n[15]=e[15]}n[0]=s*i+f*-r;n[1]=o*i+l*-r;n[2]=u*i+c*-r;n[3]=a*i+h*-r;n[8]=s*r+f*i;n[9]=o*r+l*i;n[10]=u*r+c*i;n[11]=a*r+h*i;return n};mat4.rotateZ=function(e,t,n){var r=Math.sin(t);var i=Math.cos(t);var s=e[0],o=e[1],u=e[2],a=e[3];var f=e[4],l=e[5],c=e[6],h=e[7];if(!n){n=e}else if(e!=n){n[8]=e[8];n[9]=e[9];n[10]=e[10];n[11]=e[11];n[12]=e[12];n[13]=e[13];n[14]=e[14];n[15]=e[15]}n[0]=s*i+f*r;n[1]=o*i+l*r;n[2]=u*i+c*r;n[3]=a*i+h*r;n[4]=s*-r+f*i;n[5]=o*-r+l*i;n[6]=u*-r+c*i;n[7]=a*-r+h*i;return n};mat4.frustum=function(e,t,n,r,i,s,o){if(!o){o=mat4.create()}var u=t-e;var a=r-n;var f=s-i;o[0]=i*2/u;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=i*2/a;o[6]=0;o[7]=0;o[8]=(t+e)/u;o[9]=(r+n)/a;o[10]=-(s+i)/f;o[11]=-1;o[12]=0;o[13]=0;o[14]=-(s*i*2)/f;o[15]=0;return o};mat4.perspective=function(e,t,n,r,i){var s=n*Math.tan(e*Math.PI/360);var o=s*t;return mat4.frustum(-o,o,-s,s,n,r,i)};mat4.ortho=function(e,t,n,r,i,s,o){if(!o){o=mat4.create()}var u=t-e;var a=r-n;var f=s-i;o[0]=2/u;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=2/a;o[6]=0;o[7]=0;o[8]=0;o[9]=0;o[10]=-2/f;o[11]=0;o[12]=(e+t)/u;o[13]=(r+n)/a;o[14]=(s+i)/f;o[15]=1;return o};mat4.lookAt=function(e,t,n,r){if(!r){r=mat4.create()}var i=e[0],s=e[1],o=e[2],u=n[0],a=n[1],f=n[2],l=t[0],c=t[1],h=t[2];if(i==l&&s==c&&o==h){return mat4.identity(r)}var p,d,v,m,g,y,b,w,E,S;p=i-t[0];d=s-t[1];v=o-t[2];S=1/Math.sqrt(p*p+d*d+v*v);p*=S;d*=S;v*=S;m=a*v-f*d;g=f*p-u*v;y=u*d-a*p;S=Math.sqrt(m*m+g*g+y*y);if(!S){m=0;g=0;y=0}else{S=1/S;m*=S;g*=S;y*=S}b=d*y-v*g;w=v*m-p*y;E=p*g-d*m;S=Math.sqrt(b*b+w*w+E*E);if(!S){b=0;w=0;E=0}else{S=1/S;b*=S;w*=S;E*=S}r[0]=m;r[1]=b;r[2]=p;r[3]=0;r[4]=g;r[5]=w;r[6]=d;r[7]=0;r[8]=y;r[9]=E;r[10]=v;r[11]=0;r[12]=-(m*i+g*s+y*o);r[13]=-(b*i+w*s+E*o);r[14]=-(p*i+d*s+v*o);r[15]=1;return r};mat4.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+"]"};quat4={};quat4.create=function(e){var t=new glMatrixArrayType(4);if(e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3]}return t};quat4.set=function(e,t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t};quat4.calculateW=function(e,t){var n=e[0],r=e[1],i=e[2];if(!t||e==t){e[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i));return e}t[0]=n;t[1]=r;t[2]=i;t[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i));return t};quat4.inverse=function(e,t){if(!t||e==t){e[0]*=1;e[1]*=1;e[2]*=1;return e}t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];t[3]=e[3];return t};quat4.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)};quat4.normalize=function(e,t){if(!t){t=e}var n=e[0],r=e[1],i=e[2],s=e[3];var o=Math.sqrt(n*n+r*r+i*i+s*s);if(o==0){t[0]=0;t[1]=0;t[2]=0;t[3]=0;return t}o=1/o;t[0]=n*o;t[1]=r*o;t[2]=i*o;t[3]=s*o;return t};quat4.multiply=function(e,t,n){if(!n){n=e}var r=e[0],i=e[1],s=e[2],o=e[3];var u=t[0],a=t[1],f=t[2],l=t[3];n[0]=r*l+o*u+i*f-s*a;n[1]=i*l+o*a+s*u-r*f;n[2]=s*l+o*f+r*a-i*u;n[3]=o*l-r*u-i*a-s*f;return n};quat4.multiplyVec3=function(e,t,n){if(!n){n=t}var r=t[0],i=t[1],s=t[2];var o=e[0],u=e[1],a=e[2],f=e[3];var l=f*r+u*s-a*i;var c=f*i+a*r-o*s;var h=f*s+o*i-u*r;var p=-o*r-u*i-a*s;n[0]=l*f+p*-o+c*-a-h*-u;n[1]=c*f+p*-u+h*-o-l*-a;n[2]=h*f+p*-a+l*-u-c*-o;return n};quat4.toMat3=function(e,t){if(!t){t=mat3.create()}var n=e[0],r=e[1],i=e[2],s=e[3];var o=n+n;var u=r+r;var a=i+i;var f=n*o;var l=n*u;var c=n*a;var h=r*u;var p=r*a;var d=i*a;var v=s*o;var m=s*u;var g=s*a;t[0]=1-(h+d);t[1]=l-g;t[2]=c+m;t[3]=l+g;t[4]=1-(f+d);t[5]=p-v;t[6]=c-m;t[7]=p+v;t[8]=1-(f+h);return t};quat4.toMat4=function(e,t){if(!t){t=mat4.create()}var n=e[0],r=e[1],i=e[2],s=e[3];var o=n+n;var u=r+r;var a=i+i;var f=n*o;var l=n*u;var c=n*a;var h=r*u;var p=r*a;var d=i*a;var v=s*o;var m=s*u;var g=s*a;t[0]=1-(h+d);t[1]=l-g;t[2]=c+m;t[3]=0;t[4]=l+g;t[5]=1-(f+d);t[6]=p-v;t[7]=0;t[8]=c-m;t[9]=p+v;t[10]=1-(f+h);t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};quat4.slerp=function(e,t,n,r){r||(r=e);var i=n;if(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]<0)i=-1*n;r[0]=1-n*e[0]+i*t[0];r[1]=1-n*e[1]+i*t[1];r[2]=1-n*e[2]+i*t[2];r[3]=1-n*e[3]+i*t[3];return r};quat4.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+"]"};WebGLDebugUtils=function(){function r(e){if(n==null){n={};for(var t in e){if(typeof e[t]=="number"){n[e[t]]=t}}}}function i(){if(n==null){throw"WebGLDebugUtils.init(ctx) not called"}}function s(e){i();return n[e]!==undefined}function o(e){i();var t=n[e];return t!==undefined?t:"*UNKNOWN WebGL ENUM (0x"+e.toString(16)+")"}function u(e,n,r){var i=t[e];if(i!==undefined){if(i[n]){return o(r)}}return r.toString()}function a(e,t,n){e.__defineGetter__(n,function(){return t[n]});e.__defineSetter__(n,function(e){t[n]=e})}function f(e,t){var n=e[t];return function(){var t=n.apply(e,arguments);return t}}function l(t,n){function s(e,t){return function(){var r=e[t].apply(e,arguments);var s=e.getError();if(s!=0){i[s]=true;n(s,t,arguments)}return r}}r(t);n=n||function(t,n,r){var i="";for(var s=0;s<r.length;++s){i+=(s==0?"":", ")+u(n,s,r[s])}e("WebGL error "+o(t)+" in "+n+"("+i+")")};var i={};var f={};for(var l in t){if(typeof t[l]=="function"){f[l]=s(t,l)}else{a(f,t,l)}}f.getError=function(){for(var e in i){if(i[e]){i[e]=false;return e}}return t.NO_ERROR};return f}function c(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS);var n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var r=0;r<t;++r){e.disableVertexAttribArray(r);e.vertexAttribPointer(r,4,e.FLOAT,false,0,0);e.vertexAttrib1f(r,0)}e.deleteBuffer(n);var i=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(var r=0;r<i;++r){e.activeTexture(e.TEXTURE0+r);e.bindTexture(e.TEXTURE_CUBE_MAP,null);e.bindTexture(e.TEXTURE_2D,null)}e.activeTexture(e.TEXTURE0);e.useProgram(null);e.bindBuffer(e.ARRAY_BUFFER,null);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindRenderbuffer(e.RENDERBUFFER,null);e.disable(e.BLEND);e.disable(e.CULL_FACE);e.disable(e.DEPTH_TEST);e.disable(e.DITHER);e.disable(e.SCISSOR_TEST);e.blendColor(0,0,0,0);e.blendEquation(e.FUNC_ADD);e.blendFunc(e.ONE,e.ZERO);e.clearColor(0,0,0,0);e.clearDepth(1);e.clearStencil(-1);e.colorMask(true,true,true,true);e.cullFace(e.BACK);e.depthFunc(e.LESS);e.depthMask(true);e.depthRange(0,1);e.frontFace(e.CCW);e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE);e.lineWidth(1);e.pixelStorei(e.PACK_ALIGNMENT,4);e.pixelStorei(e.UNPACK_ALIGNMENT,4);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,false);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,false);if(e.UNPACK_COLORSPACE_CONVERSION_WEBGL){e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL)}e.polygonOffset(0,0);e.sampleCoverage(1,false);e.scissor(0,0,e.canvas.width,e.canvas.height);e.stencilFunc(e.ALWAYS,0,4294967295);e.stencilMask(4294967295);e.stencilOp(e.KEEP,e.KEEP,e.KEEP);e.viewport(0,0,e.canvas.clientWidth,e.canvas.clientHeight);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);while(e.getError());}function h(e){function m(e){if(typeof e=="function"){return e}else{return function(t){e.handleEvent(t)}}}function b(e){var t=e.addEventListener;e.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":g(r);break;case"webglcontextrestored":y(r);break;default:t.apply(e,arguments)}}}function w(e){return e instanceof WebGLBuffer||e instanceof WebGLFramebuffer||e instanceof WebGLProgram||e instanceof WebGLRenderbuffer||e instanceof WebGLShader||e instanceof WebGLTexture}function E(e){for(var t=0;t<e.length;++t){var n=e[t];if(w(n)){return n.__webglDebugContextLostId__==s}}return true}function S(){var e=Object.keys(v);for(var t=0;t<e.length;++t){delete v[e]}}function x(){++h;if(!o){if(l==h){e.loseContext()}}}function T(e,t){var n=e[t];return function(){x();if(!o){var t=n.apply(e,arguments);return t}}}function N(){for(var e=0;e<f.length;++e){var n=f[e];if(n instanceof WebGLBuffer){t.deleteBuffer(n)}else if(n instanceof WebGLFramebuffer){t.deleteFramebuffer(n)}else if(n instanceof WebGLProgram){t.deleteProgram(n)}else if(n instanceof WebGLRenderbuffer){t.deleteRenderbuffer(n)}else if(n instanceof WebGLShader){t.deleteShader(n)}else if(n instanceof WebGLTexture){t.deleteTexture(n)}}}function C(e){return{statusMessage:e,preventDefault:function(){p=true}}}function k(e){for(var r in e){if(typeof e[r]=="function"){n[r]=T(e,r)}else{a(n,e,r)}}n.getError=function(){x();if(!o){var e;while(e=t.getError()){v[e]=true}}for(var e in v){if(v[e]){delete v[e];return e}}return n.NO_ERROR};var i=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];for(var u=0;u<i.length;++u){var l=i[u];n[l]=function(t){return function(){x();if(o){return null}var n=t.apply(e,arguments);n.__webglDebugContextLostId__=s;f.push(n);return n}}(e[l])}var c=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];for(var u=0;u<c.length;++u){var l=c[u];n[l]=function(t){return function(){x();if(o){return null}return t.apply(e,arguments)}}(n[l])}var h=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];for(var u=0;u<h.length;++u){var l=h[u];n[l]=function(t){return function(){x();if(o){return false}return t.apply(e,arguments)}}(n[l])}n.checkFramebufferStatus=function(t){return function(){x();if(o){return n.FRAMEBUFFER_UNSUPPORTED}return t.apply(e,arguments)}}(n.checkFramebufferStatus);n.getAttribLocation=function(t){return function(){x();if(o){return-1}return t.apply(e,arguments)}}(n.getAttribLocation);n.getVertexAttribOffset=function(t){return function(){x();if(o){return 0}return t.apply(e,arguments)}}(n.getVertexAttribOffset);n.isContextLost=function(){return o};return n}var t;var n;var r=[];var i=[];var n={};var s=1;var o=false;var u=0;var f=[];var l=0;var h=0;var p=false;var d=0;var v={};e.getContext=function(r){return function(){var i=r.apply(e,arguments);if(i instanceof WebGLRenderingContext){if(i!=t){if(t){throw"got different context"}t=i;n=k(t)}return n}return i}}(e.getContext);var g=function(e){r.push(m(e))};var y=function(e){i.push(m(e))};b(e);e.loseContext=function(){if(!o){o=true;l=0;++s;while(t.getError());S();v[t.CONTEXT_LOST_WEBGL]=true;var n=C("context lost");var i=r.slice();setTimeout(function(){for(var t=0;t<i.length;++t){i[t](n)}if(d>=0){setTimeout(function(){e.restoreContext()},d)}},0)}};e.restoreContext=function(){if(o){if(i.length){setTimeout(function(){if(!p){throw"can not restore. webglcontestlost listener did not call event.preventDefault"}N();c(t);o=false;h=0;p=false;var e=i.slice();var n=C("context restored");for(var r=0;r<e.length;++r){e[r](n)}},0)}}};e.loseContextInNCalls=function(e){if(o){throw"You can not ask a lost contet to be lost"}l=h+e};e.getNumCalls=function(){return h};return e}var e=function(e){if(window.console&&window.console.log){window.console.log(e)}};var t={enable:{0:true},disable:{0:true},getParameter:{0:true},drawArrays:{0:true},drawElements:{0:true,2:true},createShader:{0:true},getShaderParameter:{1:true},getProgramParameter:{1:true},getVertexAttrib:{1:true},vertexAttribPointer:{2:true},bindTexture:{0:true},activeTexture:{0:true},getTexParameter:{0:true,1:true},texParameterf:{0:true,1:true},texParameteri:{0:true,1:true,2:true},texImage2D:{0:true,2:true,6:true,7:true},texSubImage2D:{0:true,6:true,7:true},copyTexImage2D:{0:true,2:true},copyTexSubImage2D:{0:true},generateMipmap:{0:true},bindBuffer:{0:true},bufferData:{0:true,2:true},bufferSubData:{0:true},getBufferParameter:{0:true,1:true},pixelStorei:{0:true,1:true},readPixels:{4:true,5:true},bindRenderbuffer:{0:true},bindFramebuffer:{0:true},checkFramebufferStatus:{0:true},framebufferRenderbuffer:{0:true,1:true,2:true},framebufferTexture2D:{0:true,1:true,2:true},getFramebufferAttachmentParameter:{0:true,1:true,2:true},getRenderbufferParameter:{0:true,1:true},renderbufferStorage:{0:true,1:true},clear:{0:true},depthFunc:{0:true},blendFunc:{0:true,1:true},blendFuncSeparate:{0:true,1:true,2:true,3:true},blendEquation:{0:true},blendEquationSeparate:{0:true,1:true},stencilFunc:{0:true},stencilFuncSeparate:{0:true,1:true},stencilMaskSeparate:{0:true},stencilOp:{0:true,1:true,2:true},stencilOpSeparate:{0:true,1:true,2:true,3:true},cullFace:{0:true},frontFace:{0:true}};var n=null;return{init:r,mightBeEnum:s,glEnumToString:o,glFunctionArgToString:u,makeDebugContext:l,makeLostContextSimulatingCanvas:h,resetToInitialState:c}}();WebGLUtils=function(){var e=function(e){return""+'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr>'+'<td align="center">'+'<div style="display: table-cell; vertical-align: middle;">'+'<div style="">'+e+"</div>"+"</div>"+"</td></tr></table>"};var t=""+"This page requires a browser that supports WebGL.<br/>"+'<a href="http://get.webgl.org">Click here to upgrade your browser.</a>';var n=""+"It doesn't appear your computer can support WebGL.<br/>"+'<a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>';var r=function(r,s,o){function u(i){var s=r.parentNode;if(s){var o=window.WebGLRenderingContext?n:t;if(i){o+="<br/><br/>Status: "+i}s.innerHTML=e(o)}}o=o||u;if(r.addEventListener){r.addEventListener("webglcontextcreationerror",function(e){o(e.statusMessage)},false)}var a=i(r,s);if(!a){if(!window.WebGLRenderingContext){o("")}}return a};var i=function(e,t){var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"];var r=null;for(var i=0;i<n.length;++i){try{r=e.getContext(n[i],t)}catch(s){}if(r){break}}return r};return{create3DContext:i,setupWebGL:r}}();window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}();com.jahova.os.Instance().Cores.Instance().Graphics=function(){function t(){var e="JaHOVA OS Internal API : Graphics Core";var t="0v5";var n="scripts/jahova/OS/Cores/Graphics/jahova.os.cores.graphics.js";var r=null;var s=com.jahova.os.Instance();var o=com.jahova.utilities.Instance();var u={width:0,height:0};var a=false;var f=false;var l=null;var c=null;var h=null;var p=null;var d=null;var v=null;var m=null;var g=function(e,t){var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"];var r=null;for(var i=0;i<n.length;++i){try{r=e.getContext(n[i],t)}catch(s){}if(r){break}}if(r){}else{alert("Could Not Create WebGL Context")}return r};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}();CVertexShader=function(e,t){this.filename=t;this.name=e;this.loaded=false;this.code="";this.shader=null;this.compiled=false;this.onLoad=null;this.Load=function(){var e=s.resschmgr.Create.XHRObject();var t=this.filename;e.open("GET",t,false);e.onreadystatechange=function(){if(e.readyState==4){if(e.status==200||e.status==0){this.code=e.responseText;this.loaded=true;this.Initialize();if(this.onLoad){this.onLoad()}}else{s.windows.Create.ErrorWindow("Shader Failer","Failed to load Vertex Shader: "+this.name+"<br/>At URL: "+this.filename+"<br/><br/>Check url and filename")}}}.bind(this);e.send()};this.Initialize=function(){var e=s.graphics.gl;this.shader=e.createShader(e.VERTEX_SHADER);e.shaderSource(this.shader,this.code);e.compileShader(this.shader);if(!e.getShaderParameter(this.shader,e.COMPILE_STATUS)){s.windows.Create.ErrorWindow("Shader Compile Error","Vertex Shader: "+this.name+"<br/><br/>"+e.getShaderInfoLog(this.shader))}else{this.compiled=true}}.bind(this);this.Load()};CFragmentShader=function(e,t){this.filename=t;this.name=e;this.loaded=false;this.code="";this.shader=null;this.onLoad=null;this.Load=function(){var e=s.resschmgr.Create.XHRObject();var t=this.filename;e.open("GET",t,false);e.onreadystatechange=function(){if(e.readyState==4){if(e.status==200||e.status==0){this.code=e.responseText;this.loaded=true;this.Initialize();if(this.onLoad){this.onLoad()}}else{s.windows.Create.ErrorWindow("Shader Failer","Failed to load Fragment Shader: "+this.name+"<br/>At URL: "+this.filename+"<br/><br/>Check url and filename")}}}.bind(this);e.send()};this.Initialize=function(){var e=s.graphics.gl;this.shader=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(this.shader,this.code);e.compileShader(this.shader);if(!e.getShaderParameter(this.shader,e.COMPILE_STATUS)){s.windows.Create.ErrorWindow("Shader Compile Error","Fragment Shader: "+this.name+"<br/><br/>"+e.getShaderInfoLog(this.shader))}else{this.compiled=true}}.bind(this);this.Load()};CProgram=function(e,t,n){var r=s.graphics.gl;this.name=n;this.compiled=false;this.attributes=s.resschmgr.Create.Map();this.uniforms=s.resschmgr.Create.Map();this.fragment=s.graphics.Managers.Shader.Maps.FragmentShaders.get(t);this.vertex=s.graphics.Managers.Shader.Maps.VertexShaders.get(e);this.program=r.createProgram();r.attachShader(this.program,this.fragment.shader);r.attachShader(this.program,this.vertex.shader);r.linkProgram(this.program);if(!r.getProgramParameter(this.program,r.LINK_STATUS)){s.windows.Create.ErrorWindow("Program Link Error","Program: "+this.name+"<br/><br/>Unable to initialize program<br/><br/>"+r.getProgramInfoLog(this.program))}else this.compiled=true;this.CreateAttribute=function(e){if(s.graphics.Managers.Shader.ActiveProgram!=this.name){s.graphics.Managers.Shader.SetActiveProgram(this)}var t=r.getAttribLocation(this.program,e);this.attributes.put(e,t);r.enableVertexAttribArray(t)};this.CreateUniform=function(e){if(s.graphics.Managers.Shader.ActiveProgram!=this.name){s.graphics.Managers.Shader.SetActiveProgram(this)}var t=r.getUniformLocation(this.program,e);this.uniforms.put(e,t)}};CShader=function(e){this.Uniforms=s.resschmgr.Create.Map();this.Attributes=s.resschmgr.Create.Map();this.Program=e;this.AddAttribute=function(e,t,n,r,i){if(s.graphics.Managers.Shader.ActiveProgram!=this.name){s.graphics.Managers.Shader.SetActiveProgram(this)}var o=s.graphics.Managers.Shader.Create.Attribute(e,t,r);o.location=this.Program.attributes.get(e);if(r.toUpperCase()=="CUSTOM"){var u=s.graphics.gl;o.value=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,o.buffer);u.bufferData(u.ARRAY_BUFFER,new Float32Array(n),u.STATIC_DRAW);o.buffer.itemSize=i;o.buffer.numItems=n.length/o.buffer.itemSize}this.Attributes.put(o.key,o)}.bind(this);this.AddUniform=function(e,t,n){if(s.graphics.Managers.Shader.ActiveProgram!=this.Program.name){s.graphics.Managers.Shader.SetActiveProgram(this.Program.name)}var r=s.graphics.Managers.Shader.Create.Uniform(e,t,n);r.location=this.Program.uniforms.get(e);this.Uniforms.put(r.key,r)}.bind(this);this.BindAttributes=function(e){var t=s.graphics.gl;for(var n=this.Attributes.size;n--;this.Attributes.next()){var r=this.Attributes.value();if(r.attributeType.toUpperCase()=="CUSTOM"){t.bindBuffer(t.ARRAY_BUFFER,r.buffer);t.vertexAttribPointer(r.location,r.buffer.itemSize,t.FLOAT,false,0,0)}else{if(this.Attributes.value().attributeType.toUpperCase()=="VERTEX"){t.bindBuffer(t.ARRAY_BUFFER,e.Buffers.Vertex);t.vertexAttribPointer(r.location,e.Buffers.Vertex.itemSize,t.FLOAT,false,0,0)}else if(this.Attributes.value().attributeType.toUpperCase()=="NORMAL"){t.bindBuffer(t.ARRAY_BUFFER,e.Buffers.Normal);t.vertexAttribPointer(r.location,e.Buffers.Normal.itemSize,t.FLOAT,false,0,0)}else if(this.Attributes.value().attributeType.toUpperCase()=="TEXTURE"){t.bindBuffer(t.ARRAY_BUFFER,e.Buffers.Texture);t.vertexAttribPointer(r.location,e.Buffers.Texture.itemSize,t.FLOAT,false,0,0)}else if(this.Attributes.value().attributeType.toUpperCase()=="INSTANCE"){t.bindBuffer(t.ARRAY_BUFFER,e.Buffers.Instance);t.vertexAttribPointer(r.location,e.Buffers.Instance.itemSize,t.FLOAT,false,0,0)}}}}.bind(this);this.SetUniforms=function(){for(i=this.Uniforms.size;i--;this.Uniforms.next()){var e=this.Uniforms.value();var t=s.graphics.gl;if(e.type=="BOOL"){t.uniform1i(e.location,e.value)}else if(e.type=="4X4"){t.uniformMatrix4fv(e.location,false,e.value)}else if(e.type=="3X3"){t.uniformMatrix3fv(e.location,false,e.value)}else if(e.type=="VEC3"){t.uniform3f(e.location,e.value[0],e.value[1],e.value[2])}else if(e.type=="VEC4"){t.uniform4f(e.location,e.value[0],e.value[1],e.value[2],e.value[3])}else if(e.type=="FLOAT"){t.uniform1f(e.location,e.value)}else if(e.type=="ARRAY_VEC3"){t.uniform3fv(e.location,e.value)}else if(e.type=="ARRAY_VEC4"){t.uniform4fv(e.location,e.value)}else{s.windows.Create.ErrorWindow("Shader Error","Unknown Uniform Type: "+e.type+" Found During SetUniforms()")}}}.bind(this)};CAttribute=function(e,t,n){this.key=e;this.variableName=e;this.buffer=null;this.location="";this.dataType=t;this.attributeType=n;this.itemSize=null};CUniform=function(e,t,n){this.key=e;this.variableName=e;this.value=n;this.location="";this.type=t};CTexture=function(e,t){var n=s.graphics.gl;this.key=e;this.initialized=false;this.type=n.TEXTURE_2D;this.texture=n.createTexture();this.image=new Image;this.image.src=t;this.onLoad=null;this.image.onload=function(){this.Initialize();if(this.onLoad){this.onLoad()}}.bind(this);this.Initialize=function(){n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,true);n.bindTexture(n.TEXTURE_2D,this.texture);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this.image);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_NEAREST);n.generateMipmap(n.TEXTURE_2D);n.bindTexture(n.TEXTURE_2D,null);this.initialized=true}.bind(this)};CRenderTexture=function(e,t,n){var r=s.graphics.gl;this.key=e;this.initialized=false;this.type=r.TEXTURE_2D;this.width=t;this.height=n;this.texture=r.createTexture();r.bindTexture(r.TEXTURE_2D,this.texture);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST);r.generateMipmap(r.TEXTURE_2D);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null);this.initialized=true};CCubeMap=function(e){var t=s.graphics.gl;var n=0;this.type=t.TEXTURE_CUBE_MAP;this.key=e;this.initialized=false;this.texture=t.createTexture();this.callback=null;var r=function(){n++;if(n==6){i();if(this.callback){this.callback()}}}.bind(this);var i=function(){t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,false);t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture);t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.Images.positiveX);t.texImage2D(t.TEXTURE_CUBE_MAP_NEGATIVE_X,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.Images.negativeX);t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_Y,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.Images.positiveY);t.texImage2D(t.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.Images.negativeY);t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_Z,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.Images.positiveZ);t.texImage2D(t.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.Images.negativeZ);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.generateMipmap(t.TEXTURE_CUBE_MAP);t.bindTexture(t.TEXTURE_CUBE_MAP,null)}.bind(this);this.GetCount=function(){return n};this.Images={positiveX:null,negativeX:null,positiveY:null,negativeY:null,positiveZ:null,negativeZ:null};this.Load={positiveX:function(e){this.Images.positiveX=new Image;this.Images.positiveX.src=e;this.Images.positiveX.onload=r}.bind(this),negativeX:function(e){this.Images.negativeX=new Image;this.Images.negativeX.src=e;this.Images.negativeX.onload=r}.bind(this),positiveY:function(e){this.Images.positiveY=new Image;this.Images.positiveY.src=e;this.Images.positiveY.onload=r}.bind(this),negativeY:function(e){this.Images.negativeY=new Image;this.Images.negativeY.src=e;this.Images.negativeY.onload=r}.bind(this),positiveZ:function(e){this.Images.positiveZ=new Image;this.Images.positiveZ.src=e;this.Images.positiveZ.onload=r}.bind(this),negativeZ:function(e){this.Images.negativeZ=new Image;this.Images.negativeZ.src=e;this.Images.negativeZ.onload=r}.bind(this)}};CMesh=function(e,t){this.name=e;this.filename=t;this.loaded=false;this.numOfPolys=0;this.numOfVerts=0;this.instanced=false;this.model=null;this.onLoad=null;this.Buffers={Vertex:null,Normal:null,Texture:null,Instance:null,Index:null};this.Load=function(){var e=s.resschmgr.Create.XHRObject();var t=this.filename;e.open("GET",t,true);e.onreadystatechange=function(){if(e.readyState==4){if(e.status==200||e.status==0){try{this.model=JSON.parse(e.responseText);this.Initialize();if(this.onLoad){this.onLoad()}}catch(t){s.windows.Create.ErrorWindow("Mesh Failer","Failed to parse Mesh: "+this.name+"<br/>At URL: "+this.filename+"<br/><br/>The file was not a compatiable JSON format")}}else{s.windows.Create.ErrorWindow("Mesh Failure","Failed to load Mesh: "+this.name+"<br/>At URL: "+this.filename+"<br/><br/>Check url and filename")}}}.bind(this);e.send()}.bind(this);this.Initialize=function(){var e=s.graphics.gl;if(this.model.vertexNormals){this.Buffers.Normal=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.Buffers.Normal);e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.model.vertexNormals),e.STATIC_DRAW);this.Buffers.Normal.itemSize=3;this.Buffers.Normal.numItems=this.model.vertexNormals.length/this.Buffers.Normal.itemSize}if(this.model.vertexTextureCoords){this.Buffers.Texture=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.Buffers.Texture);e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.model.vertexTextureCoords),e.STATIC_DRAW);this.Buffers.Texture.itemSize=2;this.Buffers.Texture.numItems=this.model.vertexTextureCoords.length/this.Buffers.Texture.itemSize}if(this.model.indices){this.Buffers.Index=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.Buffers.Index);e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.model.indices),e.STATIC_DRAW);this.Buffers.Index.itemSize=1;this.Buffers.Index.numItems=this.model.indices.length/this.Buffers.Index.itemSize}if(this.model.instance){this.Buffers.Instance=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.Buffers.Instance);e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.model.instance),e.STATIC_DRAW);this.Buffers.Instance.itemSize=1;this.Buffers.Instance.numItems=this.model.instance.length/this.Buffers.Instance.itemSize;this.instanced=true}this.Buffers.Vertex=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.Buffers.Vertex);e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.model.vertexPositions),e.STATIC_DRAW);this.Buffers.Vertex.itemSize=3;this.Buffers.Vertex.numItems=this.model.vertexPositions.length/this.Buffers.Vertex.itemSize;this.numOfVerts=this.Buffers.Vertex.numItems;this.numOfPolys=this.Buffers.Index.numItems/3;this.loaded=true}.bind(this);this.Draw=function(){var e=s.graphics.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.Buffers.Index);e.drawElements(e.TRIANGLES,this.Buffers.Index.numItems,e.UNSIGNED_SHORT,0);s.graphics.Managers.Mesh.totalPolys+=this.numOfPolys;s.graphics.Managers.Mesh.totalVerts+=this.numOfVerts};this.DrawArray=function(){var e=s.graphics.gl;e.drawArrays(e.TRIANGLES,0,this.Buffers.Vertex.numItems)};if(t){this.Load()}};CGraphicsEntity=function(e){this.parent=e;this.Texture=s.resschmgr.Create.Map();this.Mesh=s.resschmgr.Create.Map();this.Shaders=s.resschmgr.Create.Map();this.Vectors={Position:vec3.create(),Scale:vec3.create([1,1,1]),Rotate:vec3.create(),Offset:vec3.create()};this.Matrix={World:mat4.create(),Translate:mat4.create(),Parent:mat4.create(),Scale:mat4.create(),Rotation:mat4.create(),RotateX:mat4.create(),RotateY:mat4.create(),RotateZ:mat4.create(),Normal:mat3.create()};mat4.identity(this.Matrix.Parent);this.Add={Shader:function(e,t){var n=s.graphics.Managers.Shader.Maps.Programs.get(t);var r=s.graphics.Managers.Shader.Create.Shader(n);this.Shaders.put(e,r);return r}.bind(this),Mesh:function(e){var t=s.graphics.Managers.Mesh.meshes.get(e);if(t.instanced){var n=this.Shaders.get("default");if(n){n.Program.CreateAttribute("aInstance");n.AddAttribute("aInstance","FLOAT",null,"INSTANCE",null);n.Uniforms.get("uUseInstacing").value=true}}this.Mesh.put(e,t);return t}.bind(this),Texture:function(e){var t=s.graphics.Managers.Texture.textures.get(e);this.Texture.put(e,t);return t}.bind(this)};this.Update=function(e){};this.Draw=function(e,n){var r=null;var i=null;if(e){r=this.Shaders.get(e)}else{r=this.Shaders.value()}if(n){i=this.Mesh.get(n);t(i,r)}else{for(var s=this.Mesh.size;s--;this.Mesh.next()){t(this.Mesh.value(),r)}}};var t=function(e,t){var n=s.graphics.gl;if(s.graphics.Managers.Shader.ActiveProgram!=t.Program.name){s.graphics.Managers.Shader.SetActiveProgram(t.Program)}if(!e.loaded){return}mat4.identity(this.Matrix.Scale);mat4.scale(this.Matrix.Scale,this.Vectors.Scale,this.Matrix.Scale);mat4.identity(this.Matrix.Translate);if(this.parent.Physics){mat4.translate(this.Matrix.Translate,this.parent.Physics.position)}else{mat4.translate(this.Matrix.Translate,this.parent.Position)}if(this.parent.Physics){quat4.normalize(this.parent.Physics.orientation,this.parent.Physics.orientation);mat4.set(quat4.toMat4(this.parent.Physics.orientation),this.Matrix.Rotation);mat4.multiply(this.parent.Default.Rotation,this.Matrix.Rotation,this.Matrix.Rotation)}else{this.CalculateRotationMatrix();mat4.identity(this.Matrix.RotateX);mat4.identity(this.Matrix.RotateY);mat4.identity(this.Matrix.RotateZ);mat4.rotateZ(this.Matrix.RotateZ,degToRad(this.parent.roll),this.Matrix.RotateZ);mat4.rotateX(this.Matrix.RotateX,degToRad(this.parent.pitch),this.Matrix.RotateX);mat4.rotateY(this.Matrix.RotateY,degToRad(this.parent.yaw),this.Matrix.RotateY);mat4.identity(this.Matrix.Rotation);mat4.multiply(this.parent.Default.Rotation,this.Matrix.RotateY,this.Matrix.Rotation);mat4.multiply(this.Matrix.Rotation,this.Matrix.RotateX,this.Matrix.Rotation);mat4.multiply(this.Matrix.Rotation,this.Matrix.RotateZ,this.Matrix.Rotation)}mat4.identity(this.Matrix.World);mat4.multiply(this.Matrix.Parent,this.Matrix.World,this.Matrix.World);mat4.multiply(this.Matrix.World,this.Matrix.Translate,this.Matrix.World);mat4.multiply(this.Matrix.World,this.Matrix.Rotation,this.Matrix.World);mat4.multiply(this.Matrix.World,this.Matrix.Scale,this.Matrix.World);mat4.multiply(this.Matrix.World,this.parent.Default.Offset,this.Matrix.World);var r=mat4.create();mat4.toInverseMat3(this.Matrix.World,this.Matrix.Normal);mat3.transpose(this.Matrix.Normal,this.Matrix.Normal);if(t.Program.name=="default"){var i=t.Uniforms.get("uUseTextures");if(i){if(i.value){if(this.Texture.value()){n.activeTexture(n.TEXTURE0);n.bindTexture(this.Texture.value().type,this.Texture.value().texture);n.generateMipmap(n.TEXTURE_2D);n.uniform1i(t.Uniforms.get("uSampler"),0)}else{throw new Error("Error: Texture Enabled for Entity: "+this.Texture.value().key+" , But No Texture Loaded")}}}}else if(this.Texture.size>0){n.activeTexture(n.TEXTURE0);n.bindTexture(this.Texture.value().type,this.Texture.value().texture);n.uniform1i(t.Uniforms.get("uSampler"),0)}t.SetUniforms();t.BindAttributes(e);e.Draw()}.bind(this)};return{gl:null,Managers:{Shader:{Maps:{VertexShaders:new s.resschmgr.Create.Map,FragmentShaders:new s.resschmgr.Create.Map,Programs:new s.resschmgr.Create.Map},Create:{VertexShader:function(e,t){var n=new CVertexShader(e,t);s.graphics.Managers.Shader.Maps.VertexShaders.put(e,n);return n},FragmentShader:function(e,t){var n=new CFragmentShader(e,t);s.graphics.Managers.Shader.Maps.FragmentShaders.put(e,n);return n},Program:function(e,t,n){var r=new CProgram(e,t,n);s.graphics.Managers.Shader.Maps.Programs.put(n,r);return r},Shader:function(e){var t=new CShader(e);return t},Uniform:function(e,t,n){var r=new CUniform(e,t,n);return r},Attribute:function(e,t,n){var r=new CAttribute(e,t,n);return r}},SetActiveProgram:function(e){s.graphics.Managers.Shader.ActiveProgram=e.name;s.graphics.gl.useProgram(e.program)},ActiveProgram:null},Mesh:{meshes:s.resschmgr.Create.Map(),totalPolys:0,totalVerts:0,Create:{Mesh:function(e,t){var n=new CMesh(e,t);s.graphics.Managers.Mesh.meshes.put(e,n);return n},Primitive:{Cube:function(e){var t=new CMesh(e);t.model={};t.model.indices=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];t.model.vertexNormals=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0];t.model.vertexPositions=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1];t.model.vertexTextureCoords=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1];s.graphics.Managers.Mesh.meshes.put(e,t);return t},Quad:function(e){var t=new CMesh(e);t.model={};t.model.indices=[0,1,2,0,2,3];t.model.vertexNormals=[0,0,1,0,0,1,0,0,1,0,0,1];t.model.vertexPositions=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];t.model.vertexTextureCoords=[0,0,1,0,1,1,0,1];s.graphics.Managers.Mesh.meshes.put(e,t);return t},Sphere:function(e){var t=new CMesh(e);t.model={};t.model.vertexPositions=[3.1164155077197375e-17,20,1.5582077538598687e-17,3.1164155077197375e-17,18.476,-7.652,-2.928,18.476,-7.072,3.1164155077197375e-17,20,1.5582077538598687e-17,-5.412,18.476,-5.412,3.1164155077197375e-17,20,1.5582077538598687e-17,-7.072,18.476,-2.928,3.1164155077197375e-17,20,1.5582077538598687e-17,-7.652,18.476,1.5582077538598687e-17,3.1164155077197375e-17,20,1.5582077538598687e-17,-7.072,18.476,2.928,3.1164155077197375e-17,20,1.5582077538598687e-17,-5.412,18.476,5.412,3.1164155077197375e-17,20,1.5582077538598687e-17,-2.928,18.476,7.072,3.1164155077197375e-17,20,1.5582077538598687e-17,3.1164155077197375e-17,18.476,7.652,3.1164155077197375e-17,20,1.5582077538598687e-17,2.928,18.476,7.072,3.1164155077197375e-17,20,1.5582077538598687e-17,5.412,18.476,5.412,3.1164155077197375e-17,20,1.5582077538598687e-17,7.072,18.476,2.928,3.1164155077197375e-17,20,1.5582077538598687e-17,7.652,18.476,1.5582077538598687e-17,3.1164155077197375e-17,20,1.5582077538598687e-17,7.072,18.476,-2.928,3.1164155077197375e-17,20,1.5582077538598687e-17,5.412,18.476,-5.412,3.1164155077197375e-17,20,1.5582077538598687e-17,2.928,18.476,-7.072,3.1164155077197375e-17,20,1.5582077538598687e-17,3.1164155077197375e-17,18.476,-7.652,3.1164155077197375e-17,14.144,-14.144,-5.412,14.144,-13.064,-10,14.144,-10,-13.064,14.144,-5.412,-14.144,14.144,1.5582077538598687e-17,-13.064,14.144,5.412,-10,14.144,10,-5.412,14.144,13.064,3.1164155077197375e-17,14.144,14.144,5.412,14.144,13.064,10,14.144,10,13.064,14.144,5.412,14.144,14.144,1.5582077538598687e-17,13.064,14.144,-5.412,10,14.144,-10,5.412,14.144,-13.064,3.1164155077197375e-17,14.144,-14.144,3.1164155077197375e-17,14.144,-14.144,3.1164155077197375e-17,18.476,-7.652,3.1164155077197375e-17,7.652,-18.476,-7.072,7.652,-17.072,-13.064,7.652,-13.064,-17.072,7.652,-7.072,-18.476,7.652,1.5582077538598687e-17,-17.072,7.652,7.072,-13.064,7.652,13.064,-7.072,7.652,17.072,3.1164155077197375e-17,7.652,18.476,7.072,7.652,17.072,13.064,7.652,13.064,17.072,7.652,7.072,18.476,7.652,1.5582077538598687e-17,17.072,7.652,-7.072,13.064,7.652,-13.064,7.072,7.652,-17.072,3.1164155077197375e-17,7.652,-18.476,3.1164155077197375e-17,7.652,-18.476,3.1164155077197375e-17,14.144,-14.144,3.1164155077197375e-17,0,-20,-7.652,0,-18.476,-14.144,0,-14.144,-18.476,0,-7.652,-20,0,1.5582077538598687e-17,-18.476,0,7.652,-14.144,0,14.144,-7.652,0,18.476,3.1164155077197375e-17,0,20,7.652,0,18.476,14.144,0,14.144,18.476,0,7.652,20,0,1.5582077538598687e-17,18.476,0,-7.652,14.144,0,-14.144,7.652,0,-18.476,3.1164155077197375e-17,0,-20,3.1164155077197375e-17,0,-20,3.1164155077197375e-17,7.652,-18.476,3.1164155077197375e-17,-7.652,-18.476,-7.072,-7.652,-17.072,-13.064,-7.652,-13.064,-17.072,-7.652,-7.072,-18.476,-7.652,1.5582077538598687e-17,-17.072,-7.652,7.072,-13.064,-7.652,13.064,-7.072,-7.652,17.072,3.1164155077197375e-17,-7.652,18.476,7.072,-7.652,17.072,13.064,-7.652,13.064,17.072,-7.652,7.072,18.476,-7.652,1.5582077538598687e-17,17.072,-7.652,-7.072,13.064,-7.652,-13.064,7.072,-7.652,-17.072,3.1164155077197375e-17,-7.652,-18.476,3.1164155077197375e-17,-7.652,-18.476,3.1164155077197375e-17,0,-20,3.1164155077197375e-17,-14.144,-14.144,-5.412,-14.144,-13.064,-10,-14.144,-10,-13.064,-14.144,-5.412,-14.144,-14.144,1.5582077538598687e-17,-13.064,-14.144,5.412,-10,-14.144,10,-5.412,-14.144,13.064,3.1164155077197375e-17,-14.144,14.144,5.412,-14.144,13.064,10,-14.144,10,13.064,-14.144,5.412,14.144,-14.144,1.5582077538598687e-17,13.064,-14.144,-5.412,10,-14.144,-10,5.412,-14.144,-13.064,3.1164155077197375e-17,-14.144,-14.144,3.1164155077197375e-17,-14.144,-14.144,3.1164155077197375e-17,-7.652,-18.476,3.1164155077197375e-17,-18.476,-7.652,-2.928,-18.476,-7.072,-5.412,-18.476,-5.412,-7.072,-18.476,-2.928,-7.652,-18.476,1.5582077538598687e-17,-7.072,-18.476,2.928,-5.412,-18.476,5.412,-2.928,-18.476,7.072,3.1164155077197375e-17,-18.476,7.652,2.928,-18.476,7.072,5.412,-18.476,5.412,7.072,-18.476,2.928,7.652,-18.476,1.5582077538598687e-17,7.072,-18.476,-2.928,5.412,-18.476,-5.412,2.928,-18.476,-7.072,3.1164155077197375e-17,-18.476,-7.652,3.1164155077197375e-17,-18.476,-7.652,3.1164155077197375e-17,-14.144,-14.144,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-20,1.5582077538598687e-17,3.1164155077197375e-17,-18.476,-7.652],t.model.vertexNormals=[7.11818e-9,.998314,0,-.0224853,.906764,-.417791,-.180472,.90674,-.37753,7.11818e-9,.998314,0,-.311318,.906746,-.279589,7.11818e-9,.998314,0,-.394568,.906769,-.139153,7.11818e-9,.998314,0,-.417791,.906764,.0224853,7.11818e-9,.998314,0,-.37753,.90674,.180472,7.11818e-9,.998314,0,-.279589,.906746,.311318,7.11818e-9,.998314,0,-.139153,.906769,.394568,7.11818e-9,.998314,0,.0224853,.906764,.417791,7.11818e-9,.998314,0,.180472,.90674,.37753,7.11818e-9,.998314,0,.311318,.906746,.279589,7.11818e-9,.998314,0,.394568,.906769,.139153,7.11818e-9,.998314,0,.417791,.906764,-.0224853,7.11818e-9,.998314,0,.37753,.90674,-.180472,7.11818e-9,.998314,0,.279589,.906746,-.311318,7.11818e-9,.998314,0,.139153,.906769,-.394568,7.11818e-9,.998314,0,-.0224853,.906764,-.417791,-.00917635,.707194,-.706031,-.278733,.707191,-.648748,-.505698,.707148,-.492845,-.655821,.707147,-.261774,-.706031,.707194,.00917635,-.648748,.707191,.278733,-.492845,.707148,.505698,-.261774,.707147,.655821,.00917636,.707194,.706031,.278733,.707191,.648748,.505698,.707148,.492845,.655821,.707147,.261774,.706031,.707194,-.00917635,.648748,.707191,-.278733,.492845,.707148,-.505698,.261774,.707147,-.655821,-.00917635,.707194,-.706031,-.00917635,.707194,-.706031,-.0224853,.906764,-.417791,-.0048527,.382737,-.923233,-.357826,.382836,-.85104,-.656292,.38289,-.649265,-.854791,.382793,-.34882,-.923233,.382737,.0048527,-.85104,.382836,.357826,-.649265,.38289,.656292,-.34882,.382793,.854791,.0048527,.382737,.923233,.357826,.382836,.85104,.656292,.38289,.649265,.854791,.382793,.34882,.923233,.382737,-.0048527,.85104,.382836,-.357826,.649265,.38289,-.656292,.34882,.382793,-.854791,-.0048527,.382737,-.923233,-.0048527,.382737,-.923233,-.00917635,.707194,-.706031,0,7.74103e-9,-.999475,-.382382,-64306e-9,-.923435,-.706737,5.16123e-9,-.706736,-.923435,643112e-10,-.382382,-.999475,-7.74103e-9,2.58034e-9,-.923435,-64306e-9,.382382,-.706736,2.58061e-9,.706737,-.382382,64306e-9,.923435,2.58034e-9,-2.58034e-9,.999475,.382382,-64306e-9,.923435,.706737,5.16123e-9,.706736,.923435,643112e-10,.382382,.999475,-7.74103e-9,-2.58034e-9,.923435,-64306e-9,-.382382,.706736,2.58061e-9,-.706737,.382382,64306e-9,-.923435,0,7.74103e-9,-.999475,0,7.74103e-9,-.999475,-.0048527,.382737,-.923233,.0048527,-.382737,-.923233,-.34882,-.382793,-.854791,-.649265,-.38289,-.656292,-.85104,-.382836,-.357826,-.923233,-.382737,-.0048527,-.854791,-.382793,.34882,-.656292,-.38289,.649265,-.357826,-.382836,.85104,-.0048527,-.382737,.923233,.34882,-.382793,.854791,.649265,-.38289,.656292,.85104,-.382836,.357826,.923233,-.382737,.0048527,.854791,-.382793,-.34882,.656292,-.38289,-.649265,.357826,-.382836,-.85104,.0048527,-.382737,-.923233,.0048527,-.382737,-.923233,0,7.74103e-9,-.999475,.00917636,-.707194,-.706031,-.261774,-.707147,-.655821,-.492845,-.707148,-.505698,-.648748,-.707191,-.278732,-.706031,-.707194,-.00917636,-.655821,-.707147,.261774,-.505698,-.707148,.492845,-.278732,-.707191,.648748,-.00917636,-.707194,.706031,.261774,-.707147,.655821,.492845,-.707148,.505698,.648748,-.707191,.278732,.706031,-.707194,.00917636,.655821,-.707147,-.261774,.505698,-.707148,-.492845,.278732,-.707191,-.648748,.00917636,-.707194,-.706031,.00917636,-.707194,-.706031,.0048527,-.382737,-.923233,.0224853,-.906764,-.417791,-.139153,-.906769,-.394568,-.279589,-.906746,-.311318,-.37753,-.90674,-.180472,-.417791,-.906764,-.0224853,-.394568,-.906769,.139153,-.311318,-.906746,.279589,-.180472,-.90674,.37753,-.0224853,-.906764,.417791,.139153,-.906769,.394568,.279589,-.906746,.311318,.37753,-.90674,.180472,.417791,-.906764,.0224853,.394568,-.906769,-.139153,.311318,-.906746,-.279589,.180472,-.90674,-.37753,.0224853,-.906764,-.417791,.0224853,-.906764,-.417791,.00917636,-.707194,-.706031,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,1.18636e-9,-.998314,9.49091e-10,.0224853,-.906764,-.417791],t.model.vertexTextureCoords=[0,1,0,.875,.0625,.875,.0625,1,.125,.875,.125,1,.1875,.875,.1875,1,.25,.875,.25,1,.3125,.875,.3125,1,.375,.875,.375,1,.4375,.875,.4375,1,.5,.875,.5,1,.5625,.875,.5625,1,.625,.875,.625,1,.6875,.875,.6875,1,.75,.875,.75,1,.8125,.875,.8125,1,.875,.875,.875,1,.9375,.875,.9375,1,1,.875,0,.75,.0625,.75,.125,.75,.1875,.75,.25,.75,.3125,.75,.375,.75,.4375,.75,.5,.75,.5625,.75,.625,.75,.6875,.75,.75,.75,.8125,.75,.875,.75,.9375,.75,1,.75,1,.75,1,.875,0,.625,.0625,.625,.125,.625,.1875,.625,.25,.625,.3125,.625,.375,.625,.4375,.625,.5,.625,.5625,.625,.625,.625,.6875,.625,.75,.625,.8125,.625,.875,.625,.9375,.625,1,.625,1,.625,1,.75,0,.5,.0625,.5,.125,.5,.1875,.5,.25,.5,.3125,.5,.375,.5,.4375,.5,.5,.5,.5625,.5,.625,.5,.6875,.5,.75,.5,.8125,.5,.875,.5,.9375,.5,1,.5,1,.5,1,.625,0,.375,.0625,.375,.125,.375,.1875,.375,.25,.375,.3125,.375,.375,.375,.4375,.375,.5,.375,.5625,.375,.625,.375,.6875,.375,.75,.375,.8125,.375,.875,.375,.9375,.375,1,.375,1,.375,1,.5,0,.25,.0625,.25,.125,.25,.1875,.25,.25,.25,.3125,.25,.375,.25,.4375,.25,.5,.25,.5625,.25,.625,.25,.6875,.25,.75,.25,.8125,.25,.875,.25,.9375,.25,1,.25,1,.25,1,.375,0,.125,.0625,.125,.125,.125,.1875,.125,.25,.125,.3125,.125,.375,.125,.4375,.125,.5,.125,.5625,.125,.625,.125,.6875,.125,.75,.125,.8125,.125,.875,.125,.9375,.125,1,.125,1,.125,1,.25,0,0,.0625,0,.125,0,.1875,0,.25,0,.3125,0,.375,0,.4375,0,.5,0,.5625,0,.625,0,.6875,0,.75,0,.8125,0,.875,0,.9375,0,1,.125],t.model.indices=[0,1,2,3,2,4,5,4,6,7,6,8,9,8,10,11,10,12,13,12,14,15,14,16,17,16,18,19,18,20,21,20,22,23,22,24,25,24,26,27,26,28,29,28,30,31,30,32,1,33,34,1,34,2,2,34,35,2,35,4,4,35,36,4,36,6,6,36,37,6,37,8,8,37,38,8,38,10,10,38,39,10,39,12,12,39,40,12,40,14,14,40,41,14,41,16,16,41,42,16,42,18,18,42,43,18,43,20,20,43,44,20,44,22,22,44,45,22,45,24,24,45,46,24,46,26,26,46,47,26,47,28,28,47,48,28,48,30,30,48,49,30,50,51,33,52,53,33,53,34,34,53,54,34,54,35,35,54,55,35,55,36,36,55,56,36,56,37,37,56,57,37,57,38,38,57,58,38,58,39,39,58,59,39,59,40,40,59,60,40,60,41,41,60,61,41,61,42,42,61,62,42,62,43,43,62,63,43,63,44,44,63,64,44,64,45,45,64,65,45,65,46,46,65,66,46,66,47,47,66,67,47,67,48,48,67,68,48,69,70,52,71,72,52,72,53,53,72,73,53,73,54,54,73,74,54,74,55,55,74,75,55,75,56,56,75,76,56,76,57,57,76,77,57,77,58,58,77,78,58,78,59,59,78,79,59,79,60,60,79,80,60,80,61,61,80,81,61,81,62,62,81,82,62,82,63,63,82,83,63,83,64,64,83,84,64,84,65,65,84,85,65,85,66,66,85,86,66,86,67,67,86,87,67,88,89,71,90,91,71,91,72,72,91,92,72,92,73,73,92,93,73,93,74,74,93,94,74,94,75,75,94,95,75,95,76,76,95,96,76,96,77,77,96,97,77,97,78,78,97,98,78,98,79,79,98,99,79,99,80,80,99,100,80,100,81,81,100,101,81,101,82,82,101,102,82,102,83,83,102,103,83,103,84,84,103,104,84,104,85,85,104,105,85,105,86,86,105,106,86,107,108,90,109,110,90,110,91,91,110,111,91,111,92,92,111,112,92,112,93,93,112,113,93,113,94,94,113,114,94,114,95,95,114,115,95,115,96,96,115,116,96,116,97,97,116,117,97,117,98,98,117,118,98,118,99,99,118,119,99,119,100,100,119,120,100,120,101,101,120,121,101,121,102,102,121,122,102,122,103,103,122,123,103,123,104,104,123,124,104,124,105,105,124,125,105,126,127,109,128,129,109,129,110,110,129,130,110,130,111,111,130,131,111,131,112,112,131,132,112,132,113,113,132,133,113,133,114,114,133,134,114,134,115,115,134,135,115,135,116,116,135,136,116,136,117,117,136,137,117,137,118,118,137,138,118,138,119,119,138,139,119,139,120,120,139,140,120,140,121,121,140,141,121,141,122,122,141,142,122,142,123,123,142,143,123,143,124,124,143,144,124,145,146,147,129,128,148,130,129,149,131,130,150,132,131,151,133,132,152,134,133,153,135,134,154,136,135,155,137,136,156,138,137,157,139,138,158,140,139,159,141,140,160,142,141,161,143,142,162,163,143];s.graphics.Managers.Mesh.meshes.put(e,t);return t}},Instanced:function(e,t,n){var r=s.graphics.Managers.Mesh.GetMesh(e);var i=s.graphics.Managers.Mesh.Create.Mesh(t);i.model={};i.model.indices=[];i.model.vertexNormals=[];i.model.vertexPositions=[];i.model.vertexTextureCoords=[];i.model.instance=[];for(var o=0;o<n;o++){i.model.vertexPositions=i.model.vertexPositions.concat(r.model.vertexPositions);i.model.vertexNormals=i.model.vertexNormals.concat(r.model.vertexNormals);i.model.vertexTextureCoords=i.model.vertexTextureCoords.concat(r.model.vertexTextureCoords);for(var u=0;u<r.model.indices.length;u++){i.model.indices.push(r.model.indices[u]+o*r.numOfVerts)}for(var a=0;a<r.numOfVerts;a++){i.model.instance.push(o)}}i.instanced=true;s.graphics.Managers.Mesh.meshes.put(t,i);return i}},GetMesh:function(e){return s.graphics.Managers.Mesh.meshes.get(e)}},Sprite:{},Texture:{textures:new s.resschmgr.Create.Map,Create:{Texture:function(e,t){var n=new CTexture(e,t);s.graphics.Managers.Texture.textures.put(e,n);return n},CubeMap:function(e){var t=new CCubeMap(e);s.graphics.Managers.Texture.textures.put(e,t);return t},RenderTexture:function(e,t,n){var r=new CRenderTexture(e,t,n);s.graphics.Managers.Texture.textures.put(e,r);return r}},GetTexture:function(e){return s.graphics.Managers.Texture.textures.get(e)}},Entity:{Entities:new s.resschmgr.Create.Map,_count:0,Create:function(e,t){var n;if(t){n=t;s.graphics.Managers.Entity._count++}else{n=s.graphics.Managers.Entity._count++}var r=new s.resschmgr.Create.Entity(n);s.graphics.Managers.Entity.EnableGraphics(r,e);return r},EnableGraphics:function(e,t){e.Graphics=new CGraphicsEntity(e);e.Graphics.Set={};if(!t||t=="default"){var n=e.Graphics.Add.Shader("default","default");n.AddAttribute("aVertexPosition","FLOAT",null,"VERTEX",null);n.AddAttribute("aVertexNormal","FLOAT",null,"NORMAL",null);n.AddAttribute("aTextureCoord","FLOAT",null,"TEXTURE",null);n.AddUniform("uPMatrix","4X4",s.graphics.Matrix.Projection);n.AddUniform("uVMatrix","4X4",s.graphics.Matrix.View);n.AddUniform("uWMatrix","4X4",e.Graphics.Matrix.World);n.AddUniform("uNMatrix","3X3",e.Graphics.Matrix.Normal);n.AddUniform("uVIMatrix","4X4",s.graphics.Matrix.ViewInverse);n.AddUniform("uShowSpecularHighlights","BOOL",true);n.AddUniform("uUseTextures","BOOL",true);n.AddUniform("uUseLighting","BOOL",true);n.AddUniform("uUseBlendColor","BOOL",false);n.AddUniform("uUseFog","BOOL",false);n.AddUniform("uUseInstacing","BOOL",false);n.AddUniform("uMaterialShininess","FLOAT",32);n.AddUniform("uAmbientColor","VEC3",[.6,.6,.6]);n.AddUniform("uBlendColor","VEC3",[0,0,0]);n.AddUniform("uPointLightDiffuseColor","VEC3",[.8,.8,.8]);n.AddUniform("uPointLightLocation","VEC3",[75,120,211]);n.AddUniform("uFogColor","VEC3",[0,0,0]);n.AddUniform("uFogEndPosition","FLOAT",100);n.AddUniform("uFogBeginPosition","FLOAT",10);n.AddUniform("uCameraPosition","VEC3",s.graphics.Managers.Camera.Position);e.Graphics.Instanced={};e.Graphics.Instanced.position=[0,0,0];e.Graphics.Instanced.color=[0,0,0,0];n.AddUniform("uInstancePosition","ARRAY_VEC3",e.Graphics.Instanced.position);n.AddUniform("uInstanceColor","ARRAY_VEC4",e.Graphics.Instanced.color);e.Graphics.Set.lightPosition=function(e){var t=this.Graphics.Shaders.get("default");vec3.set(e,t.Uniforms.get("uPointLightLocation").value)}.bind(e);e.Graphics.Set.light=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uUseLighting").value=e}.bind(e);e.Graphics.Set.specular=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uShowSpecularHighlights").value=e}.bind(e);e.Graphics.Set.ambientColor=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uAmbientColor").value=e}.bind(e);e.Graphics.Set.texture=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uUseTextures").value=e}.bind(e);e.Graphics.Set.fog=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uUseFog").value=e}.bind(e);e.Graphics.Set.fogColor=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uFogColor").value=e}.bind(e);e.Graphics.Set.fogBeginPosition=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uFogBeginPosition").value=e}.bind(e);e.Graphics.Set.fogEndPosition=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uFogEndPosition").value=e}.bind(e);e.Graphics.Set.glow=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uUseGlow").value=e}.bind(e);e.Graphics.Set.useBlendColor=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uUseBlendColor").value=e}.bind(e);e.Graphics.Set.blendColor=function(e){var t=this.Graphics.Shaders.get("default");t.Uniforms.get("uBlendColor").value=e}.bind(e)}e.Position=vec3.create();e.yaw=0;e.pitch=0;e.roll=0;e.Set.Position=function(e,t,n){this.Position[0]=e;this.Position[1]=t;this.Position[2]=n}.bind(e);e.Set.Rotation=function(e,t,n){this.yaw=t;this.pitch=e;this.roll=n}.bind(e);e.Set.Scale=function(e,t,n){vec3.set([e,t,n],this.Graphics.Vectors.Scale)}.bind(e);e.Default={Look:vec3.create([0,0,1]),Right:vec3.create([1,0,0]),Up:vec3.create([0,1,0]),Offset:mat4.create(),Rotation:mat4.create(),yaw:0,pitch:0,roll:0,Position:vec3.create([0,0,0])};mat4.identity(e.Default.Offset);e.Attach=function(t){e.attachedEntity=t;if(t){e.attached=true;e.Position=t.Physics?t.Physics.position:t.Position}else{e.atached=false;e.Position=vec3.create();vec3.set(t.Position,e.Position)}};e.Axis={Look:vec3.create(e.Default.Look),Right:vec3.create(e.Default.Right),Up:vec3.create(e.Default.Up)};e.Matrix={Yaw:mat4.create(),Pitch:mat4.create(),Roll:mat4.create(),Rotation:mat4.create()};mat4.identity(e.Default.Rotation);e.Graphics.CalculateRotationMatrix=function(){vec3.set(this.Default.Up,this.Axis.Up);vec3.set(this.Default.Look,this.Axis.Look);vec3.set(this.Default.Right,this.Axis.Right);mat4.identity(this.Matrix.Yaw);mat4.identity(this.Matrix.Pitch);mat4.identity(this.Matrix.Roll);mat4.rotate(this.Matrix.Yaw,degToRad(this.yaw),this.Axis.Up);mat4.multiplyVec3(this.Matrix.Yaw,this.Axis.Look);mat4.multiplyVec3(this.Matrix.Yaw,this.Axis.Right);mat4.rotate(this.Matrix.Pitch,degToRad(this.pitch),this.Axis.Right);mat4.multiplyVec3(this.Matrix.Pitch,this.Axis.Look);mat4.multiplyVec3(this.Matrix.Pitch,this.Axis.Up);mat4.rotate(this.Matrix.Roll,degToRad(this.roll),this.Axis.Look);mat4.multiplyVec3(this.Matrix.Roll,this.Axis.Right);mat4.multiplyVec3(this.Matrix.Roll,this.Axis.Up);var t=vec3.create([e.Position[0],e.Position[1],e.Position[2]]);e.Matrix.Rotation[0]=this.Axis.Right[0];e.Matrix.Rotation[1]=this.Axis.Up[0];e.Matrix.Rotation[2]=this.Axis.Look[0];e.Matrix.Rotation[3]=0;e.Matrix.Rotation[4]=this.Axis.Right[1];e.Matrix.Rotation[5]=this.Axis.Up[1];e.Matrix.Rotation[6]=this.Axis.Look[1];e.Matrix.Rotation[7]=0;e.Matrix.Rotation[8]=this.Axis.Right[2];e.Matrix.Rotation[9]=this.Axis.Up[2];e.Matrix.Rotation[10]=this.Axis.Look[2];e.Matrix.Rotation[11]=0;e.Matrix.Rotation[12]=-1*vec3.dot(t,this.Axis.Right);e.Matrix.Rotation[13]=-1*vec3.dot(t,this.Axis.Up);e.Matrix.Rotation[14]=-1*vec3.dot(t,this.Axis.Look);e.Matrix.Rotation[15]=1;return e.Matrix.Rotation}.bind(e);e.Move={Forward:function(e){this.Position[0]+=this.Axis.Look[0]*e;this.Position[1]+=this.Axis.Look[1]*e;this.Position[2]+=this.Axis.Look[2]*e}.bind(e),Backward:function(e){this.Position[0]-=this.Axis.Look[0]*e;this.Position[1]-=this.Axis.Look[1]*e;this.Position[2]-=this.Axis.Look[2]*e}.bind(e),Left:function(e){this.Position[0]-=this.Axis.Right[0]*e;this.Position[1]-=this.Axis.Right[1]*e;this.Position[2]-=this.Axis.Right[2]*e}.bind(e),Right:function(e){this.Position[0]+=this.Axis.Right[0]*e;this.Position[1]+=this.Axis.Right[1]*e;this.Position[2]+=this.Axis.Right[2]*e}.bind(e),Up:function(e){this.Position[0]+=this.Axis.Up[0]*e;this.Position[1]+=this.Axis.Up[1]*e;this.Position[2]+=this.Axis.Up[2]*e}.bind(e),Down:function(e){this.Position[0]-=this.Axis.Up[0]*e;this.Position[1]-=this.Axis.Up[1]*e;this.Position[2]-=this.Axis.Up[2]*e}.bind(e)};e.AttachCamera=function(t,n,r){vec3.set([t,n,r],e.CameraOffset);s.graphics.Managers.Camera.Position=e.Position;s.graphics.Managers.Camera.Offset=e.CameraOffset};e.CameraOffset=vec3.create();return e}},Camera:{Position:vec3.create([0,0,0]),Offset:vec3.create([0,0,0]),Attach:function(e){s.graphics.Managers.Camera.attachedEntity=e;vec3.set([0,0,0],s.graphics.Managers.Camera.Offset);if(e){s.graphics.Managers.Camera.attached=true}else s.graphics.Managers.Camera.attached=false},attached:false,attachedEntity:null,Rotation:{yaw:0,pitch:0,roll:0},LookAtPoint:{x:0,y:0,z:0},Axis:{Look:vec3.create([0,0,-1]),Right:vec3.create([1,0,0]),Up:vec3.create([0,1,0])},Matrix:{Yaw:mat4.create(),Pitch:mat4.create(),Roll:mat4.create(),Rotation:mat4.create(),RotationInverse:mat4.create(),Translate:mat4.create()},MoveForward:function(e){var t=[];vec3.scale(s.graphics.Managers.Camera.Axis.Look,-e,t);vec3.add(s.graphics.Managers.Camera.Position,t,s.graphics.Managers.Camera.Position)},MoveBackward:function(e){var t=[];vec3.scale(s.graphics.Managers.Camera.Axis.Look,e,t);vec3.add(s.graphics.Managers.Camera.Position,t,s.graphics.Managers.Camera.Position)},MoveLeft:function(e){var t=[];vec3.scale(s.graphics.Managers.Camera.Axis.Right,-e,t);vec3.add(s.graphics.Managers.Camera.Position,t,s.graphics.Managers.Camera.Position)},MoveRight:function(e){var t=[];vec3.scale(s.graphics.Managers.Camera.Axis.Right,e,t);vec3.add(s.graphics.Managers.Camera.Position,t,s.graphics.Managers.Camera.Position)},MoveUp:function(e){var t=[];vec3.scale(s.graphics.Managers.Camera.Axis.Up,e,t);vec3.add(s.graphics.Managers.Camera.Position,t,s.graphics.Managers.Camera.Position)},MoveDown:function(e){var t=[];vec3.scale(s.graphics.Managers.Camera.Axis.Up,-e,t);vec3.add(s.graphics.Managers.Camera.Position,t,s.graphics.Managers.Camera.Position)},Roll:function(e){},Pitch:function(e){},Yaw:function(e){},CalculateViewMatrix:function(){var e=s.graphics.Managers.Camera;var t;if(e.attached){t=vec3.create([e.attachedEntity.Position[0],e.attachedEntity.Position[1],e.attachedEntity.Position[2]]);t[0]+=e.Axis.Look[0]*e.Offset[2];t[1]+=e.Axis.Look[1]*e.Offset[2];t[2]+=e.Axis.Look[2]*e.Offset[2];t[0]+=e.Axis.Right[0]*e.Offset[0];t[1]+=e.Axis.Right[1]*e.Offset[0];t[2]+=e.Axis.Right[2]*e.Offset[0];t[0]+=e.Axis.Up[0]*e.Offset[1];t[1]+=e.Axis.Up[1]*e.Offset[1];t[2]+=e.Axis.Up[2]*e.Offset[1]}else{t=vec3.create([e.Position[0],e.Position[1],e.Position[2]])}vec3.set([0,1,0],s.graphics.Managers.Camera.Axis.Up);vec3.set([0,0,-1],s.graphics.Managers.Camera.Axis.Look);vec3.set([1,0,0],s.graphics.Managers.Camera.Axis.Right);mat4.identity(s.graphics.Managers.Camera.Matrix.Yaw);mat4.identity(s.graphics.Managers.Camera.Matrix.Pitch);mat4.identity(s.graphics.Managers.Camera.Matrix.Roll);mat4.identity(s.graphics.Managers.Camera.Matrix.Rotation);mat4.rotate(s.graphics.Managers.Camera.Matrix.Yaw,degToRad(s.graphics.Managers.Camera.Rotation.yaw),s.graphics.Managers.Camera.Axis.Up);mat4.multiplyVec3(s.graphics.Managers.Camera.Matrix.Yaw,s.graphics.Managers.Camera.Axis.Look);mat4.multiplyVec3(s.graphics.Managers.Camera.Matrix.Yaw,s.graphics.Managers.Camera.Axis.Right);mat4.rotate(s.graphics.Managers.Camera.Matrix.Pitch,degToRad(s.graphics.Managers.Camera.Rotation.pitch),s.graphics.Managers.Camera.Axis.Right);mat4.multiplyVec3(s.graphics.Managers.Camera.Matrix.Pitch,s.graphics.Managers.Camera.Axis.Look);mat4.multiplyVec3(s.graphics.Managers.Camera.Matrix.Pitch,s.graphics.Managers.Camera.Axis.Up);mat4.rotate(s.graphics.Managers.Camera.Matrix.Roll,degToRad(s.graphics.Managers.Camera.Rotation.roll),s.graphics.Managers.Camera.Axis.Look);mat4.multiplyVec3(s.graphics.Managers.Camera.Matrix.Roll,s.graphics.Managers.Camera.Axis.Right);mat4.multiplyVec3(s.graphics.Managers.Camera.Matrix.Roll,s.graphics.Managers.Camera.Axis.Up);vec3.normalize(s.graphics.Managers.Camera.Axis.Up);vec3.normalize(s.graphics.Managers.Camera.Axis.Look);vec3.normalize(s.graphics.Managers.Camera.Axis.Right);s.graphics.Matrix.View[0]=s.graphics.Managers.Camera.Axis.Right[0];s.graphics.Matrix.View[1]=s.graphics.Managers.Camera.Axis.Up[0];s.graphics.Matrix.View[2]=s.graphics.Managers.Camera.Axis.Look[0];s.graphics.Matrix.View[3]=0;s.graphics.Matrix.View[4]=s.graphics.Managers.Camera.Axis.Right[1];s.graphics.Matrix.View[5]=s.graphics.Managers.Camera.Axis.Up[1];s.graphics.Matrix.View[6]=s.graphics.Managers.Camera.Axis.Look[1];s.graphics.Matrix.View[7]=0;s.graphics.Matrix.View[8]=s.graphics.Managers.Camera.Axis.Right[2];s.graphics.Matrix.View[9]=s.graphics.Managers.Camera.Axis.Up[2];s.graphics.Matrix.View[10]=s.graphics.Managers.Camera.Axis.Look[2];s.graphics.Matrix.View[11]=0;s.graphics.Matrix.View[12]=-1*vec3.dot(t,s.graphics.Managers.Camera.Axis.Right);s.graphics.Matrix.View[13]=-1*vec3.dot(t,s.graphics.Managers.Camera.Axis.Up);s.graphics.Matrix.View[14]=-1*vec3.dot(t,s.graphics.Managers.Camera.Axis.Look);s.graphics.Matrix.View[15]=1;mat4.transpose(s.graphics.Matrix.View,s.graphics.Matrix.ViewInverse)},ResetAxis:function(){},GetViewMatrix:function(){}}},Matrix:{Projection:mat4.create(),View:mat4.create(),ViewInverse:mat4.create()},Time:{current:0,previous:0,elapsed:0,dt:0},Get:{Canvas:function(){return l},Pause:function(){return f},Fullscreen:function(){return a},Width:function(){return l.width},Height:function(){return l.height}},Set:{Callback:{Update:function(e,t){c=e;h=t},Draw:function(e,t){p=e;d=t},Reset:function(e,t){v=e;m=t}},Fullscreen:function(e){},Viewport:function(e,t){}},Maps:{update:null,draw:null,name2id:null},Initialize:function(){s.graphics.Maps.update=s.resschmgr.Create.Map();s.graphics.Maps.draw=s.resschmgr.Create.Map();s.graphics.Maps.name2id=s.resschmgr.Create.Map();s.graphics.Matrix.View=mat4.create();s.graphics.Matrix.Projection=mat4.create()},Load:function(e,t,n){if(n){l=n}else{l=document.createElement("canvas");document.body.appendChild(l)}if(t){a=true;l.style.width="100%";l.style.height="100%";document.body.style.overflow="hidden"}else{a=false}if(e){s.graphics.gl=WebGLDebugUtils.makeDebugContext(g(l,{preserveDrawingBuffer:true,premultipliedAlpha:false}))}else{s.graphics.gl=g(l)}var r=s.graphics.gl;s.graphics.Managers.Camera.Position[0]=0;s.graphics.Managers.Camera.Position[1]=0;s.graphics.Managers.Camera.Position[2]=-500;s.graphics.Managers.Camera.Rotation.pitch=0;s.graphics.Managers.Camera.Rotation.yaw=0;s.graphics.Managers.Camera.Rotation.roll=0;s.graphics.Managers.Camera.CalculateViewMatrix();l.width=l.clientWidth;l.height=l.clientHeight;mat4.perspective(45,l.clientWidth/l.clientHeight,.1,1e4,s.graphics.Matrix.Projection);r.viewport(0,0,l.clientWidth,l.clientHeight);window.onresize=s.graphics.OnReset;r.clearColor(0,0,0,1);r.enable(r.DEPTH_TEST);r.depthFunc(r.LESS);r.enable(r.BLEND);r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA);if(l){s.graphics.Managers.Shader.Create.VertexShader("default","scripts/jahova/OS/Cores/Graphics/shaders/default.vs");s.graphics.Managers.Shader.Create.FragmentShader("default","scripts/jahova/OS/Cores/Graphics/shaders/default.fs");var i=s.graphics.Managers.Shader.Create.Program("default","default","default");i.CreateAttribute("aVertexPosition");i.CreateAttribute("aVertexNormal");i.CreateAttribute("aTextureCoord");i.CreateUniform("uPMatrix");i.CreateUniform("uVMatrix");i.CreateUniform("uWMatrix");i.CreateUniform("uNMatrix");i.CreateUniform("uVIMatrix");i.CreateUniform("uShowSpecularHighlights");i.CreateUniform("uUseTextures");i.CreateUniform("uUseLighting");i.CreateUniform("uUseBlendColor");i.CreateUniform("uUseInstacing");i.CreateUniform("uInstancePosition");i.CreateUniform("uInstanceColor");i.CreateUniform("uAmbientColor");i.CreateUniform("uBlendColor");i.CreateUniform("uPointLightSpecularColor");i.CreateUniform("uPointLightDiffuseColor");i.CreateUniform("uPointLightLocation");i.CreateUniform("uMaterialShininess");i.CreateUniform("uSampler");i.CreateUniform("uUseFog");i.CreateUniform("uCameraPosition");i.CreateUniform("uFogColor");i.CreateUniform("uFogEndPosition");i.CreateUniform("uFogBeginPosition")}return l},Start:function(){if(!f){requestAnimFrame(s.graphics.Start);s.graphics.Update();s.graphics.Draw()}},Pause:function(){if(!f){f=true}else{s.graphics.Resume()}},Resume:function(){if(f){f=false;s.graphics.Time.previous=s.graphics.Time.current;s.graphics.Time.current=(new Date).getTime();s.graphics.Time.elapsed+=s.graphics.Time.dt;s.graphics.Start()}},Update:function(){s.graphics.Time.previous=s.graphics.Time.current;s.graphics.Time.current=(new Date).getTime();s.graphics.Time.dt=s.graphics.Time.current-s.graphics.Time.previous;s.graphics.Time.elapsed+=s.graphics.Time.dt;if(c){if(h){c.apply(h,s.graphics.Time.dt)}else{c(s.graphics.Time.dt)}}for(var e=s.graphics.Maps.update.size;e--;s.graphics.Maps.update.next())s.graphics.Maps.update.value().Graphics.Update(s.graphics.Time.dt)},Draw:function(){var e=s.graphics.gl;s.graphics.Managers.Mesh.totalPolys=0;s.graphics.Managers.Mesh.totalVerts=0;s.graphics.Managers.Camera.CalculateViewMatrix();e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);if(p){if(d){p.apply(d,s.graphics.Time.dt)}else{p(s.graphics.Time.dt)}}for(var t=s.graphics.Maps.draw.size;t--;s.graphics.Maps.draw.next())s.graphics.Maps.draw.value().Graphics.Draw()},AddToWorld:function(e){s.graphics.AddToDraw(e);s.graphics.AddToUpdate(e)},AddToDraw:function(e){s.graphics.Maps.draw.put(e.ID(),e)},AddToUpdate:function(e){s.graphics.Maps.update.put(e.ID(),e)},RemoveFromWorld:function(e){s.graphics.RemoveFromDraw(e);s.graphics.RemoveFromUpdate(e)},RemoveFromDraw:function(e){s.graphics.Maps.draw.remove(e.ID())},RemoveFromUpdate:function(e){s.graphics.Maps.update.remove(e.ID())},OnReset:function(){l.width=l.clientWidth;l.height=l.clientHeight;if(v){if(m){v.apply(m,s.graphics.Time.dt)}else{v(s.graphics.Time.dt)}}s.graphics.gl.viewport(0,0,l.clientWidth,l.clientHeight);mat4.perspective(45,l.clientWidth/l.clientHeight,.1,1e4,s.graphics.Matrix.Projection)},GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}();com.jahova.os.Instance().Cores.Instance().Physics=function(){function t(){var e="JaHOVA OS Internal API : Physics Core";var t="0v5";var n="scripts/jahova/OS/Cores/Audio/jahova.os.cores.physics.js";var r=null;var i=com.jahova.os.Instance();var s=com.jahova.utilities.Instance();var o=0;var u=0;var a=function(e,t,n,r){var i=e;var s=[];var o=false;var u=t;var a=n;var f=r;this.Update=function(e){u.Get.PointInWorld(a,s);u.Add.ForceAtWorldPoint(f,s);o=true;return-1}};var f=function(e,t,n,r){var i=e;var s=[];var o=false;var u=t;var a=n;var f=r;this.Update=function(e){var t=[];quat4.toMat4(u.orientation,t);mat4.multiplyVec3(t,f,f);u.Get.PointInWorld(a,s);u.Add.ForceAtWorldPoint(f,s);o=true;return-1}};var l=function(e,t,n,r,i,s,o){var u=e;this.type="SPRING";this.pt1=i;this.pt2=s;this.duration=0;this.contactEntity=o;this.springConstant=n;this.restLength=r;var a=null;this.entity=t;this.Cancel=function(){this.duration=-1};this.Update=function(e){var t=[];var n=[];if(this.contactEntity){this.contactEntity.Get.PointInWorld(this.pt2,n)}else{n=this.pt2}this.entity.Get.PointInWorld(this.pt1,t);var r=[];vec3.subtract(n,t,r);var i=vec3.length(r);dx=i-this.restLength;dx=dx*this.springConstant;vec3.normalize(r);vec3.scale(r,dx,r);this.entity.Add.ForceAtWorldPoint(r,t);return this.duration};this.ID=function(){return u}};var c=function(e,t){var n=this;var r=e;this.inverseMass=t;this.linearDampening=1;this.angularDampening=1;this.maxSpeed=1e3;this.orientation=quat4.create();this.position=vec3.create();this.velocity=vec3.create();this.omega=vec3.create();this.linearAccel=vec3.create();this.rotAccel=vec3.create();this.forceAccum=vec3.create();this.torqueAccum=vec3.create();this.gravity=vec3.create();this.awake=true;this.motion=0;var s=mat3.create();var o=mat3.create();this.transformMatrix=mat4.create();quat4.set([0,0,0,1],this.orientation);mat4.identity(this.transformMatrix);this.Get={ID:function(){return r},PointInLocal:function(e,t){var r=[];mat4.inverse(n.transformMatrix,r);mat4.multiplyVec3(r,e,t)},PointInWorld:function(e,t){mat4.multiplyVec3(n.transformMatrix,e,t)},InertialTensor:function(){return o}};this.Add={ForceAtCM:function(){},ForceAtWorldPoint:function(e,t){vec3.add(e,n.forceAccum,n.forceAccum);var r=[];vec3.subtract(t,n.position,r);var i=[];vec3.cross(r,e,i);vec3.add(i,n.torqueAccum,n.torqueAccum);n.awake=true}.bind(this),ForceAtLocalPoint:function(e,t){var r=[];n.Get.PointInWorld(t,r);n.Add.ForceAtWorldPoint(e,r)},Torque:function(){},InertialTensor:function(e){o=e}};this.PrintRot=function(){var e=[];quat4.toMat3(n.orientation,e);var t=[e[0],e[1],e[2]];var r=[e[3],e[4],e[5]];var s=[e[6],e[7],e[8]];vec3.normalize(t,t);vec3.normalize(r,r);vec3.normalize(s,s);i.console.Comment("Theta X: "+180*Math.acos(vec3.dot(t,[1,0,0])).toFixed(2)/Math.PI);i.console.Comment("Theta Y: "+180*Math.acos(vec3.dot(r,[0,1,0])).toFixed(2)/Math.PI);i.console.Comment("Theta Z: "+180*Math.acos(vec3.dot(s,[0,0,1])).toFixed(2)/Math.PI)};this.Clear=function(){vec3.set([0,0,0],n.forceAccum);vec3.set([0,0,0],n.torqueAccum)};this.CalculateDerivedData=function(){quat4.normalize(n.orientation,n.orientation);var e=quat4.toMat3(n.orientation);var t=[];mat3.transpose(e,t);mat3.multiply(e,o,s);mat3.multiply(s,t,s);mat4.identity(n.transformMatrix);quat4.toMat4(n.orientation,n.transformMatrix);n.transformMatrix[12]=n.position[0];n.transformMatrix[13]=n.position[1];n.transformMatrix[14]=n.position[2];if(isNaN(n.transformMatrix[0])){var r=0;r++}};this.Update=function(e){if(n.awake){n.CalculateDerivedData();vec3.scale(n.forceAccum,n.inverseMass,n.linearAccel);var t=[];var r=[];vec3.scale(n.velocity,Math.pow(n.linearDampening,e),t);vec3.scale(n.linearAccel,e,r);vec3.add(t,r,n.velocity);var i=[];vec3.scale(n.velocity,e,i);vec3.add(n.position,i,n.position);mat3.multiplyVec3(s,n.torqueAccum,n.rotAccel);var o=[];var u=[];vec3.scale(n.omega,Math.pow(n.angularDampening,e),o);vec3.scale(n.rotAccel,e,u);vec3.add(o,u,n.omega);var a=[];quat4.multiply([n.omega[0],n.omega[1],n.omega[2],0],n.orientation,a);n.orientation=[n.orientation[0]+a[0]*e/2,n.orientation[1]+a[1]*e/2,n.orientation[2]+a[2]*e/2,n.orientation[3]+a[3]*e/2]}}};var h=function(){var e=this;this.entity=null;this.name="";this.type="OBB";this.center=[];this.halfSize=[];this.orientation=[];this.transpose=[];this.CollisionTest=function(t){var n=false;if(t.type=="OBB"){n=true;var r=e.halfSize[0],i=e.halfSize[1],s=e.halfSize[2];var o=t.halfSize[0],u=t.halfSize[1],a=t.halfSize[2];var f=[];var l=[];var c=[];var h=[];quat4.toMat3(this.orientation,f);var p=[f[0],f[3],f[6]];var d=[f[1],f[4],f[7]];var m=[f[2],f[5],f[8]];quat4.toMat3(t.orientation,l);var g=[l[0],l[3],l[6]];var y=[l[1],l[4],l[7]];var b=[l[2],l[5],l[8]];mat3.transpose(f,this.transpose);mat3.multiply(this.transpose,l,c);var w=c[0],E=c[1],S=c[2];var x=c[3],T=c[4],N=c[5];var C=c[6],k=c[7],L=c[8];vec3.subtract(t.center,this.center,h);var A,O,M;A=r;O=o*Math.abs(w)+u*Math.abs(x)+a*Math.abs(C);M=vec3.dot(p,h);if(M>A+O){return false}A=i;O=o*Math.abs(E)+u*Math.abs(T)+a*Math.abs(k);M=vec3.dot(d,h);if(M>A+O){return false}A=s;O=o*Math.abs(S)+u*Math.abs(N)+a*Math.abs(L);M=vec3.dot(m,h);if(M>A+O){return false}A=r*Math.abs(w)+i*Math.abs(E)+s*Math.abs(S);O=o;M=vec3.dot(g,h);if(M>A+O){return false}A=r*Math.abs(x)+i*Math.abs(T)+s*Math.abs(N);O=u;M=vec3.dot(y,h);if(M>A+O){return false}A=r*Math.abs(C)+i*Math.abs(k)+s*Math.abs(L);O=a;M=vec3.dot(b,h);if(M>A+O){return false}A=i*Math.abs(S)+s*Math.abs(E);O=u*Math.abs(C)+a*Math.abs(x);M=Math.abs(E*vec3.dot(m,h)-S*vec3.dot(d,h));if(M>A+O){return false}A=i*Math.abs(N)+s*Math.abs(T);O=o*Math.abs(C)+a*Math.abs(w);M=Math.abs(T*vec3.dot(m,h)-N*vec3.dot(d,h));if(M>A+O){return false}A=i*Math.abs(L)+s*Math.abs(k);O=o*Math.abs(x)+u*Math.abs(w);M=Math.abs(k*vec3.dot(m,h)-L*vec3.dot(d,h));if(M>A+O){return false}A=r*Math.abs(S)+s*Math.abs(w);O=u*Math.abs(k)+a*Math.abs(T);M=Math.abs(S*vec3.dot(p,h)-w*vec3.dot(m,h));if(M>A+O){return false}A=r*Math.abs(N)+s*Math.abs(x);O=o*Math.abs(k)+a*Math.abs(E);M=Math.abs(N*vec3.dot(p,h)-x*vec3.dot(m,h));if(M>A+O){return false}A=r*Math.abs(L)+s*Math.abs(C);O=o*Math.abs(T)+u*Math.abs(E);M=Math.abs(L*vec3.dot(p,h)-C*vec3.dot(m,h));if(M>A+O){return false}A=r*Math.abs(E)+i*Math.abs(w);O=u*Math.abs(L)+a*Math.abs(N);M=Math.abs(w*vec3.dot(d,h)-E*vec3.dot(p,h));if(M>A+O){return false}A=r*Math.abs(T)+i*Math.abs(x);O=o*Math.abs(L)+a*Math.abs(S);M=Math.abs(x*vec3.dot(d,h)-T*vec3.dot(p,h));if(M>A+O){return false}A=r*Math.abs(k)+i*Math.abs(C);O=o*Math.abs(N)+u*Math.abs(S);M=Math.abs(C*vec3.dot(d,h)-k*vec3.dot(p,h));if(M>A+O){return false}n=new v;n.obj2=t;n.point.obj2=t.ClosestPoint(e.center);n.obj1=e;n.point.obj1=e.ClosestPoint(t.center);vec3.subtract(n.point.obj2,n.point.obj1,n.normal);vec3.normalize(n.normal,n.normal)}else if(t.type=="AABB"){}else if(t.type=="SPHERE"){var _=t.halfSize*t.halfSize;var D=e.ClosestPoint(t.center);var P=[];vec3.subtract(D,t.center,P);n=_>vec3.dot(P,P)?true:false;if(n){n=new v;n.obj2=t;n.point.obj2=t.ClosestPoint(e.center);n.obj1=e;n.point.obj1=D;vec3.subtract(n.point.obj2,n.point.obj1,n.normal);vec3.normalize(n.normal,n.normal)}}else{}return n};this.ClosestPoint=function(t){var n=[];var r=[];var i=[];var s=[];quat4.toMat3(e.orientation,s);var o=[];o[0]=[s[0],s[3],s[6]];o[1]=[s[1],s[4],s[7]];o[2]=[s[2],s[5],s[8]];var u=[];vec3.subtract(t,e.center,n);vec3.set(e.center,r);for(var a=0;a<3;a++){i=vec3.dot(n,o[a]);if(i>e.halfSize[a]){i=e.halfSize[a]}else if(i<-e.halfSize[a]){i=-e.halfSize[a]}vec3.scale(o[a],i,u);vec3.add(r,u,r)}return r}};var p=function(){var e=this;this.entity=null;this.name="";this.type="SPHERE";this.center=[];this.halfSize=0;this.CollisionTest=function(t){var n=false;if(t.type=="OBB"){var r=e.halfSize*e.halfSize;var i=t.ClosestPoint(e.center);var s=[];vec3.subtract(e.center,i,s);n=r>vec3.dot(s,s)?true:false;if(n){n=new v;n.obj2=t;n.point.obj2=i;n.obj1=e;vec3.normalize(s,n.normal);vec3.scale(s,n.normal,e.halfSize,s);n.point.obj1=s}}else if(t.type=="AABB"){}else if(t.type=="SPHERE"){var r=(e.halfSize+t.halfSize)*(e.halfSize+t.halfSize);var s=[];vec3.subtract(e.center,t.center,s);n=r>vec3.dot(s,s)?true:false;if(n){n=new v;vec3.normalize(s,n.normal);n.obj1=e;vec3.scale(s,n.normal,e.halfSize,n.point.obj1);n.obj2=t;vec3.scale(n.normal,t.halfSize,n.point.obj2);vec3.add(t.center,n.point.obj2,n.point.obj2)}}else{}return n};this.ClosestPoint=function(t){var n=[];vec3.subtract(t,e.center,n);vec3.normalize(n,n);vec3.scale(n,e.halfSize,n);return n}};var d=function(){var e=this;this.type="AABB";this.center=[];this.halfSize=[];this.CollisionTest=function(t){var n=false;if(t.type=="OBB"){}else if(t.type=="AABB"){n=true;if(Math.abs(e.center[0]-t.center[0])>e.halfSize[0]+t.halfSize[0]){n=false}else if(Math.abs(e.center[1]-t.center[1])>e.halfSize[1]+t.halfSize[1]){n=false}else if(Math.abs(e.center[2]-t.center[2])>e.halfSize[2]+t.halfSize[2]){n=false}}else if(t.type=="SPHERE"){}else{}return n}};var v=function(){this.obj1=null;this.obj2=null;this.point={obj1:[],obj2:[]};this.normal=[]};return{forces:[],collisions:[],bvs:[],entities:null,forceMap:null,gravity:[],maxContacts:10,contacts:[],Create:{Force:{Impulse:function(e,t,n){var r=new a(o++,e,t,n);i.physics.forces.push(r);return r},LocalImpulse:function(e,t,n){var r=new f(o++,e,t,n);i.physics.forces.push(r);return r},Spring:function(e,t,n,r,s,u){var a=new l(o++,e,t,n,r,s,u);i.physics.forces.push(a);return a},Blast:function(){}},BV:{OBB:function(e,t,n){var r=new h;r.entity=e;r.halfSize=t;r.orientation=e?e.orientation:[0,0,0,1];if(n){r.center=n}else{r.center=e.position}i.physics.bvs.push(r);return r},Sphere:function(e,t,n){var r=new p;r.entity=e;r.halfSize=t;if(n){r.center=n}else{r.center=e.position}i.physics.bvs.push(r);return r},ABB:function(e,t,n){}},Entity:function(e){var t=new c(u++,e);i.physics.entities.put(u,t);return t},InertialTensor:{SphereSolid:function(e,t){var n=5/(2*t*t)*e.inverseMass;var r=[n,0,0,0,n,0,0,0,n];return r},SphereHollow:function(e,t){var n=3/(2*t*t)*e.inverseMass;var r=[n,0,0,0,n,0,0,0,n];return r},EllipsoidSolid:function(e,t,n,r){var i=5/(n*n+r*r)*e.inverseMass;var s=5/(t*t+r*r)*e.inverseMass;var o=5/(t*t+n*n)*e.inverseMass;var u=[i,0,0,0,s,0,0,0,o];return u},Cone:function(e,t,n){var r=1/(3/5*n*n+3/20*t*t)*e.inverseMass;var i=10/(3*t*t)*e.inverseMass;var s=[r,0,0,0,r,0,0,0,i];return s},Cube:function(e,t,n,r){var i=12/(n*n+r*r)*e.inverseMass;var s=12/(t*t+r*r)*e.inverseMass;var o=12/(t*t+n*n)*e.inverseMass;var u=[i,0,0,0,s,0,0,0,o];return u},CylinderSolid:function(e,t,n){var r=1/(12*(3*t*t+n*n))*e.inverseMass;var i=2/(t*t)*e.inverseMass;var s=[r,0,0,0,r,0,0,0,i];return s},CylinderHollow:function(e,t,n,r){var i=1/(12*(3*(t*t+n*n)+r*r))*e.inverseMass;var s=2/(t*t+n*n)*e.inverseMass;var o=[i,0,0,0,i,0,0,0,s];return o}}},Delete:{Force:function(){},Entity:function(){}},Register:{Force:function(){},Entity:function(){}},Update:{All:function(e){i.physics.Update.Accumulators();i.physics.Update.Forces(e);i.physics.Update.Entities(e)},Accumulators:function(){for(var e=0;e<i.physics.entities.size;e++){i.physics.entities.value().Clear();i.physics.entities.next()}},Forces:function(e){for(var t=i.physics.forces.length-1;t>=0;t--){if(i.physics.forces[t].Update(e)<0){i.physics.forces.splice(t,1)}}},Entities:function(e){for(var t=0;t<i.physics.entities.size;t++){i.physics.entities.value().Update(e);i.physics.entities.next()}}},Contacts:{Generate:function(){var e=false;for(var t=i.physics.bvs.length-1;t>=0;t--){for(var n=t-1;n>=0;n--){if(i.physics.bvs[t].CollisionTest(i.physics.bvs[n])){}}}},Resolve:function(){}},GetName:function(){return e},GetVersion:function(){return t},GetPath:function(){return n},GetID:function(){return r},Initialize:function(){i.physics.entities=i.resschmgr.Create.Map();i.physics.forceMap=i.resschmgr.Create.Map();vec3.create(i.physics.gravity)}}}var e;return{Instance:function(){if(!e){e=t()}return e}}}()